<div class="loader" *ngIf="spinner" style="overflow: inherit;margin: 0px auto;position: fixed;z-index: 1000;top: 40%;">
</div>
<div [ngStyle]="{'filter': (blurMode ? 'blur(1px)' : 'blur(0px)') ,'pointer-events': (blurMode ? 'none' : 'visible')}">
<div class="bg-image">
<div class="Cart-Container">
    <div class="Header">
        <mat-icon (click)="backBUtton();" title="back" style="cursor: pointer;margin-top: -10px;
        margin-left: -50px;">arrow_back</mat-icon>

        <h3 class="Heading" style="margin-top: 10px;">Shopping Cart</h3>
        <span class="Heading" style="margin-left: 45%;">Price</span>
        <span class="Heading" style="margin-left: -2%;">Quantity</span>
        <span class="Heading" style="margin-right: 2%;">Total</span>

        <span class="Action" (click)="removeAllItem()">Remove all</span>
        <div class="dropdown" style="position: absolute;right:60px;">
            <button mat-button style='color:rgb(0, 0, 7);' data-toggle="dropdown" class="btn btn-default dropdown-toggle"
            [matMenuTriggerFor]="cartMenu">
              <mat-icon style='font-size:25px;color:rgb(1, 1, 20);'>person</mat-icon>
            </button>
            <mat-menu #cartMenu="matMenu">    
              <button mat-menu-item (click)="profile()">Profile</button> 
              <!-- <button mat-menu-item (click)="changePassword()">Change Password</button>    -->
              <button mat-menu-item (click)="purchaseHistory()">Purchase Details</button>
              <button mat-menu-item (click)="meterLogout()">Log out</button> 
            </mat-menu>
        </div>
    </div>
    <hr class="divider1">
    <div *ngIf="service.filledCart">
    <div class="row" *ngFor="let a of meterData3; let i = index;" style="padding-bottom: 30px;">
        <div class="col-md-3" style="padding-left: 80px;">
            <img src="{{a.image}}" height="80" width="100" />
        </div>
        <div class="col-md-5">
            <h3><a href="{{a.pdf}}" title="" style="color: black;">{{a.model}}</a></h3>
            <!-- <div class="rate">
                <input type="radio" id="star5" name="rate" value="5" />
                <label for="star5">5 stars</label>
                <input type="radio" id="star4" name="rate" value="4" />
                <label for="star4">4 stars</label>
                <input type="radio" id="star3" name="rate" value="3" />
                <label for="star3">3 stars</label>
                <input type="radio" id="star2" name="rate" value="2" />

                <label for="star2">2 stars</label>
                <input type="radio" id="star1" name="rate" value="1" />
                <label for="star1">1 star</label>
            </div> -->
            <p>{{a.index}}</p>
        </div>
        <div class="col-md-4">
            <div class="product-price">₹{{a.price}}</div>
            <div class="product-quantity">
                <input type="number" min="1" [(ngModel)]="meterData3[i].quantity" (keyup)="quantityChange($event, a,i)" />
            </div>
            <div class="product-removal">
                <button class="remove-product" (click)="removeItem(i,a.index)" title="Delete">
                    Remove
                </button>
            </div> 
            <div class="product-line-price">{{meterData3[i].total}}</div>
        </div>
        
    </div>
    <!-- <div class="row" *ngFor="let a of meterData3; let i = index" style="padding-bottom: 30px;">
        <div class="col-md-3" style="padding-left: 80px;">
            <img src="{{a.image}}" height="80" width="100" />
        </div>
        <div class="col-md-5">
            <h3><a href="{{a.pdf}}" title="" style="color: black;">{{a.model}}</a></h3>
            <div class="rate">
                <input type="radio" id="star5" name="rate" value="5" />
                <label for="star5">5 stars</label>
                <input type="radio" id="star4" name="rate" value="4" />
                <label for="star4">4 stars</label>
                <input type="radio" id="star3" name="rate" value="3" />
                <label for="star3">3 stars</label>
                <input type="radio" id="star2" name="rate" value="2" />

                <label for="star2">2 stars</label>
                <input type="radio" id="star1" name="rate" value="1" />
                <label for="star1">1 star</label>
            </div>
            <p>{{a.index}}</p>
        </div>
        <div class="col-md-4">
            <div class="product-price">₹{{a.price}}</div>
            <div class="product-quantity">
                <input type="number" min="1" [(ngModel)]="meterData2[i].quantity" (keyup)="quantityChange($event, a,i)" />
            </div>
            <div class="product-removal">
                <button class="remove-product" (click)="removeItem(a)" title="Delete">
                    Remove
                </button>
            </div> 
            <div class="product-line-price">{{meterData2[i].total}}</div>
        </div>
    </div> -->

</div>
<div *ngIf="service.emptyCart">
    <img src="assets/img/emptyCart.png" height="250" width="300" style="margin: 0 auto; display: block;"/>
    <h1 style="text-align: center;">Your Buy Meter Cart is empty.</h1>
</div>

    
    <hr>
    <div class="totals" *ngIf="service.filledCart">
        <div class="totals-item">
            <label>Subtotal</label>
            <div class="totals-value" id="cart-subtotal">₹{{subtotal}}</div>
        </div>
        <!-- <div class="totals-item">
            <label>GST (5%)</label>
            <div class="totals-value" id="cart-tax">₹{{gstAmount}}</div>
        </div>
        <div class="totals-item">
            <label>Shipping</label>
            <div class="totals-value" id="cart-shipping">Topay</div>
        </div>
        <div class="totals-item totals-item-total">
            <label>Grand Total</label>
            <div class="totals-value" id="cart-total">₹{{grandtotal}}</div>
        </div> -->
        <button class="checkout" (click)="checkoutConfirm(checkOutConfirm)">Checkout</button>
</div>
<div class="totals" *ngIf="service.emptyCart">
    <div class="totals-item">
        <label style="width: 98%; text-align: right;">Subtotal (0 items):</label>
        <div id="cart-subtotal" style="float: right;">0</div>
    </div>
    <button class="checkout" (click)="backBUtton();">Back</button>
</div>
</div>
</div>
</div>
<!-- <ng-template #checkOutConfirm let-modal style="justify-content: center;">
<div class="model-body">
    <div class="row">
        <div class="col-md-12 justify-content-center text-center">
            <p>Are you sure want Checkout?</p>
            <button type="button" class="btn btn-primary" (click)="checkoutNavigation()"> Yes</button>
            <button type="button" class="btn btn-danger" style="margin-left: 10px;" (click)="onCancel()">No</button>
        </div>
        
    </div>
</div>
</ng-template> -->

<!-- Popup -->


<!-- <h1>Shopping Cart</h1>

<div class="shopping-cart">

  <div class="column-labels">
    <label class="product-image">Image</label>
    <label class="product-details">Product</label>
    <label class="product-price">Price</label>
    <label class="product-quantity">Quantity</label>
    <label class="product-removal">Remove</label>
    <label class="product-line-price">Total</label>
  </div>

  <div class="product" *ngFor="let a of meterData1">
    <div class="product-image">
        <img src="{{a.image}}" height="200" width="150"/>
    </div>
    <div class="product-details">
        <h3><a href="{{a.pdf}}" title="" style="color: black;">{{a.model}}</a></h3>      
        <div class="rate">
            <input type="radio" id="star5" name="rate" value="5" />
            <label for="star5">5 stars</label>
            <input type="radio" id="star4" name="rate" value="4" />
            <label for="star4">4 stars</label>
            <input type="radio" id="star3" name="rate" value="3" />
            <label for="star3">3 stars</label>
            <input type="radio" id="star2" name="rate" value="2" />
    
            <label for="star2">2 stars</label>
            <input type="radio" id="star1" name="rate" value="1" />
            <label for="star1">1 star</label> 
          </div>
      </div>
    <div class="product-price">₹{{a.price}}</div>
    <div class="product-quantity">
      <input type="number" value="2" min="1">
    </div>
    <div class="product-removal">
      <button class="remove-product">
        Remove
      </button>
    </div>
    <div class="product-line-price">25.98</div>
  </div>

  <div class="totals">
    <div class="totals-item">
      <label>Subtotal</label>
      <div class="totals-value" id="cart-subtotal">71.97</div>
    </div>
    <div class="totals-item">
      <label>Tax (5%)</label>
      <div class="totals-value" id="cart-tax">3.60</div>
    </div>
    <div class="totals-item">
      <label>Shipping</label>
      <div class="totals-value" id="cart-shipping">15.00</div>
    </div>
    <div class="totals-item totals-item-total">
      <label>Grand Total</label>
      <div class="totals-value" id="cart-total">90.57</div>
    </div>
  </div>
      
      <button class="checkout">Proceed to Buy</button>

</div> -->


<ng-template #checkOutConfirm let-modal>
    <div class="modal-body">
        <div class="centre-text m-btm30">
        <div style="text-align: center;">
            <span class="successshow">Are you sure want to Checkout? </span>
        </div>
        </div>
        </div>
    <br>
    <div class="row">
        <div class="col-md-12 text-center justify-content-center">
            <button type="button" class="btn btn-primary" (click)="checkoutNavigation()"> Yes</button>
            <button type="button" class="btn btn-danger" style="margin-left: 10px;" (click)="onCancel()">No</button>
        </div>
       
  </div>
</ng-template>