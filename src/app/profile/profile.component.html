<div class="bg-image">
    <div class="card">
        <div class="card-header">
                <div class="brand-logo">
                    <a href="#"><img src="assets/img/Rush_Final_logo.png"></a>
                </div>
                <div class="login-header">
                    <h3 class="login-title">Profile Information</h3>
                    <p class="login-title" style="font-size: 17px;">(Please enter valid details to include in Final Reports)</p>
                </div>
        </div>
        <div class="card-body">
            <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
            
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="name">* Name</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-person-fill"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="name" class="form-control" placeholder="Enter your Name"
                                [ngClass]="{ 'is-invalid': submitted && f.name.errors }" [(ngModel)]="register.name"/>
                                <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
                                    <div *ngIf="f.name.errors?.required">Name is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="email">* User Name: (email ID)</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-envelope-fill"></i>
                                    </span>
                                </div>
                                <input type="email" formControlName="email" class="form-control" placeholder="Enter your email address" maxlength="50" readonly
                                  [(ngModel)]="register.username"/>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                            <label for="contactNumber">* Contact Number</label>
                            
                                <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}" 
                                (countryChange)="countryChange($event)" formControlName="contactNumber" class="form-control"   
                                placeholder="Enter your contact number" readonly
                                [ngClass]="{ 'is-invalid': submitted && f.contactNumber.errors}" />
                                <mat-icon (click) ="openModal(contentViewer)" style="float: right;" title="Change Contact Number">
                                    published_with_changes
                                </mat-icon>
                                <div *ngIf="submitted && f.contactNumber.errors" class="invalid-feedback">
                                    <div *ngIf="f.contactNumber?.errors?.required">Mobile Number Is Required</div>
                                    <!-- <div *ngIf="f.mobileNumber?.errors?.minlength">Enter 10 Digit Number</div> -->
                                    <div *ngIf="f.contactNumber?.errors?.maxlength">Enter 10 Digit Number</div>
                                </div>
                    </div>
                    
                </div>
    
                <div class="row">
    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="userType">* User Type</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-card-heading"></i>
                                    </span>
                                </div>
                                <input
                    type="text"
                    formControlName="userType"
                    class="form-control"
                    readonly
                    [(ngModel)]="register.role"
                  />
                  <!-- <div *ngIf="submitted && f.userType.errors" class="invalid-feedback">
                                        <div *ngIf="f.userType.errors.required">Usertype is required</div>
                                    </div> -->
                  <!-- <select  formControlName="userType" class="form-control"
                                    [ngClass]="{ 'is-invalid': submitted && f.userType.errors }"   [(ngModel)]="register.role">
                                        <option value="" disabled>Select Type</option>
                                        <option value="Viewer" selected>Viewer</option>
                                        <option value="Inspector" disabled>Inspector</option>
                                    </select> -->
                  <!-- <div *ngIf="submitted && f.userType.errors" class="invalid-feedback">
                                        <div *ngIf="f.userType.errors.required">Please select user type</div>
                                    </div> -->
                  <div
                    *ngIf="f.userType.value == 'Viewer'"
                    class="invalid-feedback"
                    style="color: #919994; font-weight: 500"
                  >
                                    <div>*As a viewer you can view, comment, download or print the report</div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="companyName">* Company Name</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-building"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="companyName" class="form-control" placeholder="Enter your company name" 
                                 readonly [(ngModel)]="register.companyName"/>
                                <!-- <div *ngIf="submitted && f.companyName.errors" class="invalid-feedback">
                                    <div *ngIf="f.companyName.errors?.required">Company name is required</div>
                                </div> -->
                            </div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="department">* Department Based on the Company</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-card-heading"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="department" class="form-control" placeholder="Enter your department" 
                                 readonly [(ngModel)]="register.department"/>
                                <!-- <div *ngIf="submitted && f.department.errors" class="invalid-feedback">
                                    <div *ngIf="f.department.errors.required">Department is required</div>
                                </div> -->
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="row">
    
            <div class="col-md-4">
                        <div class="form-group">
                            <label for="designation">* Designation</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-person-lines-fill"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="designation" class="form-control" placeholder="Enter your designation" 
                                  readonly [(ngModel)]="register.designation"/>
                                <!-- <div *ngIf="submitted && f.designation.errors" class="invalid-feedback">
                                    <div *ngIf="f.designation.errors.required">Designation is required</div>
                                </div> -->
                            </div>
                        </div>
                    </div>
    
            <div class="col-md-4">
                        <div class="form-group">
                            <label for="country">* Country</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-geo-alt-fill"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="country" readonly class="form-control" placeholder="Enter your Country"
                                 [(ngModel)]="register.country"/>
                                <!-- <select  formControlName="country" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.country.errors }" [(ngModel)]="register.country" (change)=selectCountry($event)>
                                    <option value="" selected>Select country</option>
                                    <option value="IND" selected>India</option>
    
                                    <option *ngFor="let a of countryList">{{a}}</option>
                                </select> -->
                                <div *ngIf="submitted && f.country.errors" class="invalid-feedback">
                                    <div *ngIf="f.country.errors.required">Please select country</div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="state">* State</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-geo-alt-fill"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="state" readonly class="form-control" placeholder="Enter your State"
                                 [(ngModel)]="register.state"/>

                                <!-- <select  formControlName="state" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && f.state.errors }" [(ngModel)]="register.state" >
                                    <option value="" selected>Select state</option>
                                    <option *ngFor="let a of stateList" [selected]="a.name=== register.state">{{a.name}}</option>
                                </select> -->
                                <div *ngIf="submitted && f.state.errors" class="invalid-feedback">
                                    <div *ngIf="f.state.errors.required">Please select state</div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                 </div>
    
                <div class="row">
            
            <div class="col-md-4">
                        <div class="form-group">
                            <label for="district"> District</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-geo-alt-fill"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="district" class="form-control" placeholder="Enter your District"
                                 [(ngModel)]="register.district"/>
                            </div>
                        </div>
                    </div>
    
            <div class="col-md-4">
                        <div class="form-group">
                            <label for="address">* Address</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-geo-alt-fill"></i>
                                    </span>
                                </div>
                                <input type="text" formControlName="address" class="form-control" placeholder="Enter your address" 
                                [ngClass]="{ 'is-invalid': submitted && f.address.errors}" [(ngModel)]="register.address"/>
                                <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
                                    <div *ngIf="f.address.errors.required">Address is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-md-4" *ngIf= "register.role === 'Inspector'">
                        <div class="form-group">
                            <!-- <label for="applicationType">* Application Type</label> -->
                            <!-- <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-card-list"></i>
                                    </span>
                                </div>
                                <ng-multiselect-dropdown
                                    [placeholder]="'Select Application Type'"
                                    [settings]="dropdownSettings"
                                    [data]="dropdownList"
                                    [(ngModel)]="selected"
                                    [disabled]="disableValue"                                
                                    formControlName="applicationType"
                                    dropdownPosition="auto">
                                </ng-multiselect-dropdown> -->
                                <!-- <input type="text" formControlName="applicationType" class="form-control" placeholder="Enter your application type" 
                                [ngClass]="{ 'is-invalid': submitted && f.applicationType.errors}" />
                                <div *ngIf="submitted && f.applicationType.errors" class="invalid-feedback">
                                    <div *ngIf="f.applicationType.errors.required">Application type is required</div>
                                </div> -->
                            <!-- </div> -->

                                <mat-label class="client-description"><h3>Application Type</h3></mat-label>
                                <textarea matInput class="client-box-description" readonly formControlName="applicationType"
                                maxlength="500" placeholder="Ex. Report description..." [(ngModel)]="register.applicationType" style="margin-top: -15px;
                                width: 100%;
                                height: 56px;
                                background-color: #e9ecef;"></textarea>
                        </div>
                    </div>
    
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="pinCode">* Pincode</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-geo-fill"></i>
                                    </span>
                                </div>
                                <input type="number" formControlName="pinCode" class="form-control" placeholder="Enter your pinCode" 
                                [ngClass]="{ 'is-invalid': submitted && f.pinCode.errors}" [(ngModel)]="register.pinCode"/>
                                <div *ngIf="submitted && f.pinCode.errors" class="invalid-feedback">
                                    <div *ngIf="f.pinCode.errors.required">Pincode is required</div>
                                </div>
                            </div>
                        </div>
                    </div>  
                
                </div>

            <!-- <div class="form-check">
                <input type="checkbox"  formControlName="terms"  [(ngModel)]="isChecked"/>
                I agree to the <a href="#">Terms and Conditions</a> for using online services of Rush Applications
            </div> -->
            <div *ngIf="successMsgOTP" class="alert alert-success" style="margin: 55px auto 0px auto;width: 65%;">{{successMsg}}</div>
            <div *ngIf="errorMsgflag" class="alert alert-danger" style="margin: 55px auto 0px auto;width: 30%;">{{errorMsg}}</div>

            <div style="display: inline;">
                <button [disabled]="loading" [ngStyle]="{'cursor': loading ? 'not-allowed' : 'pointer'}" 
                style="float: left; margin-left: 35%;" type="submit" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn" id="login-btn"><i class="bi bi-person-plus-fill icon"></i> Update</button>
            </div>

            </form>
            <button style="float:right; margin-right: 35%;" class="btn btn-danger cancel" (click)="profileCancel()">
                <i class="bi bi-x icon"></i> Cancel</button>
        </div>

        <ng-template #contentViewer let-modal>
            <div class="modal-header" style="text-align: center; display: block">
              <h2 class="modal-title" style="display: contents">Generate Otp</h2>
            </div>
            <div class="modal-body" modal-md>
              <div class="card">
                <div class="card-body">
                    <form [formGroup]="generateContactNumberOtpForm" (ngSubmit)="onContactSubmit(contentViewer1)">
                        <div *ngIf="mobileShowErrorMessage" class="errorshow">{{mobileErrorMsg}}</div>
                        <div *ngIf="mobileSuccessMsgOTP" class="alert alert-success">{{mobileSuccessMsg}}</div>

                        <div class="col-sm-12">
                            <label for="mobileNumber">Mobile Number: </label>
                                <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}" (countryChange)="countryChange($event)" formControlName="mobileNumber" class="form-control"   placeholder="Enter Number" [ngClass]="{ 'is-invalid': mobileSubmitted && g.mobileNumber?.errors }">
                                <div *ngIf="mobileSubmitted && g.mobileNumber?.errors" class="invalid-feedback">
                                    <div *ngIf="g.mobileNumber?.errors?.required">Mobile Number Is Required</div>
                                    <!-- <div *ngIf="f.mobileNumber?.errors?.minlength">Enter 10 Digit Number</div> -->
                                    <div *ngIf="g.mobileNumber?.errors?.maxlength">Enter 10 Digit Number</div>
                                </div>                                        
                        </div>

                        <!-- <button [disabled]="mobileLoading" style="width: 64%; margin-left: 67px;"
                            class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"><i
                                class="bi bi-box-arrow-in-right"></i> Generate
                        </button> -->

                        <div style="display: block;">
                            <button style="float: left;width: 40%;" [disabled]="mobileLoading" type="submit" 
                            class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn" ><i class="bi bi-box-arrow-in-right"></i> Generate</button>
                            <button style="float:right;width: 40%;"  class="btn btn-danger cancel" (click)="cancel(contentViewer)" ><i class="bi bi-x icon"></i> Cancel</button>
                        </div>
                    </form>
                </div>
              </div>
            </div>
        </ng-template>

        <ng-template #contentViewer1 let-modal>
            <div class="modal-header" style="text-align: center; display: block">
              <h2 class="modal-title" style="display: contents">Create Mobile Number</h2>
            </div>
            <div class="modal-body" modal-md>
              <div class="card">
                <div class="card-body">
                    <form [formGroup]="changeContactNumberForm" (ngSubmit)="onOtpSubmit()">
                        <div *ngIf="showErrorMessage" class="errorshow">Please enter a valid OTP</div>
                            <div *ngIf="showOTPMessage" class="alert alert-success">OTP has been sent to your resgistered mobile number. </div>
                        <div class="form-group">
                            <label for="email">User Name: (email ID)</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-envelope-fill"></i>
                                    </span>
                                </div>
                                <input type="email" formControlName="emailId" readonly class="form-control"
                                    placeholder="Enter your email address" maxlength="50"  value="{{email}}"
                                    [ngClass]="{ 'is-invalid': otpSubmitted && h.emailId.errors }"/>
                                <div *ngIf="otpSubmitted && h.emailId.errors" class="invalid-feedback">
                                    <div *ngIf="h.emailId.errors.required">Email is required</div>
                                    <div *ngIf="h.emailId.errors.pattern">Enter valid email</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="mobileNumber">Mobile Number: </label>
                                <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"  formControlName="mobileNumber" class="form-control"  readonly placeholder="Enter Number" [ngClass]="{ 'is-invalid': otpSubmitted && h.mobileNumber?.errors }">
                                <div *ngIf="otpSubmitted && h.mobileNumber?.errors" class="invalid-feedback">
                                    <div *ngIf="h.mobileNumber?.errors?.required">Mobile Number Is Required</div>
                                    <!-- <div *ngIf="f.mobileNumber?.errors?.minlength">Enter 10 Digit Number</div> -->
                                    <div *ngIf="h.mobileNumber?.errors?.maxlength">Enter 10 Digit Number</div>
                                </div>

                            <!-- <label for="password">New Password</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-lock-fill"></i>
                                    </span>
                                </div>
                                <input type="password" formControlName="password" class="form-control"
                                    placeholder="Enter your password" minlength="8" maxlength="15"
                                    [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
                                    [(ngModel)]="updatePassInspector.password" />
                                <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                                    <div *ngIf="f.password.errors.required">Password is required</div>
                                    <div *ngIf="f.password.errors.minlength">Password must be at least 8 characters
                                    </div>
                                </div>
                            </div> -->
                        </div>
                        <!-- <div class="form-group">
                            <label for="Confirm password">Confirm New Password</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-lock-fill"></i>
                                    </span>
                                </div>
                                <input type="password" formControlName="confirmpassword" class="form-control" placeholder="Enter your password again"
                                 pattern="{{ updatePassInspector.password }}"
                                    placeholder="Enter your password" minlength="8" maxlength="15"
                                    [ngClass]="{ 'is-invalid': submitted && f.confirmpassword.errors }"/>
                                  <div *ngIf="submitted && f.confirmpassword.errors" class="invalid-feedback">
                                    <div *ngIf="f.confirmpassword.errors.required">Confirm Password is required</div>
                                    <div *ngIf="f.confirmpassword.errors.pattern">Password and Confirm password must be same</div>
                                </div>
                            </div>
                        </div> -->
                        <div class="form-group">
                            <p class="a-o-i">Enter verification code(OTP):</p>
                                <a (click)="resendOTP()" style="text-decoration: underline;float: right; cursor: pointer;
                                margin-top: -30px;color: #007bff;">Resend OTP Link</a>
                          </div>
                        <div class="row">
                          <div class="form-group col-sm-2" *ngFor="let input of formInput;  index as i">
                            <input #formRow type="password" formControlName="{{input}}" class="form-control" 
                            maxlength="1" (keyup)="keyUpEvent($event, i)" name="password" style="-webkit-text-security: square;">
                          </div>
                          <div *ngIf="showOTPValidation" class="errorshow">Please enter verification code (OTP)</div>
                          <div *ngIf="OTPerrorMsgflag" class="errorshow">{{OTPerrorMsg}}</div>
                          <span *ngIf="SubmitSuccessMsg" class="alert alert-success">Mobile number added successfully</span>

                        </div>
                        <div style="display: block;">
                            <button style="float: left;width: 40%;" type="submit" 
                            class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn" id="login-btn1"><i class="bi bi-person-plus-fill icon"></i> Submit</button>
                            <button style="float:right;width: 40%;"  class="btn btn-danger cancel" (click)="cancelOTP()" ><i class="bi bi-x icon"></i> Cancel</button>
                        </div>
                    </form>
                </div>
              </div>
            </div>
        </ng-template>
    </div>
    
    <!-- <div class="row">
        <div class="col-md-12 ">
            <div class="col-md-12">
                <div class="card col-md-5">
                    
                    <div class="card-body">
                          <p class="errorshow" *ngIf="msg">{{msg}}</p>
                            <span class="invalid-feedback"></span>
                    </div>

                </div>
                <div class="col-md-7" style="text-align: center;
                float: right;
                margin-top: 10px;">
<h2>Digital Support For Testing Inspection And Certification Of Electrical Installation</h2>
<h1 style="font-weight: 600;">INTERACTIVE - INTELLIGENT - MODERN</h1>

                </div>

            </div>
        </div>
    </div> -->
</div>

