<!-- <div *ngIf="validationErrorTab" style="text-align: center;">
    <span class="alert alert-danger">{{validationErrorMsgTab}}</span>
  </div> -->
  <div class="card">
    <div class="card-body">
  <form [formGroup]="summaryForm" (ngSubmit)="onSubmit(flag)">
    <div formArrayName="summaryLpsBuildings" *ngFor="let q of summaryLpsBuildingsControl(); let j = index">
      <div class="form-group" [formGroupName]="j">
    <div class="search-bar">
      <div class="form-group">
          <div class="row">
              <div class="col-md-6">
                  <label for="buildingNumber">Building Number</label>
                  <div class="input-group">
                      <div class="input-group-prepend">
                          <span class="input-group-text">
                              <i class="bi bi-align-start"></i>
                          </span>
                      </div>
                      <input type="number" class="form-control" placeholder="Enter Building Number" readonly
                      formControlName="buildingNumber"
                      />
                  </div>
              </div>

              <div class="col-md-6">
                  <label for="buildingName">Building Name</label>
                  <div class="input-group">
                      <div class="input-group-prepend">
                          <span class="input-group-text">
                              <i class="bi bi-align-start"></i>
                          </span>
                      </div>
                      <input type="text" class="form-control"  placeholder="Enter Building Name" formControlName="buildingName"
                      readonly/>
                  </div>
              </div>
              <!-- *ngIf="overAllControl().length > 1" <mat-icon class="mousechange" class="dlt" type="button" title="Delete" style="position: relative; top: 30px; left: 27%;">remove_circle_outline</mat-icon> -->
          </div>
      </div>
  </div>
          <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <h3>Summary and Recommendations </h3>
                </mat-panel-title>
              </mat-expansion-panel-header>
                <div class="row">
                <div class="col-sm-12 ReferringTT">
                  <div class="form-group">
                    <label>The following observations are made :</label>
                  </div>
                </div>
           </div>
                <div class="tableObserve">
                <div class="form-group">
                <!-- Observation starts here -->
                <label>
                  <h3><b>Air termination :</b></h3>
                </label>
                <br>
                <!-- <label><h3 style="cursor: pointer;"><b><u>Basic details Observations :</u></b></h3></label>                     -->
                    <div class="table-responsive" id="style-1" style="border: 1px solid black">
                        <table class="table">
                          <thead>
                            <tr>
                              <th></th>
                              <th>Sl.No</th>
                              <th>Observations</th>
                              <th>Recommendation</th>
                            </tr>
                          </thead>
                          <tbody formArrayName="airTermination" *ngFor="let a of airTerminationControl(q); let i= index">
                              <tr [formGroupName]="i">
                              <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                              <td>{{a.get("serialNo")?.value}}</td>
                              <td>
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                              </td>
                              <td> 
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                placeholder="Ex. Recommendations..."></textarea> 
                              </td>
                              </tr>
                          </tbody>

                          <tbody formArrayName="airVertical" *ngFor="let a of airVerticalControl(q); let i= index">
                            <tr [formGroupName]="i">
                            <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                            <td>{{a.get("serialNo")?.value}}</td>
                            <td>
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                              placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                            </td>
                            <td> 
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                              placeholder="Ex. Observations..."></textarea> 
                            </td>
                            </tr>
                        </tbody>
                        
                        <tbody formArrayName="airVerticalList" *ngFor="let a of airVerticalListControl(q); let i= index">
                          <tr [formGroupName]="i">
                          <td nowrap="nowrap" style="padding-left: 60px;">{{a.get("heading")?.value}}</td>
                          <td>{{a.get("serialNo")?.value}}</td>
                          <td>
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                            placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                          </td>
                          <td> 
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                            placeholder="Ex. Observations..."></textarea> 
                          </td>
                          </tr>
                      </tbody>
                
                        <tbody formArrayName="airMesh" *ngFor="let a of airMeshControl(q); let i= index">
                          <tr [formGroupName]="i">
                          <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                          <td>{{a.get("serialNo")?.value}}</td>
                          <td>
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                            placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                          </td>
                          <td> 
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                            placeholder="Ex. Observations..."></textarea> 
                          </td>
                          </tr>
                      </tbody>

                      <tbody formArrayName="airHolder" *ngFor="let a of airHolderControl(q); let i= index">
                        <tr [formGroupName]="i">
                        <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                        <td>{{a.get("serialNo")?.value}}</td>
                        <td>
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                          placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                        </td>
                        <td> 
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                          placeholder="Ex. Observations..."></textarea> 
                        </td>
                        </tr>
                    </tbody>

                    <tbody formArrayName="airHolderList" *ngFor="let a of airHolderListControl(q); let i= index">
                      <tr [formGroupName]="i">
                      <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                      <td>{{a.get("serialNo")?.value}}</td>
                      <td>
                        <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                        placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                      </td>
                      <td> 
                        <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                        placeholder="Ex. Observations..."></textarea> 
                      </td>
                      </tr>
                  </tbody>

                        <tbody formArrayName="airClamps" *ngFor="let a of airClampsControl(q); let i= index">
                          <tr [formGroupName]="i">
                          <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                          <td>{{a.get("serialNo")?.value}}</td>
                          <td>
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                            placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                          </td>
                          <td> 
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                            placeholder="Ex. Observations..."></textarea> 
                          </td>
                          </tr>
                      </tbody>
                      <tbody formArrayName="airExpansion" *ngFor="let a of airExpansionControl(q); let i= index">
                        <tr [formGroupName]="i">
                        <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                        <td>{{a.get("serialNo")?.value}}</td>
                        <td>
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                          placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                        </td>
                        <td> 
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                          placeholder="Ex. Observations..."></textarea> 
                        </td>
                        </tr>
                    </tbody>
                      <tbody formArrayName="airConnectors" *ngFor="let a of airConnectorsControl(q); let i= index">
                        <tr [formGroupName]="i">
                        <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                        <td>{{a.get("serialNo")?.value}}</td>
                        <td>
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                          placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                        </td>
                        <td> 
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                          placeholder="Ex. Observations..."></textarea> 
                        </td>
                        </tr>
                    </tbody>
                        </table>
                      </div>
                      <!-- <div class="row" *ngIf="noObserveSupply">
                        <div class="col-sm-12">
                          <h3 style="color: #eea80a;">Currently, you have not provided Observations for Supply Characteristics!</h3>
                        </div>
                      </div> -->
                 <br>
                  </div>
                </div>

                <div class="tableObserve">
                  <div class="form-group">
                  <!-- Observation starts here -->
                  <label>
                    <h3><b>Down Conductors :</b></h3>
                  </label>
                  <br>
                  <!-- <label><h3 style="cursor: pointer;"><b><u>Basic details Observations :</u></b></h3></label>                     -->
                      <div class="table-responsive" id="style-1" style="border: 1px solid black">
                          <table class="table">
                            <thead>
                              <tr>
                                <th></th>
                                <th>Sl.No</th>
                                <th>Observations</th>
                                <th>Recommendation</th>
                              </tr>
                            </thead>
                            <tbody formArrayName="downConductorReport" *ngFor="let a of downConductorBasicControl(q); let i= index">
                                <tr [formGroupName]="i">
                                <td nowrap="nowrap" style="font-weight: bold;">{{a.get("basicDetailsHeading")?.value}}</td>
                                <td>{{a.get("serialNo")?.value}}</td>
                                <td>
                                  <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                  placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                </td>
                                <td> 
                                  <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                  placeholder="Ex. Recommendations..."></textarea> 
                                </td>
                                </tr>
                            </tbody>
  
                            <tbody formArrayName="downConductor" *ngFor="let a of downConductorControl(q); let i= index">
                              <tr [formGroupName]="i">
                              <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                              <td>{{a.get("serialNo")?.value}}</td>
                              <td>
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                              </td>
                              <td> 
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                placeholder="Ex. Observations..."></textarea> 
                              </td>
                              </tr>
                          </tbody>
                          
                          <tbody formArrayName="bridgingDesc" *ngFor="let a of bridgingDescControl(q); let i= index">
                            <tr [formGroupName]="i">
                            <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                            <td>{{a.get("serialNo")?.value}}</td>
                            <td>
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                              placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                            </td>
                            <td> 
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                              placeholder="Ex. Observations..."></textarea> 
                            </td>
                            </tr>
                        </tbody>
                  
                          <tbody formArrayName="downHolders" *ngFor="let a of downHoldersControl(q); let i= index">
                            <tr [formGroupName]="i">
                            <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                            <td>{{a.get("serialNo")?.value}}</td>
                            <td>
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                              placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                            </td>
                            <td> 
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                              placeholder="Ex. Observations..."></textarea> 
                            </td>
                            </tr>
                        </tbody>
  
                        <tbody formArrayName="downConnectors" *ngFor="let a of downConnectorsControl(q); let i= index">
                          <tr [formGroupName]="i">
                          <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                          <td>{{a.get("serialNo")?.value}}</td>
                          <td>
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                            placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                          </td>
                          <td> 
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                            placeholder="Ex. Observations..."></textarea> 
                          </td>
                          </tr>
                      </tbody>
  
                      <tbody formArrayName="testingJoint" *ngFor="let a of testingJointsControl(q); let i= index">
                        <tr [formGroupName]="i">
                        <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                        <td>{{a.get("serialNo")?.value}}</td>
                        <td>
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                          placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                        </td>
                        <td> 
                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                          placeholder="Ex. Observations..."></textarea> 
                        </td>
                        </tr>
                    </tbody>
  
                          <tbody formArrayName="lightingCounter" *ngFor="let a of lightningCountersControl(q); let i= index">
                            <tr [formGroupName]="i">
                            <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                            <td>{{a.get("serialNo")?.value}}</td>
                            <td>
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                              placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                            </td>
                            <td> 
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                              placeholder="Ex. Observations..."></textarea> 
                            </td>
                            </tr>
                        </tbody>
                        <tbody formArrayName="downConductorTesting" *ngFor="let a of downConductorTestingControl(q); let i= index">
                          <tr [formGroupName]="i">
                          <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                          <td>{{a.get("serialNo")?.value}}</td>
                          <td>
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                            placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                          </td>
                          <td> 
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                            placeholder="Ex. Observations..."></textarea> 
                          </td>
                          </tr>
                      </tbody>
                    
                          </table>
                        </div>
                        <!-- <div class="row" *ngIf="noObserveSupply">
                          <div class="col-sm-12">
                            <h3 style="color: #eea80a;">Currently, you have not provided Observations for Supply Characteristics!</h3>
                          </div>
                        </div> -->
                   
                   <br>
                    </div>
                  </div>

                  <div class="tableObserve">
                    <div class="form-group">
                    <!-- Observation starts here -->
                    <label>
                      <h3><b>Earthing :</b></h3>
                    </label>
                    <br>
                    <!-- <label><h3 style="cursor: pointer;"><b><u>Basic details Observations :</u></b></h3></label>                     -->
                        <div class="table-responsive" id="style-1" style="border: 1px solid black">
                            <table class="table">
                              <thead>
                                <tr>
                                  <th></th>
                                  <th>Sl.No</th>
                                  <th>Observations</th>
                                  <th>Recommendation</th> 
                                </tr>
                              </thead>
                              <tbody formArrayName="earthingReport" *ngFor="let a of earthingReportControl(q); let i= index">
                                  <tr [formGroupName]="i">
                                  <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                  <td>{{a.get("serialNo")?.value}}</td>
                                  <td>
                                    <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                    placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                  </td>
                                  <td> 
                                    <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                    placeholder="Ex. Recommendations..."></textarea> 
                                  </td>
                                  </tr>
                              </tbody>
    
                              <tbody formArrayName="earthingDescription" *ngFor="let a of earthingDescriptionControl(q); let i= index">
                                <tr [formGroupName]="i">
                                <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                <td>{{a.get("serialNo")?.value}}</td>
                                <td>
                                  <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                  placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                </td>
                                <td> 
                                  <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                  placeholder="Ex. Observations..."></textarea> 
                                </td>
                                </tr>
                            </tbody>
                            
                            <tbody formArrayName="earthingDescriptionList" *ngFor="let a of earthingDescriptionListControl(q); let i= index">
                              <tr [formGroupName]="i">
                              <td nowrap="nowrap" style="padding-left: 60px;">{{a.get("heading")?.value}}</td>
                              <td>{{a.get("serialNo")?.value}}</td>
                              <td>
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                              </td>
                              <td> 
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                placeholder="Ex. Observations..."></textarea> 
                              </td>
                              </tr>
                          </tbody>

                            <tbody formArrayName="earthingClamps" *ngFor="let a of earthingClampsControl(q); let i= index">
                              <tr [formGroupName]="i">
                              <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                              <td>{{a.get("serialNo")?.value}}</td>
                              <td>
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                              </td>
                              <td> 
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                placeholder="Ex. Observations..."></textarea> 
                              </td>
                              </tr>
                          </tbody>
                    
                            <tbody formArrayName="earthingElectrodeChamber" *ngFor="let a of earthingElectrodeChamberControl(q); let i= index">
                              <tr [formGroupName]="i">
                              <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                              <td>{{a.get("serialNo")?.value}}</td>
                              <td>
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                              </td>
                              <td> 
                                <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                placeholder="Ex. Observations..."></textarea> 
                              </td>
                              </tr>
                          </tbody>
    
                          <tbody formArrayName="earthingSystem" *ngFor="let a of earthingSystemControl(q); let i= index">
                            <tr [formGroupName]="i">
                            <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                            <td>{{a.get("serialNo")?.value}}</td>
                            <td>
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                              placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                            </td>
                            <td> 
                              <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                              placeholder="Ex. Observations..."></textarea> 
                            </td>
                            </tr>
                        </tbody>
    
                        <tbody formArrayName="earthElectrodeTesting" *ngFor="let a of earthElectrodeTestingControl(q); let i= index">
                          <tr [formGroupName]="i">
                          <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                          <td>{{a.get("serialNo")?.value}}</td>
                          <td>
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                            placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                          </td>
                          <td> 
                            <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                            placeholder="Ex. Observations..."></textarea> 
                          </td>
                          </tr>
                      </tbody>
                            </table>
                          </div>
                          <!-- <div class="row" *ngIf="noObserveSupply">
                            <div class="col-sm-12">
                              <h3 style="color: #eea80a;">Currently, you have not provided Observations for Supply Characteristics!</h3>
                            </div>
                          </div> -->
                     
                     <br>
                      </div>
                    </div>

                    <div class="tableObserve">
                      <div class="form-group">
                      <!-- Observation starts here -->
                      <label>
                        <h3><b>SPD :</b></h3>
                      </label>
                      <br>
                      <!-- <label><h3 style="cursor: pointer;"><b><u>Basic details Observations :</u></b></h3></label>                     -->
                          <div class="table-responsive" id="style-1" style="border: 1px solid black">
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th></th>
                                    <th>Sl.No</th>
                                    <th>Observations</th>
                                    <th>Recommendation</th> 
                                  </tr>
                                </thead>
                                <tbody formArrayName="spdReport" *ngFor="let a of spdReportControl(q); let i= index">
                                    <tr [formGroupName]="i">
                                    <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                    <td>{{a.get("serialNo")?.value}}</td>
                                    <td>
                                      <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                      placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                    </td>
                                    <td> 
                                      <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                      placeholder="Ex. Recommendations..."></textarea> 
                                    </td>
                                    </tr>
                                </tbody>
      
                                <tbody formArrayName="spdReportList" *ngFor="let a of spdReportListControl(q); let i= index">
                                  <tr [formGroupName]="i">
                                  <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                  <td>{{a.get("serialNo")?.value}}</td>
                                  <td>
                                    <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                    placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                  </td>
                                  <td> 
                                    <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                    placeholder="Ex. Observations..."></textarea> 
                                  </td>
                                  </tr>
                              </tbody>
                              </table>
                            </div>
                            <!-- <div class="row" *ngIf="noObserveSupply">
                              <div class="col-sm-12">
                                <h3 style="color: #eea80a;">Currently, you have not provided Observations for Supply Characteristics!</h3>
                              </div>
                            </div> -->
                       
                       <br>
                        </div>
                      </div>

                      <div class="tableObserve">
                        <div class="form-group">
                        <!-- Observation starts here -->
                        <label>
                          <h3><b>Separation distance :</b></h3>
                        </label>
                        <br>
                        <!-- <label><h3 style="cursor: pointer;"><b><u>Basic details Observations :</u></b></h3></label>                     -->
                            <div class="table-responsive" id="style-1" style="border: 1px solid black">
                                <table class="table">
                                  <thead>
                                    <tr>
                                      <th></th>
                                      <th>Sl.No</th>
                                      <th>Observations</th>
                                      <th>Recommendation</th> 
                                    </tr>
                                  </thead>
                                  <tbody formArrayName="separationDistance" *ngFor="let a of separationDistanceControl(q); let i= index">
                                      <tr [formGroupName]="i">
                                      <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                      <td>{{a.get("serialNo")?.value}}</td>
                                      <td>
                                        <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                        placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                      </td>
                                      <td> 
                                        <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                        placeholder="Ex. Recommendations..."></textarea> 
                                      </td>
                                      </tr>
                                  </tbody>
                                  <tbody formArrayName="separateDistance" *ngFor="let a of separateDistanceControl(q); let i= index">
                                    <tr [formGroupName]="i">
                                    <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                    <td>{{a.get("serialNo")?.value}}</td>
                                    <td>
                                      <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                      placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                    </td>
                                    <td> 
                                      <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                      placeholder="Ex. Recommendations..."></textarea> 
                                    </td>
                                    </tr>
                                </tbody>
                                <tbody formArrayName="separationDistanceDown" *ngFor="let a of separationDistanceDownControl(q); let i= index">
                                  <tr [formGroupName]="i">
                                  <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                  <td>{{a.get("serialNo")?.value}}</td>
                                  <td>
                                    <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                    placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                  </td>
                                  <td> 
                                    <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                    placeholder="Ex. Recommendations..."></textarea> 
                                  </td>
                                  </tr>
                              </tbody>
                                </table>
                              </div>
                              <!-- <div class="row" *ngIf="noObserveSupply">
                                <div class="col-sm-12">
                                  <h3 style="color: #eea80a;">Currently, you have not provided Observations for Supply Characteristics!</h3>
                                </div>
                              </div> -->
                         
                         <br>
                          </div>
                        </div>

                        <div class="tableObserve">
                          <div class="form-group">
                          <!-- Observation starts here -->
                          <label>
                            <h3><b>Equipotential bonding :</b></h3>
                          </label>
                          <br>
                          <!-- <label><h3 style="cursor: pointer;"><b><u>Basic details Observations :</u></b></h3></label>                     -->
                              <div class="table-responsive" id="style-1" style="border: 1px solid black">
                                  <table class="table">
                                    <thead>
                                      <tr>
                                        <th></th>
                                        <th>Sl.No</th>
                                        <th>Observations</th>
                                        <th>Recommendation</th> 
                                      </tr>
                                    </thead>
                                    <tbody formArrayName="earthStudDesc" *ngFor="let a of earthStudDescControl(q); let i= index">
                                        <tr [formGroupName]="i">
                                        <td nowrap="nowrap" style="font-weight: bold;">{{a.get("heading")?.value}}</td>
                                        <td>{{a.get("serialNo")?.value}}</td>
                                        <td>
                                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="observation"
                                          placeholder="Ex. Observations..." readonly style="background-color: #e9ecef;"></textarea> 
                                        </td>
                                        <td> 
                                          <textarea type="text" class="form-control" cols="30" rows="1" formControlName="recommendation"
                                          placeholder="Ex. Recommendations..."></textarea> 
                                        </td>
                                        </tr>
                                    </tbody>
                                  
                                  </table>
                                </div>
                                <!-- <div class="row" *ngIf="noObserveSupply">
                                  <div class="col-sm-12">
                                    <h3 style="color: #eea80a;">Currently, you have not provided Observations for Supply Characteristics!</h3>
                                  </div>
                                </div> -->
                           
                           <br>
                            </div>
                          </div>
            </mat-expansion-panel>
        </mat-accordion>
       
        <!-- <div *ngIf="validationError" style="text-align: center;margin-top: 30px;">
          <span class="alert alert-danger">{{validationErrorMsg}}</span>
      </div>
      <div *ngIf="commentSuccess" style="text-align: center;margin-top: 30px;">
        <span class="successshow">Your comment has been sent to Inspector</span>
      </div>
      <div *ngIf="commentApprove" style="text-align: center;margin-top: 30px;">
        <span class="alert alert-success">Your response to comments has been approved</span>
      </div>
      <div *ngIf="commentReject" style="text-align: center;margin-top: 30px;">
        <span class="alert alert-danger">Your response to comments has been rejected</span>
      </div> -->
    </div>
  </div>

  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Recommendation</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
          <div class="form-group">
            <div class="row">
              <div class="col-sm-12">
                    <div>Subject to necessary remedial action being taken, I/We recommended that the LPS is further inspected and tested by :
                      <div style="display: inline-grid;">
                      <input type="date" class="form-control" placeholder="Enter Date"
                      formControlName="declarationDate" [(ngModel)]="lpsSummary.summaryDate"
                      [ngClass]="{ 'is-invalid': submitted && f.declarationDate?.errors }">
                      <div *ngIf="submitted && f.declarationDate?.errors" class="invalid-feedback">
                        <div *ngIf="f.declarationDate?.errors?.required">Field Is Required</div>
                    </div>  
                    </div> 
                  </div>
              </div>
            </div>
              <div class="row">
                <div class="col-sm-12">
                  <label>We also recommend that, ligthning protection system to be periodical inspected for every</label>
                  <input type="number" min="0" [ngClass]="{ 'is-invalid': submitted && f.recommendYears.errors }" 
                  style="
                  width: 75px;
                  background: transparent;
                  border: none;
                  border-bottom: 1px solid #000000;"
                [(ngModel)]="lpsSummary.inspectedYear" formControlName="recommendYears" placeholder="Enter year">years.
                <div *ngIf="submitted && f.recommendYears.errors" class="invalid-feedback">
                  <div *ngIf="f.recommendYears?.errors?.required">Field Is Required</div>
              </div>
                </div>
          </div>
          </div>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Declaration</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
        <div formArrayName="Declaration1Arr" *ngFor="let a of getDeclaration1Controls(); let i = index">
          <div class="form-group" [formGroupName]="i">
            <label>I/we being the person responsible for the inspection  of the lightning protection system 
              (as indicated by my/our signatures below), particulars of which are described in this report, having 
              exercised reasonable skill and care when carrying out the inspection, hereby declare that information in 
              this report including the observations provides an accurate assessment of condition of lightning protection 
              system taking into account :
            </label>
            <h2>Inspected and tested by:</h2>
            <div class="form-group">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Name:</label>
                  <input type="text" class="form-control" formControlName="name"
                  [ngClass]="{ 'is-invalid': submitted && a.get('name')?.errors }">
                  <div *ngIf="submitted && a.get('name')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('name')?.errors?.required">Person name is required</div>
                </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Signature:</label>
                  <input type="text" class="form-control" formControlName="signature" readonly
                  [ngClass]="{ 'is-invalid': submitted && a.get('signature')?.errors }">
                  <div *ngIf="submitted && a.get('signature')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('signature')?.errors?.required">Signature is required</div>
                </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Company:</label>
                  <input type="text" class="form-control" formControlName="company"
                  [ngClass]="{ 'is-invalid': submitted && a.get('company')?.errors }">
                  <div *ngIf="submitted && a.get('company')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('company')?.errors?.required">Company name is required</div>
                </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label>Position:</label>
                  <input type="text" class="form-control" formControlName="position"
                  [ngClass]="{ 'is-invalid': submitted && a.get('position')?.errors }">
                  <div *ngIf="submitted && a.get('position')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('position')?.errors?.required">Position is required</div>
                </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label>Address:</label>
                  <input type="text" class="form-control" formControlName="address"
                  [ngClass]="{ 'is-invalid': submitted && a.get('address')?.errors }">
                  <div *ngIf="submitted && a.get('address')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('address')?.errors?.required"><Address></Address> is required</div>
                </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label>Date:</label>
                  <input type="date" class="form-control" formControlName="date"
                  [ngClass]="{ 'is-invalid': submitted && a.get('date')?.errors }">
                  <div *ngIf="submitted && a.get('date')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('date')?.errors?.required">Date is required</div>
                </div>
                </div>
              </div>
            </div>
          </div>
          </div>
        </div>
          <div formArrayName="Declaration2Arr" *ngFor="let a of getDeclaration2Controls(); let i = index">
            <div class="form-group" [formGroupName]="i">
              <h2>Authorised by:</h2>
              <div class="form-group">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Name:</label>
                    <input type="text" class="form-control" formControlName="name"
                    [ngClass]="{ 'is-invalid': submitted && a.get('name')?.errors }">
                    <div *ngIf="submitted && a.get('name')?.errors" class="invalid-feedback">
                      <div *ngIf="a.get('name')?.errors?.required">Person name is required</div>
                  </div>
                  </div>
                </div>
  
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Signature:</label>
                    <input type="text" class="form-control" formControlName="signature" readonly
                    [ngClass]="{ 'is-invalid': submitted && a.get('signature')?.errors }">
                  <div *ngIf="submitted && a.get('signature')?.errors" class="invalid-feedback">
                    <div *ngIf="a.get('signature')?.errors?.required">Signature is required</div>
                </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Company:</label>
                    <input type="text" class="form-control" formControlName="company" 
                    [ngClass]="{ 'is-invalid': submitted && a.get('company')?.errors }">
                    <div *ngIf="submitted && a.get('company')?.errors" class="invalid-feedback">
                      <div *ngIf="a.get('company')?.errors?.required">Company name is required</div>
                  </div>
                  </div>
                </div>
  
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Position:</label>
                    <input type="text" class="form-control" formControlName="position" 
                    [ngClass]="{ 'is-invalid': submitted && a.get('position')?.errors }">
                    <div *ngIf="submitted && a.get('position')?.errors" class="invalid-feedback">
                      <div *ngIf="a.get('position')?.errors?.required">Position is required</div>
                  </div>
                  </div>
                </div>
  
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Address:</label>
                    <input type="text" class="form-control" formControlName="address" 
                    [ngClass]="{ 'is-invalid': submitted && a.get('address')?.errors }">
                    <div *ngIf="submitted && a.get('address')?.errors" class="invalid-feedback">
                      <div *ngIf="a.get('address')?.errors?.required">Address is required</div>
                  </div>
                  </div>
                </div>
  
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Date:</label>
                    <input type="date" class="form-control" formControlName="date" 
               [ngClass]="{ 'is-invalid': submitted && a.get('date')?.errors }">
                    <div *ngIf="submitted && a.get('date')?.errors" class="invalid-feedback">
                      <div *ngIf="a.get('date')?.errors?.required">Date is required</div>
                  </div>
                  </div>
                </div>
              </div>
            </div>
            </div>
          </div>
      
    </mat-expansion-panel>
</mat-accordion>
  <div class="row" style="margin-top: 20px;">
    <div class="col-sm-12">
    <div style="text-align: center;"> 
    <button  style="width: auto;margin-left: 50px;" type="submit" 
    class="btn btn-primary btn-rounded btn-md font-weight-medium auth-form-btn next"
    mat-button>
      <i class="bi bi-journal-arrow-up icon"></i> Submit</button>
</div>
    </div>
  </div>
    </form>
  </div>
  </div>
  
   