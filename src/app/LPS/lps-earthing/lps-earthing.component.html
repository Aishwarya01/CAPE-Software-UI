<div class="card">
    <div class="card-body">
        <form [formGroup]="earthingForm" (ngSubmit)="onSubmit(flag)" (keyup)="onKeyForm($event)" (change)="onChangeForm($event)">
            <div formArrayName="earthing" *ngFor="let q of overAllEarthingControl(); let j = index">
            <div class="form-group" [formGroupName]="j">
            <mat-accordion>
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Basic Details</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
               
                      <div class="row">
                        <div class="col-md-4">
                            <label for="buildingnumber">Building Number</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-align-start"></i>
                                    </span>
                                </div>
                                <input class="form-control" formControlName="buildingNumber" placeholder="Enter length in meter" />
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <label for="buildingname">Building Name</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="bi bi-align-start"></i>
                                    </span>
                                </div>
                                <input  class="form-control" formControlName="buildingName" placeholder="Enter length in meter"/>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                    <div class="col-sm-12">
                        <div class="table-responsive" style="overflow-x: unset; margin-top: 20px;">
                            <table class="table TableBorder">
                            <thead>
                                <th>SI.No</th>
                                <th>Description</th>
                                <th>Observation</th>
                                <th>Remarks(Optional)</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="width: 1rem; text-align: center;">1</td>
                                    <td style="width: 24rem;">Type of Earthing (Type-A/Type-B/both)</td>
                                    <td style="width: 35rem;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                                <select class="form-control" (click)="onKey($event,q,j)" formControlName="earthingTypeInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && q.get('earthingTypeInOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Type A" >Type A</option>
                                                    <option value="Type-B (ring)" >Type-B (ring)</option>
                                                    <option value="Type A & Type B combined" >Type A & Type B combined</option>
                                                    <option value="Foundation" >Foundation</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('earthingTypeInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="q.get('earthingTypeInOb')?.errors?.required">Type of Earthing
                                                    Observation is required</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="width: 35rem;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                            <textarea type="text" class="form-control" 
                                                [readonly]="isEditable" formControlName="earthingTypeInRem" ></textarea>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;">2</td>
                                    <td>Check for bimetallic issue (connections between dissimilar metals are not
                                        allowed)</td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                                <select class="form-control" formControlName="bimetallicIssueInOb" placeholder="Please enter Observation here"
                                                [ngClass]="{ 'is-invalid': submitted && q.get('bimetallicIssueInOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="YES" >Yes</option>
                                                    <option value="NO" >No</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('bimetallicIssueInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="q.get('bimetallicIssueInOb')?.errors?.required">Bimetallic issue
                                                    Observation is required</div>
                                                </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                            <textarea type="text" class="form-control" 
                                                [readonly]="isEditable" formControlName="bimetallicIssueInRem" ></textarea>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;">3</td>
                                    <td>Connections made by brazing/welding/crimping /seaming/screwing/bolting</td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                                <select class="form-control" formControlName="brazingConnectInOb" placeholder="Please enter Observation here"
                                                [ngClass]="{ 'is-invalid': submitted && q.get('brazingConnectInOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Brazing" >Brazing</option>
                                                    <option value="Welding" >Welding</option>
                                                    <option value="Crimping" >Crimping</option>
                                                    <option value="Seaming" >Seaming</option>
                                                    <option value="Screwing" >Screwing</option>
                                                    <option value="Bolting" >Bolting (clamps)</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('brazingConnectInOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="q.get('brazingConnectInOb')?.errors?.required">Connections made by brazing/welding/crimping /seaming/screwing/bolting Observation is required</div>
                                                </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                            <textarea type="text" class="form-control" 
                                                [readonly]="isEditable" formControlName="brazingConnectInRem" ></textarea>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                        </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="typeAearthingsystem[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Type-A earthing system</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;">
                        <table class="table TableBorder">
                        <tbody formArrayName="earthingDescription" *ngFor="let a of earthingDescriptionarr(q); let j = index">
                         <div class="form-group" [formGroupName]="j">
                    <!-- Table -->
                              <thead>
                                        <th>SI.No</th>
                                        <th>Description</th>
                                        <th>Observation</th>
                                        <th>Remarks(Optional)</th>
                                    </thead>
                                    <tr>
                                        <td style="width: 1rem; text-align: center;">4(a)</td>
                                        <td style="width: 24rem;">Soil resistivity in ohm-meter</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="number" class="form-control"
                                                    [readonly]="isEditable" formControlName="soilResistivityInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('soilResistivityInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('soilResistivityInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('soilResistivityInOb')?.errors?.required">
                                                        Soil resistivity observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="number" class="form-control"
                                                    [readonly]="isEditable" formControlName="soilResistivityInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(b)</td>
                                        <td>Number of earth electrode should not be less than the  number of down conductors</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="earthPitDigOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthPitDigOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Ok" >Ok</option>
                                                        <option value="Not Ok" >Not Ok</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('earthPitDigOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthPitDigOb')?.errors?.required">Earth pit work - Digging observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthPitDigRem" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(c)</td>
                                        <td>Ensure all down conductors are connected to earth termination system</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <!-- <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" ></textarea> -->
                                                    <select class="form-control" formControlName="earthElectrodeLesthanDownConductorInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('earthElectrodeLesthanDownConductorInOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Ok" >Ok</option>
                                                        <option value="Not Ok" >Not Ok</option>
                                                    </select>
                                                    <div *ngIf="submitted && a.get('earthElectrodeLesthanDownConductorInOb')?.errors" class="invalid-feedback">
                                                        <div *ngIf="a.get('earthElectrodeLesthanDownConductorInOb')?.errors?.required">Number of earth electrode observation is required</div>
                                                    </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeLesthanDownConductorInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(d)</td>
                                        <td>Route of earthing conductor from test joint to earth electrode (under soil/under concrete/via gutter)</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="connectedEarthTerminalInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('connectedEarthTerminalInOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Under soil" >Under soil</option>
                                                        <option value="Under concrete" >Under concrete</option>
                                                        <option value="Via gutter" >Via gutter</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('connectedEarthTerminalInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('connectedEarthTerminalInOb')?.errors?.required">
                                                        Ensure all down conductors are connected observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="connectedEarthTerminalInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(e)</td>
                                        <td>If earth enhancement materials are used, ensure whether they are filled properly upto ground level</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="testJointEarthElectrodeInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('testJointEarthElectrodeInOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Yes" >Yes</option>
                                                        <option value="No" >No</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('testJointEarthElectrodeInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('testJointEarthElectrodeInOb')?.errors?.required">
                                                        Route of earthing conductor from test joint to earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="testJointEarthElectrodeInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <div formArrayName="earthingDescriptionList" *ngFor="let h of earthingDescriptionListControls(a); let x = index">
                                        <div [formGroupName]="x">
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(f)</td>
                                        <td style="width: 24rem;">Material of earthing conductor</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="earthingConductorMaterialInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && h.get('earthingConductorMaterialInOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Copper" >Copper</option>
                                                        <option value="Copper bonded steel" >Copper bonded steel</option>
                                                        <option value="Stainless steel" >Stainless steel</option>
                                                        <option value="Galvanised Iron" >Galvanised Iron</option>
                                                        <option value="Galvanised Steel" >Galvanised Steel</option>
                                                        <option value="Mild Steel" >Mild Steel</option>
                                                        <option value="Cast Iron" >Cast Iron</option>
                                                    </select>
                                                    <div *ngIf="submitted && h.get('earthingConductorMaterialInOb')?.errors" class="invalid-feedback">
                                                        <div *ngIf="h.get('earthingConductorMaterialInOb')?.errors?.required">Coumpound filled properly upto gorund level observation is required</div>
                                                    </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthingConductorMaterialInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(g)</td>
                                        <td style="width: 24rem;">Material of earth electrode</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="earthElectrodeMaterialInOb" 
                                                    placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeMaterialInOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Copper" >Copper</option>
                                                        <option value="Copper bonded steel" >Copper bonded steel</option>
                                                        <option value="Stainless steel" >Stainless steel</option>
                                                        <option value="Galvanised Iron" >Galvanised Iron</option>
                                                        <option value="Galvanised Steel" >Galvanised Steel</option>
                                                        <option value="Mild Steel" >Mild Steel</option>
                                                        <option value="Cast Iron" >Cast Iron</option>
                                                    </select>
                                                <div *ngIf="submitted && h.get('earthElectrodeMaterialInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="h.get('earthElectrodeMaterialInOb')?.errors?.required">
                                                        Location of earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeMaterialInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(h)</td>
                                        <td style="width: 24rem;">Type of earth electrode</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="earthElectrodeTypeInOb" 
                                                    placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeTypeInOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Rod" >Rod</option>
                                                        <option value="Pipe" >Pipe</option>
                                                        <option value="Flat or plate" >Flat or plate</option>
                                                        <option value="Chemical pipe" >Chemical pipe</option>
                                                    </select>
                                                <div *ngIf="submitted && h.get('earthElectrodeTypeInOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="h.get('earthElectrodeTypeInOb')?.errors?.required">Material of earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeTypeInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(i)</td>
                                        <td style="width: 24rem;">Size/cross section area of earth electrode</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeSizeInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeSizeInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && h.get('earthElectrodeSizeInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="h.get('earthElectrodeSizeInOb')?.errors?.required">
                                                        Size/cross section area of earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeSizeInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>

                                        <td style="width: 1rem;text-align: center;">4(j)</td>
                                        <td style="width: 24rem;">Length/depth of earth electrode in meters</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeLengthingOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeLengthingOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && h.get('earthElectrodeLengthingOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="h.get('earthElectrodeLengthingOb')?.errors?.required">
                                                        Length of earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthElectrodeLengthingRem"
                                                    ></textarea>
                                            </div>
                                            <div class="row" style="float: right;
                                            margin-right: 10px;">
                                            <mat-icon style="cursor: pointer;padding: 0px 33px 0px 0px;" 
                                            [ngClass]="{'disableForm':service.allFieldsDisable}"  *ngIf="earthingDescriptionListControls(a).length == x+1" 
                                            (click)="addItemTypeAEarthing(a)">add_box</mat-icon>

                                            <mat-icon class="mousechange" class="dlt" type="button" title="Delete" [ngClass]="{'disableForm':service.allFieldsDisable}" 
                                            *ngIf="earthingDescriptionListControls(a).length > 1" 
                                            (click)="removeItemTypeAEarthing(a,x)" style="cursor: pointer;float: right;">remove_circle_outline</mat-icon>
                                        </div>
                                        </td>
                                    </tr>
                                </div>
                                    </div>

                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(k)</td>
                                        <td style="width: 24rem;">Maximum distance between earth electrode and wall in meters</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistWallInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectMaxiDistWallInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('earthelectMaxiDistWallInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthelectMaxiDistWallInOb')?.errors?.required">
                                                        Maximum distance between earth electrode and wall observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistWallInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(l)</td>
                                        <td style="width: 24rem;">Minimum distance between earth electrode and wall in meters</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManimumDistanceWallInOb"
                                                    placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectManimumDistanceWallInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('earthelectManimumDistanceWallInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div
                                                        *ngIf="a.get('earthelectManimumDistanceWallInOb')?.errors?.required">
                                                        Minimum distance between earth electrode and wall observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManimumDistanceWallInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(m)</td>
                                        <td style="width: 24rem;">Maximum distance between earth electrodes in meters (in case of multiple rods in one location)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectMaxiDistOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('earthelectMaxiDistOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthelectMaxiDistOb')?.errors?.required">
                                                        Maximum distance between earth electrodes observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(n)</td>
                                        <td style="width: 24rem;">Minimum distance between earth electrodes in meters (in case of multiple rods in one location)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManiDistOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectManiDistOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('earthelectManiDistOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthelectManiDistOb')?.errors?.required">
                                                        Minimum distance between earth electrodes observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManiDistRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(o)</td>
                                        <td style="width: 24rem;">Total number of earthing electrodes</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalNumberOfElectrodeOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('totalNumberOfElectrodeOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('totalNumberOfElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('totalNumberOfElectrodeOb')?.errors?.required">
                                                        Total number of earthing electrodes observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;"> 
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalNumberOfElectrodeRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(p)</td>
                                        <td style="width: 24rem;">Number of earthing electrode inspected</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedNoOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedNoOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('inspectedNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedNoOb')?.errors?.required">Number of earthing electrode inspected observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedNoRem" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(q)</td>
                                        <td style="width: 24rem;">Number of inspection passed</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedPassedNoOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedPassedNoOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('inspectedPassedNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedPassedNoOb')?.errors?.required">
                                                        Number of inspection passed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedPassedNoRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(r)</td>
                                        <td style="width: 24rem;">Number of inspection failed (loose rods/pipe in soil are also considered as a failure in all tests)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedFailedNoOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedFailedNoOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('inspectedFailedNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedFailedNoOb')?.errors?.required">
                                                        Number of inspection failed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedFailedNoRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                </div>
                                <!-- <mat-icon class="mousechange" class="add" type="button"  (click)="submit1()" *ngIf="earthingDescriptionarr().length == j+1"
                                    style="margin-inline: 1rem;float: right;position: relative;"  title="add another Section" [ngClass]="{'disableForm':isEditable}"
                                  >add_box</mat-icon>
                                <mat-icon class="mousechange" class="dlt" type="button" title="delete"  *ngIf="earthingDescriptionarr().length > 1"
                                    (click)="removeItem1(a,j)"
                                    style="margin-inline: 0rem;float: right;position: relative;" [ngClass]="{'disableForm':isEditable}">delete</mat-icon> -->
                            </tbody>
                        </table>
                    </div>
                    </div>
                </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="clamps[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Clamps</h3>
                        </mat-panel-title>
                           
                    </mat-expansion-panel-header>
                    <div *ngFor="let a of earthingClampsarr(q); let j = index">
                        <select class="form-control" style="width: 30%;" 
                                (change)="onChangeClamps($event,a)">
                                <option value="" selected>Select Option</option>
                                <option value="Applicable" >Applicable </option>
                                <option value="Not applicable" >Not applicable</option>
                                </select>
                            </div>
                            <div style="margin-top: 10px;" *ngIf="applicableClampsNote"><b>Note:</b> &nbsp; Select applicable if you intend to fill details for Clamps</div>
                            <br>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;" *ngIf="applicableClamps">
                        <table class="table TableBorder">
                                <tbody formArrayName="earthingClamps" *ngFor="let a of earthingClampsarr(q); let j = index">
                                    <div class="form-group" [formGroupName]="j">
                                        <thead>
                                            <th>SI.No</th>
                                            <th>Description</th>
                                            <th>Observation</th>
                                            <th>Remarks(Optional)</th>
                                        </thead>
                                        <tr>
                                            <td style="width: 1rem; text-align: center;">5.1</td>
                                            <td style="width: 24rem;">Physical inspection (damage/break/corroded)</td>
                                            <td style="width: 43rem;">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control" formControlName="physicalInspectionInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('physicalInspectionInOb')?.errors}">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Physically good" >Physically good</option>
                                                            <option value="Not good" >Not good</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('physicalInspectionInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('physicalInspectionInOb')?.errors?.required">
                                                            Physical inspection observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td style="width: 43rem;">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="psysicalInspectionInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: center;">5.2</td>
                                            <td>Clamp is firmly fixed/mounted on to earth electrode</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control" formControlName="clampsFirmlyOb" placeholder="Please enter Observation here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('clampsFirmlyOb')?.errors}">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="YES" >Yes</option>
                                                            <option value="NO" >No</option>
                                                        </select>
                                                        <div *ngIf="submitted && a.get('clampsFirmlyOb')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('clampsFirmlyOb')?.errors?.required">Clamp is firmly fixed observation is required</div>
                                                        </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="clampsFirmlyRem" ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.3</td>
                                            <td>Interconnection of earthing conductor with clamp (tight/loose/corroded)</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <!-- <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" ></textarea> -->
                                                        <select class="form-control" formControlName="interConnectOfEarthClampInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('interConnectOfEarthClampInOb')?.errors}">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Physically good" >Physically good</option>
                                                            <option value="Not good" >Not good</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('interConnectOfEarthClampInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div
                                                            *ngIf="a.get('interConnectOfEarthClampInOb')?.errors?.required">
                                                            Interconnection of earthing conductor with clamp observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="interConnectOfEarthClampInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.4</td>
                                            <td>Type of clamp</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control" formControlName="typeOfClampsInOb" placeholder="Please enter Observation here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('typeOfClampsInOb')?.errors}">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Universal" >Universal</option>
                                                            <option value="Bonding" >Bonding</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('typeOfClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('typeOfClampsInOb')?.errors?.required">
                                                            Type of clamp observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="typeOfClampsInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.5</td>
                                            <td>Material of clamp</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control" formControlName="materialOfClampsInOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('materialOfClampsInOb')?.errors}">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Copper" >Copper</option>
                                                            <option value="Copper bonded steel" >Copper bonded steel</option>
                                                            <option value="Aluminum" >Aluminum</option>
                                                            <option value="Galvanised Iron" >Galvanised Iron</option>
                                                            <option value="Galvanised Steel" >Galvanised Steel</option>
                                                            <option value="Mild Steel" >Mild Steel</option>
                                                            <option value="Cast Iron" >Cast Iron</option>
                                                            <option value="Brass" >Brass</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('materialOfClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('materialOfClampsInOb')?.errors?.required">
                                                            Material of clamp observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="materialOfClampsInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.6</td>
                                            <td>Total number of clamps</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="totalNoClampsInOb" placeholder="Please enter Observation here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('totalNoClampsInOb')?.errors}"></textarea>
                                                    <div *ngIf="submitted && a.get('totalNoClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('totalNoClampsInOb')?.errors?.required">
                                                            Total number of clamps observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="totalNoClampsInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.7</td>
                                            <td>Number of clamps inspected</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectedClampsInOb" placeholder="Please enter Observation here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('inspectedClampsInOb')?.errors}"></textarea>
                                                    <div *ngIf="submitted && a.get('inspectedClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectedClampsInOb')?.errors?.required">
                                                            Number of clamps inspected observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectedClampsInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.8</td>
                                            <td>Number of inspections passed</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectionPassedInOb" placeholder="Please enter Observation here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('inspectionPassedInOb')?.errors}"></textarea>
                                                    <div *ngIf="submitted && a.get('inspectionPassedInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectionPassedInOb')?.errors?.required">
                                                            Number of inspections passed observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectionPassedInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5.9</td>
                                            <td>Number of inspections failed</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectionFailedInOb" placeholder="Please enter Observation here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('inspectionFailedInOb')?.errors}"></textarea>
                                                    <div *ngIf="submitted && a.get('inspectionFailedInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectionFailedInOb')?.errors?.required">
                                                            Number of inspections failed observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectionFailedInRem"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                    </div>
                                    <!-- <mat-icon class="mousechange" class="add" type="button" [ngClass]="{'disableForm':isEditable}" (click)="submit2()" *ngIf="earthingClampsarr().length == j+1"
                                    style="margin-inline: 1rem;float: right;position: relative;"  title="add another Section"
                                  >add_box</mat-icon>
                                <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':isEditable}" title="delete" *ngIf="earthingClampsarr().length > 1"
                                    (click)="removeItem2(a,j)"
                                    style="margin-inline: 0rem;float: right;position: relative;">delete</mat-icon> -->
                                </tbody>
                            </table>
                    </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="earthelectrodechambers[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Earth electrode chambers</h3>
                        </mat-panel-title>
                           
                    </mat-expansion-panel-header>
                    <div *ngFor="let a of earthElectrodeChambearr(q); let j = index">
                        <select class="form-control" style="width: 30%;" 
                                (change)="onChangeChambers($event,a)">
                                <option value="" selected>Select Option</option>
                                <option value="Applicable" >Applicable </option>
                                <option value="Not applicable" >Not applicable</option>
                                </select>
                            </div>
                            <div style="margin-top: 10px;" *ngIf="applicableChambersNote"><b>Note:</b> &nbsp; Select applicable if you intend to fill details for Earth electrode chambers</div>
                            <br>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;" *ngIf="applicableChambers">
                        <table class="table TableBorder">
                            <tbody formArrayName="earthingElectrodeChamber"
                                *ngFor="let a of earthElectrodeChambearr(q); let j = index">
                                <div class="form-group" [formGroupName]="j">
                                    <thead>
                                        <th>SI.No</th>
                                        <th>Description</th>
                                        <th>Observation</th>
                                        <th>Remarks(Optional)</th>
                                    </thead>
                                    <tr>
                                        <td style="width: 1rem; text-align: center;">6(a)</td>
                                        <td style="width: 24rem;">Physical inspection (damage/break/corroded)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="physicalInspeOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('physicalInspeOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Physically good" >Physically good</option>
                                                        <option value="Not good" >Not good</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('physicalInspeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('physicalInspeOb')?.errors?.required">Physical inspection observation
                                                        is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="physicalInspeRem" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(b)</td>
                                        <td>Type of chamber (concrete/metal/plastic)</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="chamberTypeOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('chamberTypeOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Concrete" >Concrete</option>
                                                        <option value="Metal" >Metal</option>
                                                        <option value="Plastic" >Plastic</option>
                                                        <option value="Brick wall construction" >Brick wall construction</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('chamberTypeOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="a.get('chamberTypeOb')?.errors?.required">Type of chamber observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberTypeRem" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(c)</td>
                                        <td>Size of chamber (length x width x depth)</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberSizeOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('chamberSizeOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('chamberSizeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('chamberSizeOb')?.errors?.required">Size of chamber observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberSizeRem" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(d)</td>
                                        <td>Maximum withstand load</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumWithStandLoadOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('maximumWithStandLoadOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('maximumWithStandLoadOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('maximumWithStandLoadOb')?.errors?.required">
                                                        Maximum withstand load observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumWithStandLoadRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(e)</td>
                                        <td>Location of chamber</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control" formControlName="chamberLocationOb" placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('chamberLocationOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Walk pathway" >Walk pathway</option>
                                                    <option value="Vehicle runway" >Vehicle runway</option>
                                                    <option value="Neither both" >Neither both</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('chamberLocationOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('chamberLocationOb')?.errors?.required">
                                                        Chamber is properly placed in soil observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="text-align: center;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberLocationRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(f)</td>
                                        <td>Chamber is properly placed in soil</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" formControlName="maximumPlacedSoilOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('maximumPlacedSoilOb')?.errors}">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Yes" >Yes</option>
                                                        <option value="No" >No</option>
                                                        <option value="Placed, but no numbering" >Placed, but no numbering</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('maximumPlacedSoilOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('maximumPlacedSoilOb')?.errors?.required">
                                                        Chamber is properly placed in soil observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="text-align: center;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumPlacedSoilRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(g)</td>
                                        <td>Total number of chambers</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalChamberNoOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('totalChamberNoOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('totalChamberNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('totalChamberNoOb')?.errors?.required">Total number of chambers observation
                                                        is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalChamberNoRem" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(h)</td>
                                        <td>Number of chambers inspected</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedChamberInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedChamberInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('inspectedChamberInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedChamberInOb')?.errors?.required">
                                                        Number of chambers inspected observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedChamberInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(i)</td>
                                        <td>Number of inspections passed</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectionPassedInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectionPassedInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('inspectionPassedInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectionPassedInOb')?.errors?.required">
                                                        Number of inspections passed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectionPassedInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(j)</td>
                                        <td>Number of inspections failed</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectionFailedInOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectionFailedInOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('inspectionFailedInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectionFailedInOb')?.errors?.required">
                                                        Number of inspections failed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectionFailedInRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                </div>
                                <!-- <mat-icon class="mousechange" class="add" type="button" [ngClass]="{'disableForm':isEditable}" (click)="submit3()" *ngIf="earthElectrodeChambearr().length == j+1"
                                    style="margin-inline: 1rem;float: right;position: relative;"  title="add another Section"
                                  >add_box</mat-icon>
                                <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':isEditable}" title="delete" *ngIf="earthElectrodeChambearr().length > 1"
                                    (click)="removeItem3(a,j)"
                                    style="margin-inline: 0rem;float: right;position: relative;">delete</mat-icon> -->
                            </tbody>
                        </table>
                    </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel  *ngIf="typeBearthingsystem[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Type-B earthing system</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;">
                        <table class="table TableBorder">
                            <tbody formArrayName="earthingSystem" *ngFor="let a of earthingSystemarr(q); let j = index">
                                <div class="form-group" [formGroupName]="j">
                                    <thead>
                                        <th>SI.No</th>
                                        <th>Description</th>
                                        <th>Observation</th>
                                        <th>Remarks(Optional)</th>
                                    </thead>
                                    
                                    <tr>
                                    <td colspan="4">
                                        <label> 7(a).Earth electrode must be buried atleast 0.5m depth and 1m distance from external wall as closed loop.</label>
                                    </td>
                                    </tr>

                                    <tr>
                                        <td rowspan="5" style="text-align: center;">7(b)</td>
                                        <td>Depth of electrode from ground level in meters</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>East</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="eastOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('eastOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('eastOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('eastOb')?.errors?.required">East observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="eastRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>West</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="westOb"
                                                placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('westOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('westOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('westOb')?.errors?.required">West observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="westRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>North</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="northOb"
                                                placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('northOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('northOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('northOb')?.errors?.required">North observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="northRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>South</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="southOb"
                                                placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('southOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('southOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('southOb')?.errors?.required">South observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="southRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td rowspan="5" style="text-align: center;">7(c)</td>
                                        <td>Distance of ring earthing from wall in meters</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>East</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthEastOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthEastOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('ringWallEarthEastOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthEastOb')?.errors?.required">
                                                        East observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthEastRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>West</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthWestOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthWestOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('ringWallEarthWestOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthWestOb')?.errors?.required">
                                                        West observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthWestRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>North</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthNorthOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthNorthOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('ringWallEarthNorthOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthNorthOb')?.errors?.required">
                                                        North observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthNorthRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>South</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthSouthOb" placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthSouthOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('ringWallEarthSouthOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthSouthOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthSouthRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(d)</td>
                                        <td style="width: 24rem;">Type B ring earth electrode connected to reinforcement steel</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control" formControlName="connectedEarthElectrodeOb"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('connectedEarthElectrodeOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Every 5 meters" >Every 5 meters</option>
                                                    <option value="Every 10 meters" >Every 10 meters</option>
                                                    <option value="Other distance" >Other distance</option>
                                                    <option value="Connected only to every down conductor and no connection to foundation steel" >Connected only to every down conductor and no connection to foundation steel</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('connectedEarthElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('connectedEarthElectrodeOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" formControlName="connectedEarthElectrodeRem" class="form-control"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(e)</td>
                                        <td>Type of Joints</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control" formControlName="jointsMadeBrazingOb"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('jointsMadeBrazingOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="brazing" >brazing</option>
                                                    <option value="welding" >welding</option>
                                                    <option value="crimping" >crimping</option>
                                                    <option value="seaming" >seaming</option>
                                                    <option value="screwing" >screwing</option>
                                                    <option value="bolting (connectors)" >bolting (connectors)</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('jointsMadeBrazingOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('jointsMadeBrazingOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="jointsMadeBrazingRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(f)</td>
                                        <td>Material of earth electrode</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control" formControlName="materialOfEartElectrodeOb"
                                                 [ngClass]="{ 'is-invalid': submitted && a.get('materialOfEartElectrodeOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Copper" >Copper</option>
                                                    <option value="Copper bonded steel" >Copper bonded steel</option>
                                                    <option value="Aluminum" >Aluminum</option>
                                                    <option value="Stainless Steel" >Stainless Steel</option>
                                                    <option value="Galvanised Iron" >Galvanised Iron</option>
                                                    <option value="Galvanised Steel" >Galvanised Steel</option>
                                                    <option value="Mild Steel" >Mild Steel</option>
                                                    <option value="Cast Iron" >Cast Iron</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('materialOfEartElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('materialOfEartElectrodeOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="materialOfEartElectrodeRem"
                                                    ></textarea>
                                                    
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(g)</td>
                                        <td>Type of earth electrode</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control"  formControlName="typeOfEarthElectrodeOb"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('typeOfEarthElectrodeOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="rod" >rod</option>
                                                    <option value="pipe" >pipe</option>
                                                    <option value="flat" >flat</option>
                                                    <option value="chemical pipe" >chemical pipe</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('typeOfEarthElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('typeOfEarthElectrodeOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="typeOfEarthElectrodeRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="text-align: center;">7(h)</td>
                                        <td>Size(cross section area/diameter/thickness) of earth electrode</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea class="form-control"  formControlName="sizeOfEarthElectrodeOb"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('sizeOfEarthElectrodeOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('sizeOfEarthElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('sizeOfEarthElectrodeOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" formControlName="sizeOfEarthElectrodeRem" class="form-control" ></textarea>
                                            </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="text-align: center;">7(i)</td>
                                        <td>Maximum distance between earth electrode and wall in meters</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="maximumDistanceEartElectrodeWalOb" 
                                                placeholder="Please enter Observation here" [ngClass]="{ 'is-invalid': submitted && a.get('maximumDistanceEartElectrodeWalOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('maximumDistanceEartElectrodeWalOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="a.get('maximumDistanceEartElectrodeWalOb')?.errors?.required">Maximum distance between earth electrode and wall observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumDistanceEartElectrodeWalRem"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="text-align: center;">7(j)</td>
                                        <td>Minimum distance between earth electrode and wall</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="manimumDistanceEartElectrodeWalOb"
                                                    placeholder="Please enter Observation here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('manimumDistanceEartElectrodeWalOb')?.errors}"></textarea>
                                                <div *ngIf="submitted && a.get('manimumDistanceEartElectrodeWalOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div
                                                        *ngIf="a.get('manimumDistanceEartElectrodeWalOb')?.errors?.required">
                                                        Minimum distance between earth electrode and wall observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="manimumDistanceEartElectrodeWalRem"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                </div>

                            </tbody>
                        </table>
                    </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="testingofearthelectrodes[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Testing of earth electrodes</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                        <div class="col-md-6">
                            <label>8(a).Earth electrode resistance value (Table heading)</label>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px;">
                        <div class="col-sm-12">
                        <div class="table-responsive" style="overflow-x: unset;">
                            <table class="table TableBorder">
                                <tbody formArrayName="earthElectrodeTesting" *ngFor="let a of earthElectrodeTestingarr(q); let j = index">
                                    <div class="form-group" [formGroupName]="j">
                                        <thead>
                                            <th>SI.No</th>
                                            <th>Types of earth electrode(rod/pipe/flat/chemical pipe)</th>
                                            <th>Material of earth elctrode (copper/copper bonded steel/galvanised steel/galvanised iron/cast iron)</th>
                                            <th>Size(diameter)of earth electrode (mm)</th>
                                            <th>Depth /length of earth electrode (m)</th>
                                            <th>Electrode resistance to earth in ()</th>
                                            <th>Remarks</th>
                                        </thead>
                                        <tr>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control" formControlName="serialNo" placeholder="Enter SerialNo"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control" formControlName="earthingElectrodeType" placeholder="Types of earth electrode(rod/pipe/flat/chemical pipe)"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control" formControlName="earthingElectrodeMaterial" placeholder="Material of earth elctrode (copper/copper bonded steel/galvanised steel/galvanised iron/cast iron)"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control"  formControlName="earthingElectrodeSize" placeholder="Information to user: incase of 1. rod -diameter (mm)/cross sectional area (sq.mm), 2. pipe- inner&outer diameter (mm), 3.flat - cross sectional area (sq.mm), 4. chemical pipe-diameter (mm)"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control" formControlName="earthingElectrodeDepth" placeholder="Depth /length of earth electrode (m)"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control" formControlName="earthingElectrodeResistance" placeholder="Electrode resistance to earth in ()"></textarea>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                <textarea class="form-control" formControlName="earthingElectrodeRemarks" placeholder="Remarks"></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <!-- <mat-icon style="cursor: pointer;padding: 0px 33px 0px 0px;" 
                                            [ngClass]="{'disableForm':service.allFieldsDisable}"  *ngIf="earthElectrodeTestingarr(a).length == j+1" 
                                            (click)="addElectrodeTesting(a)">add_box</mat-icon>

                                            <mat-icon class="mousechange" class="dlt" type="button" title="Delete" [ngClass]="{'disableForm':service.allFieldsDisable}" 
                                            *ngIf="earthElectrodeTestingarr(a).length > 1" 
                                            (click)="removeElectrodeTesting(a,j)" style="cursor: pointer;float: right;">remove_circle_outline</mat-icon> -->
                                    </div>
                                </tbody>
                            </table>
                        </div>
                        </div>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>
            </div>
            </div>
            <div style="text-align: center;margin-top: 40px;margin-bottom: 20px;">
                <button class="previous" mat-button matStepperPrevious>&laquo; Back</button>
                <button class="next" (click)="gotoNextModal(content,contents)" mat-button >Next &raquo;</button>
           </div>
            <div *ngIf="validationError" style="text-align: center;margin-top: 30px;">
                <span class="alert alert-danger">{{validationErrorMsg}}</span>
            </div>
        </form>
    </div>
</div>
<!--  -->
<ng-template #content let-modal>
    <div class="modal-body">
        <div class="centre-text m-btm30">
            <div *ngIf="success" style="text-align: center;">
                <span class="successshow">{{successMsg}}</span>
            </div>
            <div *ngIf="Error" style="text-align: center;">
                <span class="errorshow">{{errorMsg}}</span>
            </div>
        </div>
    </div>
    <br>
     <button type="button" class="close" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close"  (click)="closeModalDialog()" matStepperNext>

      <span aria-hidden="true">Ok</span>

  </button>
</ng-template> 
<ng-template #contents let-modal>
    <div class="modal-body">
     <div class="centre-text m-btm30">
      <div style="text-align: center;">
        <span class="successshow">Are you sure you want to procced? </span>
        <br>
        <span style="font-size: 12px;">Note: Please verify all the details! </span>
       </div>
      </div>
     </div>
    <br>
    <div class="row">
       <button type="button" class="col-md-6" style="text-align:center; width: auto;" class="btn btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
       aria-label="Close" (click)="closeModalDialog()" matStepperNext>
       <i class="bi bi-arrow-right-circle"></i>&nbsp;
        <span aria-hidden="true">Ok</span>
    </button>
    <button type="button" class="col-md-6" style="width: auto;" class="btn btn-danger btn-rounded btn-md font-weight-medium auth-form-btn"
       aria-label="Close" (click)="closeModalDialog()">
       <i class="bi bi-x icon"></i>
        <span aria-hidden="true">Cancel</span>
    </button>
  </div>
  
    </ng-template>     
