<div *ngIf="service.msgForStep1" style="text-align: center;margin-top: 30px;">
    <span class="successshow">Please fill steps to proceed further!</span>
</div>
<div *ngIf="tabError" style="text-align: center;">
    <span class="alert alert-danger">{{tabErrorMsg}}</span>
</div>
<div *ngIf="validationErrorTab" style="text-align: center;">
    <span class="alert alert-danger">{{validationErrorMsgTab}}</span>
</div>
<div class="card">
    <div class="card-body">
        <form [formGroup]="earthingForm" (ngSubmit)="onSubmit(flag)" (keyup)="onKeyForm($event)" (change)="onChangeForm($event)">
            <div formArrayName="earthing" *ngFor="let q of overAllEarthingControl(); let j = index">
            <div class="form-group" [formGroupName]="j">

                <div class="search-bar">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-6">
                                <label for="buildingNumber">Building Number</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="bi bi-align-start"></i>
                                        </span>
                                    </div>
                                    <input onwheel="this.blur()" class="form-control" formControlName="buildingNumber" readonly/>
                                </div>
                            </div>
            
                            <div class="col-md-6">
                                <label for="buildingName">Building Name</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="bi bi-align-start"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" formControlName="buildingName" readonly/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <mat-accordion>
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Basic Details</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                    <div class="col-sm-12">
                        <div class="table-responsive" style="overflow-x: unset; margin-top: 20px;">
                            <table class="table TableBorder">
                            <thead>
                                <th>SI.No</th>
                                <th>Description</th>
                                <th>Observation</th>
                                <th>Remarks</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="width: 1rem; text-align: center;">1</td>
                                    <td style="width: 24rem;">Type of Earthing (Type-A/Type-B/Both)</td>
                                    <td style="width: 35rem;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                                <select class="form-control"  (change)="onKey($event,q,j)" formControlName="earthingTypeInOb" [attr.disabled]="isEditable ? '' : null" placeholder="Please enter Type of Earthing here" [ngClass]="{ 'is-invalid': submitted && q.get('earthingTypeInOb')?.errors}" style="height: 3rem;">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Type A" >Type A</option>
                                                    <option value="Type-B (ring)" >Type-B (ring)</option>
                                                    <option value="Type A & Type B combined" >Type A & Type B combined</option>
                                                    <option value="Foundation" >Foundation</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('earthingTypeInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="q.get('earthingTypeInOb')?.errors?.required">Type of Earthing
                                                    Observation is required</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="width: 35rem;">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                            <textarea type="text" class="form-control"
                                                [readonly]="isEditable" formControlName="earthingTypeInRem" placeholder="Please enter Remarks here"></textarea>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;">2</td>
                                    <td>Check for bimetallic issue (connections between dissimilar metals are not
                                        allowed)</td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                                <select class="form-control"  style="height: 3rem;" (change)="dropDown($event,q)" [attr.disabled]="isEditable ? '' : null" formControlName="bimetallicIssueInOb" placeholder="Please enter Check for bimetallic issue here"
                                                [ngClass]="{ 'is-invalid': submitted && q.get('bimetallicIssueInOb')?.errors}">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Yes" >Yes</option>
                                                    <option value="No" >No</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('bimetallicIssueInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="q.get('bimetallicIssueInOb')?.errors?.required" >Bimetallic issue
                                                    Observation is required</div>
                                                </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                            <textarea type="text" class="form-control" *ngIf="mandatory1"
                                                [readonly]="isEditable" formControlName="bimetallicIssueInRem" placeholder="Please enter remarks here"
                                                [ngClass]="{ 'is-invalid': submitted && q.get('bimetallicIssueInRem')?.errors}"></textarea>

                                                <div *ngIf="submitted && q.get('bimetallicIssueInRem')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="q.get('bimetallicIssueInRem')?.errors?.required">Bimetallic issue
                                                    Remarks is Mandatory</div>
                                                </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;">3</td>
                                    <td>Connections made by brazing/welding/crimping /seaming/screwing/bolting</td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                                <select class="form-control"  formControlName="brazingConnectInOb" placeholder="Please enter Observation here"
                                                [ngClass]="{ 'is-invalid': submitted && q.get('brazingConnectInOb')?.errors}" style="height: 3rem;" [attr.disabled]="isEditable ? '' : null">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Brazing" >Brazing</option>
                                                    <option value="Welding" >Welding</option>
                                                    <option value="Crimping" >Crimping</option>
                                                    <option value="Seaming" >Seaming</option>
                                                    <option value="Screwing" >Screwing</option>
                                                    <option value="Bolting (clamps)" >Bolting (clamps)</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('brazingConnectInOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="q.get('brazingConnectInOb')?.errors?.required">Connections made by brazing/welding/crimping /seaming/screwing/bolting Observation is required</div>
                                                </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="bi bi-text-paragraph"></i>
                                                </span>
                                            </div>
                                            <textarea type="text" class="form-control" 
                                                [readonly]="isEditable" formControlName="brazingConnectInRem" placeholder="Please enter Remarks here"></textarea>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                        </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="typeAearthingsystem[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Type-A earthing system</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;">
                        <table class="table TableBorder">
                        <tbody formArrayName="earthingDescription" *ngFor="let a of earthingDescriptionarr(q); let j = index">
                         <div class="form-group" [formGroupName]="j">
                    <!-- Table -->
                              <thead>
                                        <th>SI.No</th>
                                        <th>Description</th>
                                        <th>Observation</th>
                                        <th>Remarks</th>
                                    </thead>
                                    <tr>
                                        <td style="width: 1rem; text-align: center;">4(a)</td>
                                        <td style="width: 24rem;">Soil resistivity in ohm-meter</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers1($event)" (change)="decimalConversion($event,a)" class="form-control"
                                                    [readonly]="isEditable" formControlName="soilResistivityInOb" placeholder="Please enter Soil resistivity in ohm-meter here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('soilResistivityInOb')?.errors}" style="height: 3rem;">
                                                <div *ngIf="submitted && a.get('soilResistivityInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('soilResistivityInOb')?.errors?.required">
                                                        Soil resistivity observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="soilResistivityInRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(b)</td>
                                        <td>Number of earth electrode should not be less than the  number of down conductors</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control"  formControlName="earthElectrodeLesthanDownConductorInOb" [attr.disabled]="isEditable ? '' : null" (change)="typeAEarthingValidationChangeB($event,a)" placeholder="Please enter number of down conductors here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthElectrodeLesthanDownConductorInOb')?.errors}" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Ok" >Ok</option>
                                                        <option value="Not Ok" >Not Ok</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('earthElectrodeLesthanDownConductorInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthElectrodeLesthanDownConductorInOb')?.errors?.required">Number of earth electrode observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('earthElectrodeLesthanDownConductorInRem')?.errors}"
                                                    [readonly]="isEditable" formControlName="earthElectrodeLesthanDownConductorInRem" placeholder="Please enter Remarks here"></textarea>
                                                    <div *ngIf="submitted && a.get('earthElectrodeLesthanDownConductorInRem')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthElectrodeLesthanDownConductorInRem')?.errors?.required">
                                                        Remarks is required</div>
                                                    </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(c)</td>
                                        <td>Ensure all down conductors are connected to earth termination system</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control"  formControlName="connectedEarthTerminalInOb" [attr.disabled]="isEditable ? '' : null" (change)="typeAEarthingValidationChangeC($event,a)" placeholder="Please enter earth termination system here"
                                                     [ngClass]="{ 'is-invalid': submitted && a.get('connectedEarthTerminalInOb')?.errors}" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Ok" >Ok</option>
                                                        <option value="Not Ok" >Not Ok</option>
                                                    </select>
                                                    <div *ngIf="submitted && a.get('connectedEarthTerminalInOb')?.errors" class="invalid-feedback">
                                                        <div *ngIf="a.get('connectedEarthTerminalInOb')?.errors?.required">Number of earth electrode observation is required</div>
                                                    </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('connectedEarthTerminalInRem')?.errors}"
                                                    [readonly]="isEditable" formControlName="connectedEarthTerminalInRem" placeholder="Please enter Remarks here "
                                                    ></textarea>
                                                    <div *ngIf="submitted && a.get('connectedEarthTerminalInRem')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('connectedEarthTerminalInRem')?.errors?.required">
                                                        Remarks is required</div>
                                                        </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(d)</td>
                                        <td>Route of earthing conductor from test joint to earth electrode (under soil/under concrete/via gutter)</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" [attr.disabled]="isEditable ? '' : null" formControlName="testJointEarthElectrodeInOb" placeholder="Please enter Route of earthing conductor from test joint to earth electrode here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('testJointEarthElectrodeInOb')?.errors}" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Under soil" >Under soil</option>
                                                        <option value="Under concrete" >Under concrete</option>
                                                        <option value="Via gutter" >Via gutter</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('testJointEarthElectrodeInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('testJointEarthElectrodeInOb')?.errors?.required">
                                                        Route of earthing conductor from test joint to earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="testJointEarthElectrodeInRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">4(e)</td>
                                        <td>If earth enhancement materials are used, ensure whether they are filled properly upto ground level</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control" [attr.disabled]="isEditable ? '' : null" formControlName="grountLevelComponentFilledInOb" placeholder="Please enter earth enhancement materials details here" [ngClass]="{ 'is-invalid': submitted && a.get('grountLevelComponentFilledInOb')?.errors}" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Yes" >Yes</option>
                                                        <option value="No" >No</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('grountLevelComponentFilledInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('grountLevelComponentFilledInOb')?.errors?.required">
                                                        Earth enhancement materials observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="grountLevelComponentFilledInRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <div style="margin-top: 1rem;margin-bottom: 1rem;" class="search-bar1" formArrayName="earthingDescriptionList" *ngFor="let h of earthingDescriptionListControls(a); let x = index">
                                        <div [formGroupName]="x" style="margin-bottom: 10px;">
                                            <tr>
                                                <td style="width: 1rem;text-align: center;">4.{{x+1}}(f)</td>
                                                <td style="width: 24rem;">Material of earthing conductor</td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <select class="form-control" formControlName="earthingConductorMaterialInOb"  placeholder="Please enter Material of earthing conductor here"
                                                            [ngClass]="{ 'is-invalid': submitted && h.get('earthingConductorMaterialInOb')?.errors}" style="height: 3rem;" [attr.disabled]="isEditable ? '' : null">
                                                            <option value="" selected>Select Option</option>
                                                            <option value="Copper">Copper</option>
                                                            <option value="Copper bonded steel">Copper bonded steel</option>
                                                            <option value="Stainless steel">Stainless steel</option>
                                                            <option value="Galvanised Iron">Galvanised Iron</option>
                                                            <option value="Galvanised Steel">Galvanised Steel</option>
                                                            <option value="Mild Steel">Mild Steel</option>
                                                            <option value="Cast Iron">Cast Iron</option>
                                                        </select>
                                                        <div *ngIf="submitted && h.get('earthingConductorMaterialInOb')?.errors" class="invalid-feedback">
                                                            <div *ngIf="h.get('earthingConductorMaterialInOb')?.errors?.required">Material of earthing conductor observation is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea type="text" class="form-control" [readonly]="isEditable"
                                                            formControlName="earthingConductorMaterialInRem"
                                                            placeholder="Please enter Remarks here"></textarea>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width: 1rem;text-align: center;">4.{{x+1}}(g)</td>
                                                <td style="width: 24rem;">Material of earth electrode</td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <select class="form-control" formControlName="earthElectrodeMaterialInOb" [attr.disabled]="isEditable ? '' : null" placeholder="Please enter Material of earth electrode here" style="height: 3rem;"
                                                            [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeMaterialInOb')?.errors}">
                                                            <option value="" selected>Select Option</option>
                                                            <option value="Copper">Copper</option>
                                                            <option value="Copper bonded steel">Copper bonded steel</option>
                                                            <option value="Stainless steel">Stainless steel</option>
                                                            <option value="Galvanised Iron">Galvanised Iron</option>
                                                            <option value="Galvanised Steel">Galvanised Steel</option>
                                                            <option value="Mild Steel">Mild Steel</option>
                                                            <option value="Cast Iron">Cast Iron</option>
                                                        </select>
                                                        <div *ngIf="submitted && h.get('earthElectrodeMaterialInOb')?.errors" class="invalid-feedback">
                                                            <div *ngIf="h.get('earthElectrodeMaterialInOb')?.errors?.required">
                                                                Material of earth electrode observation is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea type="text" class="form-control" [readonly]="isEditable"
                                                            formControlName="earthElectrodeMaterialInRem"
                                                            placeholder="Please enter Remarks here"></textarea>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width: 1rem;text-align: center;">4.{{x+1}}(h)</td>
                                                <td style="width: 24rem;">Type of earth electrode</td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <select class="form-control" formControlName="earthElectrodeTypeInOb" [attr.disabled]="isEditable ? '' : null" placeholder="Please enter Type of earth electrode here"
                                                            [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeTypeInOb')?.errors}"
                                                            style="height: 3rem;">
                                                            <option value="" selected>Select Option</option>
                                                            <option value="Rod">Rod</option>
                                                            <option value="Pipe">Pipe</option>
                                                            <option value="Flat or plate">Flat or plate</option>
                                                            <option value="Chemical pipe">Chemical pipe</option>
                                                        </select>
                                                        <div *ngIf="submitted && h.get('earthElectrodeTypeInOb')?.errors" class="invalid-feedback">
                                                            <div *ngIf="h.get('earthElectrodeTypeInOb')?.errors?.required">Type of earth electrode observation is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea type="text" class="form-control" [readonly]="isEditable"
                                                            formControlName="earthElectrodeTypeInRem"
                                                            placeholder="Please enter Remarks here"></textarea>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="width: 1rem;text-align: center;">4.{{x+1}}(i)</td>
                                                <td style="width: 24rem;">Size/cross section area of earth electrode</td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea type="text" class="form-control" [readonly]="isEditable"
                                                            formControlName="earthElectrodeSizeInOb"
                                                            placeholder="Please enter observation here (Optional)"></textarea>
                                                    </div>
                                                </td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea type="text" class="form-control" [readonly]="isEditable"
                                                            formControlName="earthElectrodeSizeInRem"
                                                            placeholder="Please enter Remarks here"></textarea>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                    
                                                <td style="width: 1rem;text-align: center;">4.{{x+1}}(j)</td>
                                                <td style="width: 24rem;">Length/Depth of earth electrode in meters</td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-list-ol"></i>
                                                            </span>
                                                        </div>
                                                        <input onwheel="this.blur()" (keypress)="keyPressNumbers1($event)" (change)="decimalConversion1($event,h)" class="form-control"
                                                            [readonly]="isEditable" formControlName="earthElectrodeLengthingOb"
                                                            placeholder="Please Length/Depth of earth electrode in meters here"
                                                            [ngClass]="{ 'is-invalid': submitted && h.get('earthElectrodeLengthingOb')?.errors}"
                                                            style="height: 3rem;">
                                                        <div *ngIf="submitted && h.get('earthElectrodeLengthingOb')?.errors" class="invalid-feedback">
                                                            <div *ngIf="h.get('earthElectrodeLengthingOb')?.errors?.required">
                                                                Length of earth electrode observation is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="width: 43rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea type="text" class="form-control" [readonly]="isEditable"
                                                            formControlName="earthElectrodeLengthingRem"
                                                            placeholder="Please enter Remarks here"></textarea>
                                                    </div>
                                                </td>
                                            </tr>
                                            <div class="row" style="float: right;margin-right: 10px;" >
                                                <mat-icon style="cursor: pointer;padding: 0px 33px 0px 0px;" 
                                                   [ngClass]="{'disableForm':isEditable}" title="Add above fields"
                                                    *ngIf="earthingDescriptionListControls(a).length == x+1" (click)="addItemTypeAEarthing(a)">add_box
                                                </mat-icon>
                                    
                                                <mat-icon class="mousechange" class="dlt" type="button" title="Delete above fields"
                                                   [ngClass]="{'disableForm':isEditable}"
                                                    *ngIf="earthingDescriptionListControls(a).length > 1" (click)="removeItemTypeAEarthing(a,x,q)"
                                                    style="cursor: pointer;float: right;">remove_circle_outline</mat-icon>
                                            </div>
                                        </div>
                                    </div>

                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(k)</td>
                                        <td style="width: 24rem;">Maximum distance between earth electrode and wall in meters</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'earthelectMaxiDistWallInRem');decimalConversion($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistWallInOb" placeholder="Please enter Maximum distance between earth electrode and wall in meters here"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectMaxiDistWallInOb')?.errors}" style="height: 3rem;">
                                                <div *ngIf="submitted && a.get('earthelectMaxiDistWallInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthelectMaxiDistWallInOb')?.errors?.required">
                                                        Maximum distance between earth electrode and wall observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable || a.get('earthelectMaxiDistWallInRem')?.value ==='To avoid step potential and touch potential distance should be more than 1 meter'" formControlName="earthelectMaxiDistWallInRem" 
                                                    placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(l)</td>
                                        <td style="width: 24rem;">Minimum distance between earth electrode and wall in meters</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'earthelectManimumDistanceWallInRem');decimalConversion($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManimumDistanceWallInOb"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectManimumDistanceWallInOb')?.errors}" placeholder="Please enter Minimum distance between earth electrode and wall in meters here" style="height: 3rem;">
                                                <div *ngIf="submitted && a.get('earthelectManimumDistanceWallInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div
                                                        *ngIf="a.get('earthelectManimumDistanceWallInOb')?.errors?.required">
                                                        Minimum distance between earth electrode and wall observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable || 
                                                    a.get('earthelectManimumDistanceWallInRem')?.value 
                                                    ==='To avoid step potential and touch potential distance should be more than 1 meter'" 
                                                    formControlName="earthelectManimumDistanceWallInRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(m)</td>
                                        <td style="width: 24rem;">Maximum distance between earth electrodes in meters (in case of multiple rods in one location)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers1($event)" (change)="decimalConversion($event,a)" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistOb" placeholder="Please enter Maximum distance between earth electrodes in meters here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectMaxiDistOb')?.errors}">
                                                <div *ngIf="submitted && a.get('earthelectMaxiDistOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthelectMaxiDistOb')?.errors?.required">
                                                        Maximum distance between earth electrodes observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectMaxiDistRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(n)</td>
                                        <td style="width: 24rem;">Minimum distance between earth electrodes in meters (in case of multiple rods in one location)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers1($event)" (change)="decimalConversion($event,a)" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManiDistOb" placeholder="Please enter Minimum distance between earth electrodes in meters here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('earthelectManiDistOb')?.errors}">
                                                <div *ngIf="submitted && a.get('earthelectManiDistOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('earthelectManiDistOb')?.errors?.required">
                                                        Minimum distance between earth electrodes observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="earthelectManiDistRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(o)</td>
                                        <td style="width: 24rem;">Total number of earthing electrodes</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalNumberOfElectrodeOb" placeholder="Please enter Total number of earthing electrodes here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('totalNumberOfElectrodeOb')?.errors}">
                                                <div *ngIf="submitted && a.get('totalNumberOfElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('totalNumberOfElectrodeOb')?.errors?.required">
                                                        Total number of earthing electrodes observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;"> 
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalNumberOfElectrodeRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(p)</td>
                                        <td style="width: 24rem;">Number of earthing electrode inspected</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedNoOb" placeholder="Please enter Number of earthing electrode inspected here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedNoOb')?.errors}">
                                                <div *ngIf="submitted && a.get('inspectedNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedNoOb')?.errors?.required">Number of earthing electrode inspected observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedNoRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(q)</td>
                                        <td style="width: 24rem;">Number of inspection passed</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedPassedNoOb" placeholder="Please enter Number of inspection passed here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedPassedNoOb')?.errors}">
                                                <div *ngIf="submitted && a.get('inspectedPassedNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedPassedNoOb')?.errors?.required">
                                                        Number of inspection passed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedPassedNoRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 1rem;text-align: center;">4(r)</td>
                                        <td style="width: 24rem;">Number of inspection failed (loose rods/pipe in soil are also considered as a failure in all tests)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedFailedNoOb" (change)="typeAEarthingValidationChangeR($event,a)" placeholder="Please enter Number of inspection failed here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedFailedNoOb')?.errors}">
                                                <div *ngIf="submitted && a.get('inspectedFailedNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedFailedNoOb')?.errors?.required">
                                                        Number of inspection failed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('inspectedFailedNoRem')?.errors}"
                                                    [readonly]="isEditable" formControlName="inspectedFailedNoRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                                    <div *ngIf="submitted && a.get('inspectedFailedNoRem')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectedFailedNoRem')?.errors?.required">
                                                            Remarks is required</div>
                                                            </div>
                                            </div>
                                        </td>
                                    </tr>
                                </div>
                                <!-- <mat-icon class="mousechange" class="add" type="button"  (click)="submit1()" *ngIf="earthingDescriptionarr().length == j+1"
                                    style="margin-inline: 1rem;float: right;position: relative;"  title="add another Section" [ngClass]="{'disableForm':isEditable}"
                                  >add_box</mat-icon>
                                <mat-icon class="mousechange" class="dlt" type="button" title="delete"  *ngIf="earthingDescriptionarr().length > 1"
                                    (click)="removeItem1(a,j)"
                                    style="margin-inline: 0rem;float: right;position: relative;" [ngClass]="{'disableForm':isEditable}">delete</mat-icon> -->
                            </tbody>
                        </table>
                    </div>
                    </div>
                </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="clamps[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Clamps</h3>
                        </mat-panel-title>
                           
                    </mat-expansion-panel-header>
                    <!-- <div>
                         <select class="form-control" style="width: 30%;" 
                                (change)="onChangeClamps($event,q)">
                                <option value="" selected>Select Option</option>
                                <option value="Applicable" >Applicable </option>
                                <option value="Not applicable" >Not applicable</option>
                                </select>
                            </div> -->
                            <div class="table-responsive" style="overflow-x: unset;">
                                <table class="table TableBorder">
                                    <thead>
                                        <th>Availability of Clamps</th>
                                        <th>Remarks</th>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <select class="form-control" (change)="onChangeClamps($event,q,j)" [attr.disabled]="isEditable ? '' : null" formControlName="earthingClampsAvailabilityOb"
                                                [ngClass]="{ 'is-invalid': submitted && q.get('earthingClampsAvailabilityOb')?.errors }">
                                                    <option value="" selected>Select Option</option>
                                                    <option value="Applicable" >Applicable</option>
                                                    <option value="Not applicable">Not applicable</option>
                                                </select>
                                                <div *ngIf="submitted && q.get('earthingClampsAvailabilityOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="q.get('earthingClampsAvailabilityOb')?.errors?.required">Please select the field</div>
                                                </div>
                                            </td>
                                            <td>
                                                <textarea [readonly]="isEditable" formControlName="earthingClampsAvailabilityRem" type="text"
                                                    class="form-control" ></textarea>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div style="margin-top: 10px;" *ngIf="applicableClampsNote[j]"><b>Note:</b> &nbsp; Select applicable if you intend to fill details for Clamps</div>
                            <br> 
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;" *ngIf="applicableClamps[j]">
                        <table class="table TableBorder">
                                <tbody formArrayName="earthingClamps" *ngFor="let a of earthingClampsarr(q); let j = index">
                                    <div class="form-group" [formGroupName]="j">
                                        <thead>
                                            <th>SI.No</th>
                                            <th>Description</th>
                                            <th>Observation</th>
                                            <th>Remarks</th>
                                        </thead>
                                        <tr>
                                            <td style="width: 1rem; text-align: center;">5(a)</td>
                                            <td style="width: 24rem;">Physical inspection (damage/break/corroded)</td>
                                            <td style="width: 43rem;">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control" formControlName="physicalInspectionInOb" [attr.disabled]="isEditable ? '' : null" (change)="clampsValidationChange($event,a,'psysicalInspectionInRem')" placeholder="Please enter Physical inspection here"
                                                         [ngClass]="{ 'is-invalid': submitted && a.get('physicalInspectionInOb')?.errors}" style="height: 3rem;">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Physically good" >Physically good</option>
                                                            <option value="Not good" >Not good</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('physicalInspectionInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('physicalInspectionInOb')?.errors?.required">
                                                            Physical inspection observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td style="width: 43rem;">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('psysicalInspectionInRem')?.errors}"
                                                        [readonly]="isEditable" formControlName="psysicalInspectionInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                        <div *ngIf="submitted && a.get('psysicalInspectionInRem')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('psysicalInspectionInRem')?.errors?.required">Remarks is required</div>
                                                        </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: center;">5(b)</td>
                                            <td>Clamp is firmly fixed/mounted on to earth electrode</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control"  formControlName="clampsFirmlyOb" [attr.disabled]="isEditable ? '' : null" placeholder="Please enter Clamp is firmly fixed/mounted on to earth electrode here"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('clampsFirmlyOb')?.errors}" style="height: 3rem;">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="YES" >Yes</option>
                                                            <option value="NO" >No</option>
                                                        </select>
                                                        <div *ngIf="submitted && a.get('clampsFirmlyOb')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('clampsFirmlyOb')?.errors?.required">Clamp is firmly fixed observation is required</div>
                                                        </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="clampsFirmlyRem" placeholder="Please enter Remarks here"></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(c)</td>
                                            <td>Interconnection of earthing conductor with clamp (tight/loose/corroded)</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control"  formControlName="interConnectOfEarthClampInOb" (change)="clampsValidationChange($event,a,'interConnectOfEarthClampInRem')" placeholder="Please enter Interconnection of earthing conductor with clamp here" 
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('interConnectOfEarthClampInOb')?.errors}" [attr.disabled]="isEditable ? '' : null" style="height: 3rem;">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Physically good" >Physically good</option>
                                                            <option value="Not good" >Not good</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('interConnectOfEarthClampInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('interConnectOfEarthClampInOb')?.errors?.required">Interconnection of earthing conductor with clamp observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('interConnectOfEarthClampInRem')?.errors}"
                                                        [readonly]="isEditable" formControlName="interConnectOfEarthClampInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                        <div *ngIf="submitted && a.get('interConnectOfEarthClampInRem')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('interConnectOfEarthClampInRem')?.errors?.required">
                                                            Remarks is required</div>
                                                            </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(d)</td>
                                            <td>Type of clamp</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control"  formControlName="typeOfClampsInOb" placeholder="Please enter Type of clamp here" [attr.disabled]="isEditable ? '' : null"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('typeOfClampsInOb')?.errors}" style="height: 3rem;">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Universal" >Universal</option>
                                                            <option value="Bonding" >Bonding</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('typeOfClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('typeOfClampsInOb')?.errors?.required">
                                                            Type of clamp observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="typeOfClampsInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(e)</td>
                                            <td>Material of clamp</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                        <select class="form-control"  formControlName="materialOfClampsInOb" placeholder="Please enter Material of clamp here" 
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('materialOfClampsInOb')?.errors}" [attr.disabled]="isEditable ? '' : null" style="height: 3rem;">
                                                            <option  value="" selected>Select Option</option>
                                                            <option value="Copper" >Copper</option>
                                                            <option value="Copper bonded steel" >Copper bonded steel</option>
                                                            <option value="Aluminum" >Aluminum</option>
                                                            <option value="Galvanised Iron" >Galvanised Iron</option>
                                                            <option value="Galvanised Steel" >Galvanised Steel</option>
                                                            <option value="Mild Steel" >Mild Steel</option>
                                                            <option value="Cast Iron" >Cast Iron</option>
                                                            <option value="Brass" >Brass</option>
                                                        </select>
                                                    <div *ngIf="submitted && a.get('materialOfClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('materialOfClampsInOb')?.errors?.required">
                                                            Material of clamp observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="materialOfClampsInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(f)</td>
                                            <td>Total number of clamps</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-list-ol"></i>
                                                        </span>
                                                    </div>
                                                    <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                        [readonly]="isEditable" formControlName="totalNoClampsInOb" placeholder="Please enter Total number of clamps here" style="height: 3rem;"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('totalNoClampsInOb')?.errors}">
                                                    <div *ngIf="submitted && a.get('totalNoClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('totalNoClampsInOb')?.errors?.required">
                                                            Total number of clamps observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control" 
                                                        [readonly]="isEditable" formControlName="totalNoClampsInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(g)</td>
                                            <td>Number of clamps inspected</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-list-ol"></i>
                                                        </span>
                                                    </div>
                                                    <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectedClampsInOb" placeholder="Please enter Number of clamps inspected here" style="height: 3rem;"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('inspectedClampsInOb')?.errors}">
                                                    <div *ngIf="submitted && a.get('inspectedClampsInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectedClampsInOb')?.errors?.required">
                                                            Number of clamps inspected observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectedClampsInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(h)</td>
                                            <td>Number of inspections passed</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-list-ol"></i>
                                                        </span>
                                                    </div>
                                                    <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                        [readonly]="isEditable" formControlName="inspectionPassedInOb" placeholder="Please Number of inspections passed here" style="height: 3rem;"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('inspectionPassedInOb')?.errors}">
                                                    <div *ngIf="submitted && a.get('inspectionPassedInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectionPassedInOb')?.errors?.required">
                                                            Number of inspections passed observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control" 
                                                        [readonly]="isEditable" formControlName="inspectionPassedInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5(i)</td>
                                            <td>Number of inspections failed</td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-list-ol"></i>
                                                        </span>
                                                    </div>
                                                    <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control" (change)="clampsValidationChange($event,a,'inspectionFailedInRem')"
                                                        [readonly]="isEditable" formControlName="inspectionFailedInOb" placeholder="Please enter Number of inspections failed here" style="height: 3rem;"
                                                        [ngClass]="{ 'is-invalid': submitted && a.get('inspectionFailedInOb')?.errors}">
                                                    <div *ngIf="submitted && a.get('inspectionFailedInOb')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectionFailedInOb')?.errors?.required">
                                                            Number of inspections failed observation is required</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="bi bi-text-paragraph"></i>
                                                        </span>
                                                    </div>
                                                    <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('inspectionFailedInRem')?.errors}"
                                                        [readonly]="isEditable" formControlName="inspectionFailedInRem" placeholder="Please enter Remarks here"
                                                        ></textarea>
                                                        <div *ngIf="submitted && a.get('inspectionFailedInRem')?.errors"
                                                        class="invalid-feedback">
                                                        <div *ngIf="a.get('inspectionFailedInRem')?.errors?.required">
                                                            Remarks is required</div>
                                                            </div>
                                                    </div>
                                            </td>
                                        </tr>
                                    </div>
                                    <!-- <mat-icon class="mousechange" class="add" type="button" [ngClass]="{'disableForm':isEditable}" (click)="submit2()" *ngIf="earthingClampsarr().length == j+1"
                                    style="margin-inline: 1rem;float: right;position: relative;"  title="add another Section"
                                  >add_box</mat-icon>
                                <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':isEditable}" title="delete" *ngIf="earthingClampsarr().length > 1"
                                    (click)="removeItem2(a,j)"
                                    style="margin-inline: 0rem;float: right;position: relative;">delete</mat-icon> -->
                                </tbody>
                            </table>
                    </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="earthelectrodechambers[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Earth electrode chambers</h3>
                        </mat-panel-title>
                           
                    </mat-expansion-panel-header>
                    <!-- <div>
                        <select class="form-control" style="width: 30%;" 
                                (change)="onChangeChambers($event,q)">
                                <option value="" selected>Select Option</option>
                                <option value="Applicable" >Applicable </option>
                                <option value="Not applicable" >Not applicable</option>
                                </select>
                    </div> -->
                    <div class="table-responsive" style="overflow-x: unset;">
                        <table class="table TableBorder">
                            <thead>
                                <th>Availability of Chambers</th>
                                <th>Remarks</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <select class="form-control"  (change)="onChangeChambers($event,q,j)" [attr.disabled]="isEditable ? '' : null" formControlName="earthingElectrodeChamberAvailabilityOb"
                                        [ngClass]="{ 'is-invalid': submitted && q.get('earthingElectrodeChamberAvailabilityOb')?.errors }">
                                            <option value="" selected>Select Option</option>
                                            <option value="Applicable" >Applicable </option>
                                            <option value="Not applicable" >Not applicable</option>
                                        </select>
                                        <div *ngIf="submitted && q.get('earthingElectrodeChamberAvailabilityOb')?.errors" class="invalid-feedback">
                                            <div *ngIf="q.get('earthingElectrodeChamberAvailabilityOb')?.errors?.required">Please select the field</div>
                                        </div>
                                    </td>
                                    <td>
                                        <textarea [readonly]="isEditable" formControlName="earthingElectrodeChamberAvailabilityRem" type="text"
                                            class="form-control" placeholder="Please enter Remarks here"></textarea>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>  
                    <div style="margin-top: 10px;" *ngIf="applicableChambersNote[j]"><b>Note:</b> &nbsp; Select applicable if you intend to fill details for Earth electrode chambers</div>
                            <br>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;" *ngIf="applicableChambers[j]">
                        <table class="table TableBorder">
                            <tbody formArrayName="earthingElectrodeChamber"
                                *ngFor="let a of earthElectrodeChambearr(q); let j = index">
                                <div class="form-group" [formGroupName]="j">
                                    <thead>
                                        <th>SI.No</th>
                                        <th>Description</th>
                                        <th>Observation</th>
                                        <th>Remarks</th>
                                    </thead>
                                    <tr>
                                        <td style="width: 1rem; text-align: center;">6(a)</td>
                                        <td style="width: 24rem;">Physical inspection (damage/break/corroded)</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control"  formControlName="physicalInspeOb"(change)="clampsValidationChange($event,a,'physicalInspeRem')" [attr.disabled]="isEditable ? '' : null"
                                                       [ngClass]="{ 'is-invalid': submitted && a.get('physicalInspeOb')?.errors}" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Physically good" >Physically good</option>
                                                        <option value="Not good" >Not good</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('physicalInspeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('physicalInspeOb')?.errors?.required">Physical inspection observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('physicalInspeRem')?.errors}"
                                                    [readonly]="isEditable" formControlName="physicalInspeRem" placeholder="Please enter Remarks here"></textarea>
                                                    <div *ngIf="submitted && a.get('physicalInspeRem')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('physicalInspeRem')?.errors?.required">
                                                       Remarks is required</div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(b)</td>
                                        <td>Type of chamber (concrete/metal/plastic)</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control"  formControlName="chamberTypeOb"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('chamberTypeOb')?.errors}" [attr.disabled]="isEditable ? '' : null" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Concrete" >Concrete</option>
                                                        <option value="Metal" >Metal</option>
                                                        <option value="Plastic" >Plastic</option>
                                                        <option value="Brick wall construction" >Brick wall construction</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('chamberTypeOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="a.get('chamberTypeOb')?.errors?.required">Type of chamber observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberTypeRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(c)</td>
                                        <td>Size of chamber (length x width x depth)</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberSizeOb" placeholder="Please enter observation here (Optional)"></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberSizeRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(d)</td>
                                        <td>Maximum withstand load</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumWithStandLoadOb" placeholder="Please enter observation here (Optional)"></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumWithStandLoadRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(e)</td>
                                        <td>Location of chamber</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control"  formControlName="chamberLocationOb" [attr.disabled]="isEditable ? '' : null" [ngClass]="{ 'is-invalid': submitted && a.get('chamberLocationOb')?.errors}" style="height: 3rem;">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Walk pathway" >Walk pathway</option>
                                                    <option value="Vehicle runway" >Vehicle runway</option>
                                                    <option value="Neither both" >Neither both</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('chamberLocationOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('chamberLocationOb')?.errors?.required">
                                                        Location of chamber observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="text-align: center;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="chamberLocationRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(f)</td>
                                        <td>Chamber is properly placed in soil and numbered</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                    <select class="form-control"  formControlName="maximumPlacedSoilOb" [attr.disabled]="isEditable ? '' : null"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('maximumPlacedSoilOb')?.errors}" style="height: 3rem;">
                                                        <option  value="" selected>Select Option</option>
                                                        <option value="Yes" >Yes</option>
                                                        <option value="No" >No</option>
                                                        <option value="Placed, but no numbering" >Placed, but no numbering</option>
                                                    </select>
                                                <div *ngIf="submitted && a.get('maximumPlacedSoilOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('maximumPlacedSoilOb')?.errors?.required">
                                                        Chamber is properly placed in soil and numbered observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="text-align: center;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="maximumPlacedSoilRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(g)</td>
                                        <td>Total number of chambers</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalChamberNoOb" placeholder="Please enter Total number of chambers here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('totalChamberNoOb')?.errors}">
                                                <div *ngIf="submitted && a.get('totalChamberNoOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('totalChamberNoOb')?.errors?.required">Total number of chambers observation
                                                        is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="totalChamberNoRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(h)</td>
                                        <td>Number of chambers inspected</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectedChamberInOb" placeholder="Please Number of chambers inspected here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectedChamberInOb')?.errors}">
                                                <div *ngIf="submitted && a.get('inspectedChamberInOb')?.errors" class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectedChamberInOb')?.errors?.required">Number of chambers inspected observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable" formControlName="inspectedChamberInRem" 
                                                placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(i)</td>
                                        <td>Number of inspections passed</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectionPassedInOb" placeholder="Please enter Number of inspections passed here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectionPassedInOb')?.errors}">
                                                <div *ngIf="submitted && a.get('inspectionPassedInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectionPassedInOb')?.errors?.required">
                                                        Number of inspections passed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="inspectionPassedInRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">6(j)</td>
                                        <td>Number of inspections failed</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (keypress)="keyPressNumbers($event)" class="form-control"  (change)="clampsValidationChange($event,a,'inspectionFailedInRem')"
                                                    [readonly]="isEditable" formControlName="inspectionFailedInOb" placeholder="Please Number of inspections failed here" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('inspectionFailedInOb')?.errors}">
                                                <div *ngIf="submitted && a.get('inspectionFailedInOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectionFailedInOb')?.errors?.required">
                                                        Number of inspections failed observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && a.get('inspectionFailedInRem')?.errors}"
                                                    [readonly]="isEditable" formControlName="inspectionFailedInRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                                    <div *ngIf="submitted && a.get('inspectionFailedInRem')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('inspectionFailedInRem')?.errors?.required">
                                                        Remarks is required</div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </div>
                                <!-- <mat-icon class="mousechange" class="add" type="button" [ngClass]="{'disableForm':isEditable}" (click)="submit3()" *ngIf="earthElectrodeChambearr().length == j+1"
                                    style="margin-inline: 1rem;float: right;position: relative;"  title="add another Section"
                                  >add_box</mat-icon>
                                <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':isEditable}" title="delete" *ngIf="earthElectrodeChambearr().length > 1"
                                    (click)="removeItem3(a,j)"
                                    style="margin-inline: 0rem;float: right;position: relative;">delete</mat-icon> -->
                            </tbody>
                        </table>
                    </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel  *ngIf="typeBearthingsystem[j]">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Type-B earthing system</h3>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                    <div class="col-sm-12">
                    <div class="table-responsive" style="overflow-x: unset;">
                        <table class="table TableBorder">
                            <tbody formArrayName="earthingSystem" *ngFor="let a of earthingSystemarr(q); let j = index">
                                <div class="form-group" [formGroupName]="j">
                                    <thead>
                                        <th>SI.No</th>
                                        <th>Description</th>
                                        <th>Observation</th>
                                        <th>Remarks</th>
                                    </thead>
                                    
                                    <tr>
                                    <td colspan="4">
                                        <label> 7(a).Earth electrode must be buried atleast 0.5m depth and 1m distance from external wall as closed loop.</label>
                                    </td>
                                    </tr>

                                    <tr>
                                        <td rowspan="5" style="text-align: center;">7(b)</td>
                                        <td>Depth of electrode from ground level in meters</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>East</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'eastRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control" [readonly]="isEditable" formControlName="eastOb" placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('eastOb')?.errors}">
                                                <div *ngIf="submitted && a.get('eastOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('eastOb')?.errors?.required">East observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable ||  a.get('eastRem')?.value ==='As per latest standard IS/IEC 62305, depth should be 0.5 meter or more'" formControlName="eastRem"
                                                placeholder="Please enter Remarks here"  ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>West</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'westRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control" [readonly]="isEditable" formControlName="westOb"
                                                placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('westOb')?.errors}">
                                                <div *ngIf="submitted && a.get('westOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('westOb')?.errors?.required">West observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable || 
                                                a.get('westRem')?.value 
                                                ==='As per latest standard IS/IEC 62305, depth should be 0.5 meter or more'" formControlName="westRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>North</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'northRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control" [readonly]="isEditable" formControlName="northOb"
                                                placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('northOb')?.errors}">
                                                <div *ngIf="submitted && a.get('northOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('northOb')?.errors?.required">North observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control" [readonly]="isEditable || 
                                                a.get('northRem')?.value 
                                                ==='As per latest standard IS/IEC 62305, depth should be 0.5 meter or more'" formControlName="northRem"
                                                placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>South</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'southRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control" [readonly]="isEditable" formControlName="southOb"
                                                placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('southOb')?.errors}">
                                                <div *ngIf="submitted && a.get('southOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('southOb')?.errors?.required">South observation is
                                                        required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"  [readonly]="isEditable || 
                                                a.get('southRem')?.value 
                                                ==='As per latest standard IS/IEC 62305, depth should be 0.5 meter or more'" formControlName="southRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td rowspan="5" style="text-align: center;">7(c)</td>
                                        <td>Distance of ring earthing from wall in meters</td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>East</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'ringWallEarthEastRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthEastOb" placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthEastOb')?.errors}">
                                                <div *ngIf="submitted && a.get('ringWallEarthEastOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthEastOb')?.errors?.required">
                                                        East observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                [readonly]="isEditable || 
                                                a.get('ringWallEarthEastRem')?.value 
                                                ==='To avoid step potential and touch potential distance should be more than 1 meter'"  formControlName="ringWallEarthEastRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>West</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()"  (change)="checkEarthelectMaxiDistWallInOb($event,a,'ringWallEarthWestRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthWestOb" placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthWestOb')?.errors}">
                                                <div *ngIf="submitted && a.get('ringWallEarthWestOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthWestOb')?.errors?.required">
                                                        West observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                [readonly]="isEditable || 
                                                a.get('ringWallEarthWestRem')?.value 
                                                ==='To avoid step potential and touch potential distance should be more than 1 meter'" formControlName="ringWallEarthWestRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>North</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input type="text"onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'ringWallEarthNorthRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthNorthOb" placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthNorthOb')?.errors}">
                                                <div *ngIf="submitted && a.get('ringWallEarthNorthOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthNorthOb')?.errors?.required">
                                                        North observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                [readonly]="isEditable || 
                                                a.get('ringWallEarthNorthRem')?.value 
                                                ==='To avoid step potential and touch potential distance should be more than 1 meter'"  formControlName="ringWallEarthNorthRem" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>South</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-list-ol"></i>
                                                    </span>
                                                </div>
                                                <input onwheel="this.blur()" (change)="checkEarthelectMaxiDistWallInOb($event,a,'ringWallEarthSouthRem');decimalConversion2($event,a)" (keypress)="keyPressNumbers1($event)" class="form-control"
                                                    [readonly]="isEditable" formControlName="ringWallEarthSouthOb" placeholder="The value must be a number" style="height: 3rem;"
                                                    [ngClass]="{ 'is-invalid': submitted && a.get('ringWallEarthSouthOb')?.errors}">
                                                <div *ngIf="submitted && a.get('ringWallEarthSouthOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('ringWallEarthSouthOb')?.errors?.required">
                                                        South observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                [readonly]="isEditable || 
                                                a.get('ringWallEarthSouthRem')?.value 
                                                ==='To avoid step potential and touch potential distance should be more than 1 meter'" formControlName="ringWallEarthSouthRem" placeholder="Please enter Remarks here" ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(d)</td>
                                        <td style="width: 24rem;">Type B ring earth electrode connected to reinforcement steel</td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control"  formControlName="connectedEarthElectrodeOb" [attr.disabled]="isEditable ? '' : null"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('connectedEarthElectrodeOb')?.errors}" style="height: 3rem;">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Every 5 meters" >Every 5 meters</option>
                                                    <option value="Every 10 meters" >Every 10 meters</option>
                                                    <option value="Other distance" >Other distance</option>
                                                    <option value="Connected only to every down conductor and no connection to foundation steel" >Connected only to every down conductor and no connection to foundation steel</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('connectedEarthElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('connectedEarthElectrodeOb')?.errors?.required">
                                                        Type B ring earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 43rem;">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" [readonly]="isEditable" formControlName="connectedEarthElectrodeRem" class="form-control" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(e)</td>
                                        <td>Type of Joints</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control"  formControlName="jointsMadeBrazingOb" [attr.disabled]="isEditable ? '' : null"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('jointsMadeBrazingOb')?.errors}" style="height: 3rem;">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Brazing" >Brazing</option>
                                                    <option value="Welding" >Welding</option>
                                                    <option value="Crimping" >Crimping</option>
                                                    <option value="Seaming" >Seaming</option>
                                                    <option value="Screwing" >Screwing</option>
                                                    <option value="Bolting (connectors)" >Bolting (connectors)</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('jointsMadeBrazingOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('jointsMadeBrazingOb')?.errors?.required">
                                                        Type of Joints observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="jointsMadeBrazingRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(f)</td>
                                        <td>Material of earth electrode</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control"  formControlName="materialOfEartElectrodeOb" [attr.disabled]="isEditable ? '' : null"
                                                 [ngClass]="{ 'is-invalid': submitted && a.get('materialOfEartElectrodeOb')?.errors}" style="height: 3rem;">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Copper" >Copper</option>
                                                    <option value="Copper bonded steel" >Copper bonded steel</option>
                                                    <option value="Aluminum" >Aluminum</option>
                                                    <option value="Stainless Steel" >Stainless Steel</option>
                                                    <option value="Galvanised Iron" >Galvanised Iron</option>
                                                    <option value="Galvanised Steel" >Galvanised Steel</option>
                                                    <option value="Mild Steel" >Mild Steel</option>
                                                    <option value="Cast Iron" >Cast Iron</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('materialOfEartElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('materialOfEartElectrodeOb')?.errors?.required">
                                                        Material of earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="materialOfEartElectrodeRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                                    
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center;">7(g)</td>
                                        <td>Type of earth electrode</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <select class="form-control"  formControlName="typeOfEarthElectrodeOb" [attr.disabled]="isEditable ? '' : null"
                                                [ngClass]="{ 'is-invalid': submitted && a.get('typeOfEarthElectrodeOb')?.errors}" style="height: 3rem;">
                                                    <option  value="" selected>Select Option</option>
                                                    <option value="Rod" >Rod</option>
                                                    <option value="Pipe" >Pipe</option>
                                                    <option value="Flat" >Flat</option>
                                                    <option value="Chemical pipe" >Chemical pipe</option>
                                                </select>
                                                <div *ngIf="submitted && a.get('typeOfEarthElectrodeOb')?.errors"
                                                    class="invalid-feedback">
                                                    <div *ngIf="a.get('typeOfEarthElectrodeOb')?.errors?.required">
                                                        Type of earth electrode observation is required</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" class="form-control"
                                                    [readonly]="isEditable" formControlName="typeOfEarthElectrodeRem" placeholder="Please enter Remarks here"
                                                    ></textarea>
                                            </div>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="text-align: center;">7(h)</td>
                                        <td>Size(cross section area/diameter/thickness) of earth electrode</td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea class="form-control" [readonly]="isEditable" formControlName="sizeOfEarthElectrodeOb" placeholder="Please enter observation here (Optional)"></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-text-paragraph"></i>
                                                    </span>
                                                </div>
                                                <textarea type="text" [readonly]="isEditable" formControlName="sizeOfEarthElectrodeRem" class="form-control" placeholder="Please enter Remarks here"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                </div>
                            </tbody>
                        </table>
                    </div>
                    </div>
                    </div>
                </mat-expansion-panel>

                <mat-expansion-panel *ngIf="availabilityOfPreviousReport == 'No'">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <h3>Testing of Earth Electrodes</h3>
                            
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="table-responsive" style="overflow-x: unset;">
                        <table class="table TableBorder">
                            <thead>
                                <th>Availability of Testing of Earth Electrodes</th>
                                <th>Remarks</th>
                            </thead>
                            <tr>
                                <td class="col-md-6">
                                    <select class="form-control" [attr.disabled]="isEditable ? '' : null" formControlName="earthingElectrodeTestingAvailabilityOb"
                                    [ngClass]="{ 'is-invalid': submitted && q.get('earthingElectrodeTestingAvailabilityOb')?.errors}" (change)="onEarthElectrodes($event,q,j)" style="height: 3rem;margin-top: 6px;">
                                    <option value="" selected>Select Option</option>
                                    <option value="In scope" >In scope </option>
                                    <option value="Not in scope" >Not in scope</option>
                                    </select>
                                    <div *ngIf="submitted && q.get('earthingElectrodeTestingAvailabilityOb')?.errors" class="invalid-feedback">
                                        <div *ngIf="q.get('earthingElectrodeTestingAvailabilityOb')?.errors?.required">In scope/Not in scope is required</div>
                                    </div>
                                </td>
                                <td class="col-md-6">
                                    <textarea [readonly]="isEditable" formControlName="earthingElectrodeTestingAvailabilityRem" type="text"
                                        placeholder="Please enter Remarks here"  class="form-control" ></textarea>
                                </td>
                            </tr>  
                        </table>
                    </div>

                    <div *ngIf="testingofearthelectrodes[j]">    
                        <div class="row">
                            <div class="col-md-6">
                                <label style="margin-top: 2rem;">8(a).Earth electrode resistance value (Table heading)</label>
                            </div>
                        </div>
                        <div class="row" style="margin-top: 10px;" >
                            <div class="col-sm-12">
                            <div class="table-responsive" style="overflow-x: unset;">
                                <table class="table TableBorder">
                                    <tbody>
                                        <thead>
                                            <th style="width: 7rem;">SI.No</th>
                                            <th style="width: 13rem;">Types of earth electrode (rod/ pipe/ flat/ chemical pipe)</th>
                                            <th style="width: 13rem;">Material of earth elctrode (copper/ copper bonded steel/ galvanised steel/ galvanised iron/ cast iron)</th>
                                            <th style="width: 12rem;">Size(diameter)of earth electrode (mm)
                                                <div style="float: right;">
                                                <mat-icon style="font-size: 18px;margin-top: 14px;margin-right: 64px;float: right;"
                                                matTooltip="Information to user: incase of 1. rod -diameter (mm)/cross sectional area (sq.mm), 2. pipe- inner&outer diameter (mm), 3.flat - cross sectional area (sq.mm), 4. chemical pipe-diameter (mm)"
                                                matTooltipClass="multiline-tooltip"
                                                aria-label="Button that shows a red tooltip"
                                                class="example-button">info_outline
                                                </mat-icon>
                                                </div></th>
                                            <th style="width: 14rem;">Depth /length of earth electrode (m)</th>
                                            <th style="width: 12rem;">Electrode resistance to earth in (Ω)</th>
                                            <th style="width: 22rem;">Remarks</th>
                                        </thead>
    
                                        <!-- <div formArrayName="earthElectrodeTesting" *ngFor="let a of earthElectrodeTestingarr(q); let j = index" style="margin-top: 3rem;">
                                        <div class="form-group" [formGroupName]="j"> -->
                                            
                                            <tr formArrayName="earthElectrodeTesting" *ngFor="let a of earthElectrodeTestingarr(q); let j = index">
                                                <div class="form-group" [formGroupName]="j">
                                                <td> 
                                                    <div class="input-group">
                                                        <input class="form-control" (keypress)="keyPressNumbers($event)" [readonly]="isEditable" formControlName="serialNo" placeholder="SI.No"
                                                            [ngClass]="{ 'is-invalid': submitted && a.get('serialNo')?.errors}" style="height: 3rem; width: 5rem;">
                                                        <div *ngIf="submitted && a.get('serialNo')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('serialNo')?.errors?.required">serial No is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                          
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea class="form-control" [readonly]="isEditable" formControlName="earthingElectrodeType"
                                                            [ngClass]="{ 'is-invalid': submitted && a.get('earthingElectrodeType')?.errors}"
                                                            placeholder="Types of earth electrode(rod/pipe/flat/chemical pipe)"></textarea>
                                                        <div *ngIf="submitted && a.get('earthingElectrodeType')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('earthingElectrodeType')?.errors?.required">Types of earth electrode is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                      
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea class="form-control" [readonly]="isEditable" formControlName="earthingElectrodeMaterial"
                                                            [ngClass]="{ 'is-invalid': submitted && a.get('earthingElectrodeMaterial')?.errors}"
                                                            placeholder="Material of earth elctrode (copper/copper bonded steel/galvanised steel/galvanised iron/cast iron)"></textarea>
                                                        <div *ngIf="submitted && a.get('earthingElectrodeMaterial')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('earthingElectrodeMaterial')?.errors?.required">Material of earth elctrode is required
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                        
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea class="form-control" [readonly]="isEditable" formControlName="earthingElectrodeSize" onwheel="this.blur()" (keypress)="keyPressNumbers($event)"
                                                            [ngClass]="{ 'is-invalid': submitted && a.get('earthingElectrodeSize')?.errors}"
                                                            placeholder="Information to user: incase of 1. rod -diameter (mm)/cross sectional area (sq.mm), 2. pipe- inner&outer diameter (mm), 3.flat - cross sectional area (sq.mm), 4. chemical pipe-diameter (mm)"></textarea>
                                                        <div *ngIf="submitted && a.get('earthingElectrodeSize')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('earthingElectrodeSize')?.errors?.required">Size of earth electrode is required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                     
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea class="form-control" [readonly]="isEditable" formControlName="earthingElectrodeDepth" onwheel="this.blur()" (keypress)="keyPressNumbers1($event)" (change)="decimalConversion3($event,a)"
                                                            [ngClass]="{ 'is-invalid': submitted && a.get('earthingElectrodeDepth')?.errors}"
                                                            placeholder="Depth /length of earth electrode (m)"></textarea>
                                                        <div *ngIf="submitted && a.get('earthingElectrodeDepth')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('earthingElectrodeDepth')?.errors?.required">Depth /length of earth electrode is required
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                       
                                                <td>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                        <textarea class="form-control" [readonly]="isEditable" formControlName="earthingElectrodeResistance" (change)="remarksChange($event,a,'earthingElectrodeRemarks');decimalConversion3($event,a)" onwheel="this.blur()" (keypress)="keyPressNumbers1($event)"
                                                            [ngClass]="{ 'is-invalid': submitted && a.get('earthingElectrodeResistance')?.errors}"
                                                            placeholder="Electrode resistance to earth in (Ω)"></textarea>
                                                        <div *ngIf="submitted && a.get('earthingElectrodeResistance')?.errors" class="invalid-feedback">
                                                            <div *ngIf="a.get('earthingElectrodeResistance')?.errors?.required">Electrode resistance to earth is
                                                                required</div>
                                                        </div>
                                                    </div>
                                                </td>
                                            
                                                <td style="width: 20rem;">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="bi bi-text-paragraph"></i>
                                                            </span>
                                                        </div>
                                                    <textarea class="form-control" readonly [ngClass]="{ 'is-invalid': submitted && a.get('earthingElectrodeRemarks')?.errors}" formControlName="earthingElectrodeRemarks" placeholder="Remarks"></textarea>
                                                    <div *ngIf="submitted && a.get('earthingElectrodeRemarks')?.errors" class="invalid-feedback">
                                                        <div *ngIf="a.get('earthingElectrodeRemarks')?.errors?.required">Electrode resistance to earth is
                                                            required</div>
                                                    </div>
                                                    </div>
                                                </td>

                                                <div class="row" style="float: right;" >
                                                    <mat-icon style="cursor: pointer; margin-right: 22px;" title="Add"
                                                    [ngClass]="{'disableForm':isEditable}" *ngIf="earthElectrodeTestingarr(q).length == j+1" 
                                                    (click)="addElectrodeTesting(q)">add_box</mat-icon>
            
                                                    <mat-icon class="mousechange" type="button" title="Delete" [ngClass]="{'disableForm':isEditable}" 
                                                    *ngIf="earthElectrodeTestingarr(q).length > 1" 
                                                    (click)="removeElectrodeTesting(a,j,q)" style="cursor: pointer; margin-right: 20px;">remove_circle_outline</mat-icon>
                                                </div>

                                                </div>
                                            </tr>
                                    </tbody>
                                </table>
                            </div>
                            </div>
                            
                        </div>
                    </div>
                    
                </mat-expansion-panel>
            </mat-accordion>
            </div>
            </div>
            <div *ngIf="validationError" style="text-align: center;margin-bottom: 2rem;margin-top: 2rem;">
                <span class="alert alert-danger">{{validationErrorMsg}}</span>
            </div>
            <div style="text-align: center;margin-top: 40px;margin-bottom: 20px;">
                <!-- <button class="previous" mat-button matStepperPrevious>&laquo; Back</button> -->
                <button class="next" (click)="gotoNextModal(content1,contents)" mat-button [ngClass]="{'disableForm':isEditable}">Next &raquo;</button>
           </div>
        </form>
    </div>
</div>

<ng-template #content1 let-modal>
    <!-- Spinner -->
    <mat-progress-spinner style="margin: 0 auto;" *ngIf="spinner" color="primary" [mode]="mode" value="50" diameter="50">
    </mat-progress-spinner>
    <br>
    <div *ngIf="spinner" style="text-align: center;">
        Please wait, Earthing details are loading!
    </div>
    <div class="modal-body" *ngIf="popup">
        <div class="centre-text m-btm30">
            <div *ngIf="success" style="text-align: center;">
                <span class="successshow">{{successMsg}}</span>
            </div>
            <div *ngIf="Error" style="text-align: center;">
                <span class="errorshow">{{errorMsg}}</span>
            </div>
        </div>
    </div>
    <br>
    <div *ngIf="popup" style="text-align: center;">
     <button type="button" *ngIf="success" class="close" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close"  (click)="closeModalDialog()" matStepperNext>
      <span aria-hidden="true">Ok</span>
    </button>
    <button type="button" *ngIf="Error" class="close" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close"  (click)="closeModalDialog()">
      <span aria-hidden="true">Ok</span>
    </button>
    </div>
</ng-template> 
<ng-template #contents let-modal>
    <div class="modal-body">
     <div class="centre-text m-btm30">
      <div style="text-align: center;">
        <span class="successshow">Are you sure you want to procced? </span>
        <br>
        <span style="font-size: 15px;"><b>Note:</b> Please verify all the details!</span>
       </div>
      </div>
     </div>
    <br>
    <div class="row">
       <button type="button" class="col-md-6" style="width: 5rem;position: relative;margin-left: 30%;" class="btn btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
       aria-label="Close" (click)="closeModalDialog()" matStepperNext>
       <i class="bi bi-arrow-right-circle"></i>&nbsp;
        <span aria-hidden="true">Ok</span>
    </button>
    <button type="button" class="col-md-6" style="text-align: center;width: auto;position: relative;margin-right: 30%;" class="btn btn-danger btn-rounded btn-md font-weight-medium auth-form-btn"
       aria-label="Close" (click)="closeModalDialog()">
       <i class="bi bi-x icon"></i>
        <span aria-hidden="true">Cancel</span>
    </button>
  </div>
  </ng-template>     
