<div class="card">
  <div class="card-body">
    <form [formGroup]="supplycharesteristicForm" (ngSubmit)="nextTab2()">
      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h3>Mains incoming</h3>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="form-group">
            <div class="row">
              <div class="col-md-4">
                <label>System earthing:</label>
                <select class="form-control"  formControlName="systemEarthing" [(ngModel)]="supplycharesteristic.mainSystemEarthing">
                  <option value="0" selected>Select option</option>
                  <option *ngFor="let value of systemEarthingList">
                    {{value}}
                  </option>
                </select>                            
              </div>

              <div class="col-md-4">
                  <label>Number and type of live conductors: </label>
                  <select class="form-control"  formControlName="liveConductor" [(ngModel)]="supplycharesteristic.liveConductorType" (change)="changeCurrent($event)">
                    <option value="0" selected>Select option</option>
                    <option value="AC">AC</option>
                    <option value="DC">DC</option>
                  </select>
              </div>

              <div class="col-md-4" *ngIf="enableAC">
                  <label>AC:</label>
                  <select class="form-control" formControlName="AcConductor" [(ngModel)]="supplycharesteristic.liveConductorAC">
                    <option value="0" selected>Select option</option>
                    <option value="1-phase" >1-phase</option>
                    <option value="2-wire (LN)" >2-wire (LN)</option>
                    <option value="1-phase" >1-phase</option>
                    <option value="3-wire (LLM)" >3-wire (LLM)</option>
                    <option value="2-phase" >2-phase</option>
                    <option value="3-wire (LLN)" >3-wire (LLN)</option>
                    <option value="3-phase" >3-phase</option>
                    <option value="3-wire (LLL)" >3-wire (LLL)</option>
                    <option value="3-phase" >3-phase</option>
                    <option value="4-wire (LLLN)" >4-wire (LLLN)</option>                    
                  </select>
              </div>

              <div class="col-md-4" *ngIf="enableDC">
                  <label>DC:</label>
                  <select class="form-control" formControlName="DcConductor" [(ngModel)]="supplycharesteristic.liveConductorDC">
                    <option value="0" selected>Select option</option>
                    <option value="2-pole" >2-pole</option>
                    <option value="3-pole" >3-pole</option>
                    <option value="Others" >Others</option>
                  </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <mat-form-field class="client-description " >
                <mat-label>
                  <h3>Brief note (in case of confusion)</h3>
                </mat-label>
                <textarea matInput class="client-box-description" formControlName="briefNote" [(ngModel)]="supplycharesteristic.systemEarthingBNote" maxlength="500" placeholder="Ex. Brief Note ..." ></textarea>
              </mat-form-field>
            </div>
          </div>

          <div class="row" *ngIf="tableAC">
            <div class="col" >
              <h2>Applicable for AC: (Note: Please mention NA if any column is not applicable)</h2>
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr align="center">
                        <th>Nature of supply parameters</th>
                        <th>L1-L2</th>
                        <th>L2-L3</th>
                        <th>L1-L3</th>
                        <th>L1-N</th>
                        <th>L2-N</th>
                        <th>L3-N</th>
                        <th>L1-PE</th>
                        <th>L2-PE</th>
                        <th>L3-PE</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td nowrap="nowrap">Nominal voltage U/U0 (V)</td>
                        <td><input type="text" maxlength="4"  style="width:50px" formControlName="NV1" [(ngModel)]="NV1"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV2" [(ngModel)]="NV2"></td>
                        <td><input type="text"   maxlength="4"style="width:50px" formControlName="NV3" [(ngModel)]="NV3"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV4" [(ngModel)]="NV4"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV5" [(ngModel)]="NV5"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV6" [(ngModel)]="NV6"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV7" [(ngModel)]="NV7"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV8" [(ngModel)]="NV8"></td>
                        <td><input type="text"  maxlength="4" style="width:50px" formControlName="NV9" [(ngModel)]="NV9"></td>
                      </tr>
                      <tr>
                        <td nowrap="nowrap">Nominal Frequency f (HZ)</td>
                        <td><input type="text"  maxlength="3"  style="width:50px" formControlName="NF1" [(ngModel)]="NF1"></td>
                        <td><input type="text"   maxlength="3"style="width:50px" formControlName="NF2" [(ngModel)]="NF2"></td>
                        <td><input type="text"   maxlength="3" style="width:50px" formControlName="NF3" [(ngModel)]="NF3"></td>
                        <td><input type="text"  maxlength="3" style="width:50px" formControlName="NF4" [(ngModel)]="NF4"></td>
                        <td><input type="text"  maxlength="3" style="width:50px" formControlName="NF5" [(ngModel)]="NF5"></td>
                        <td><input type="text"   maxlength="3"style="width:50px" formControlName="NF6" [(ngModel)]="NF6"></td>
                        <td><input type="text"   maxlength="3"style="width:50px" formControlName="NF7" [(ngModel)]="NF7"></td>
                        <td><input type="text"  maxlength="3" style="width:50px" formControlName="NF8" [(ngModel)]="NF8"></td>
                        <td><input type="text"  maxlength="3" style="width:50px" formControlName="NF9" [(ngModel)]="NF9"></td>
                      </tr>
                      <tr>
                        <td nowrap="nowrap">Prospective fault current Ipfc (kA) </td>
                        <td><input type="text"   maxlength="7"  style="width:50px" formControlName="PF1" [(ngModel)]="PF1"></td>
                        <td><input type="text" maxlength="7" style="width:50px" formControlName="PF2" [(ngModel)]="PF2"></td>
                        <td><input type="text"maxlength="7" style="width:50px" formControlName="PF3" [(ngModel)]="PF3"></td>
                        <td><input type="text" maxlength="7" style="width:50px" formControlName="PF4" [(ngModel)]="PF4"></td>
                        <td><input type="text" maxlength="7" style="width:50px" formControlName="PF5" [(ngModel)]="PF5"></td>
                        <td><input type="text"  maxlength="7"style="width:50px" formControlName="PF6" [(ngModel)]="PF6"></td>
                        <td><input type="text"  maxlength="7"style="width:50px" formControlName="PF7" [(ngModel)]="PF7"></td>
                        <td><input type="text" maxlength="7" style="width:50px" formControlName="PF8" [(ngModel)]="PF8"></td>
                        <td><input type="text" maxlength="7" style="width:50px" formControlName="PF9" [(ngModel)]="PF9"></td>
                      </tr>
                    
                      <tr>
                        <td nowrap="nowrap">External Loop Impedance Ze (Ω)</td>
                        <td><input type="text" maxlength="6" style="width:50px" formControlName="EL1" [(ngModel)]="EL1"></td>
                        <td><input type="text" maxlength="6" style="width:50px" formControlName="EL2" [(ngModel)]="EL2" ></td>
                        <td><input type="text"maxlength="6"  style="width:50px" formControlName="EL3" [(ngModel)]="EL3"></td>
                        <td><input type="text"  maxlength="6" style="width:50px" formControlName="EL4" [(ngModel)]="EL4"></td>
                        <td><input type="text"  maxlength="6" style="width:50px" formControlName="EL5" [(ngModel)]="EL5"></td>
                        <td><input type="text"  maxlength="6" style="width:50px" formControlName="EL6" [(ngModel)]="EL6"></td>
                        <td><input type="text" maxlength="6" style="width:50px" formControlName="EL7" [(ngModel)]="EL7"></td>
                        <td><input type="text" maxlength="6" style="width:50px" formControlName="EL8" [(ngModel)]="EL8"></td>
                        <td><input type="text" maxlength="6" style="width:50px" formControlName="EL9" [(ngModel)]="EL9"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
            </div>
          </div>

          

          <div class="row" style="margin-top: 50px;">
            <div class="col-sm-12">
              <h2>Incoming (supply) protective device characteristics:</h2>
              <table  class="table">
                <tr>
                  <td nowrap="nowrap">Type of Over Current Protective Device</td>
                  <td> 
                    <select  class="form-control"  style="width:200px">
                      <option value="0" selected>Select option</option>
                      <option  value="Fuse"> Fuse </option>
                      <option value="MCB"> MCB</option>
                      <option value="MCCB">MCCB</option>
                      <option value="ACB">ACB</option>     
                  </select></td>
              </tr>
                <tr>
                  <td nowrap="nowrap">Rated current (A)</td>
                  <td><input type="number"  maxlength="4"style="width:200px"></td>
              </tr>
                <tr>
                  <td nowrap="nowrap">Current for disconnection with in 0.2 seconds</td>
                  <td><input type="number"   maxlength="5" style="width:200px" max="5"></td>
                </tr>
              </table>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <mat-form-field class="client-description " >
                <mat-label>
                  <h3>Brief note</h3>
                </mat-label>
                <textarea matInput class="client-box-description" formControlName="liveConductorBNote" [(ngModel)]="supplycharesteristic.liveConductorBNote" maxlength="500" placeholder="Ex. Brief Note ..." ></textarea>
              </mat-form-field>
            </div>
          </div>

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Alternative source of supply</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label> Availability of alternate supply:</label>
                  <select class="form-control" formControlName="alternativeSupply" 
                  (change)="showAlternateField($event)" [(ngModel)]="supplycharesteristic.alternativeSupply">
                  <option value="0" selected>Select option</option>
                  <option value="Yes">Yes</option>
                  <option value="No">No</option>
                  </select>
                </div>
              </div>

              <div class="col-md-4 joints" *ngIf="supplycharesteristic.alternativeSupply=='Yes'">
                <label>Number of alternate sources of supply:</label>        
                <input type="number"  class="form-control" formControlName="supplyNumber" [(ngModel)]="supplycharesteristic.supplyNumber" (keyup)="onKeyAlernate($event)">
              </div>
            </div>

            <div *ngIf="sources">
              <div formArrayName="alternateArr" *ngFor="let a of getLocation4Controls(); let i = index">
                <h2>Alternate Form :</h2>
                <div class="form-group" [formGroupName]="i">
                  <div class="row">
                  
                    <div class="col-md-4">
                      <label>Alternate supply no:</label>        
                      <input type="number"   class="form-control"  formControlName="aLSupplyNo">
                    </div>
        
                    <div class="col-md-4">
                      <label>Short name of alternate supply:</label>        
                      <input type="text"  maxlength="50" class="form-control"  formControlName="aLSupplyShortName">
                    </div>
        
                    <div class="col-md-4">
                      <label>System earthing:</label>
                      <select class="form-control" formControlName="aLSystemEarthing">
                        <option value="0" selected>Select option</option>
                        <option *ngFor="let value of systemEarthingList"> {{value}}</option>
                      </select>
                    </div>
        
                    <div class="col-md-4">
                        <label>Number and type of live conductors: </label>
                        <select class="form-control"  formControlName="aLLiveConductorType">
                          <option value="0" selected>Select option</option>
                          <option value="AC">AC</option>
                          <option value="DC">DC</option>
                        </select>
                    </div>
        
                    <div class="col-md-4" *ngIf="a.get('aLLiveConductorType')?.value=='AC'">
                        <label>AC:</label>
                        <select class="form-control" formControlName="aLLiveConductorAC">
                          <option value="0" selected>Select option</option>
                          <option value="1-phase, 3-wire (LLM)">1-phase, 2-wire (LN)</option>
                          <option value="1-phase, 3-wire (LLM)">1-phase, 3-wire (LLM)</option>
                          <option value="2-phase, 3-wire (LLN)">2-phase, 3-wire (LLN)</option>
                          <option value="3-phase, 3-wire (LLL)" selected>3-phase, 3-wire (LLL)</option>
                          <option value="3-phase, 4-wire (LLLN)" selected>3-phase, 4-wire (LLLN)</option>
                        </select>
                    </div>
        
                    <div class="col-md-4" *ngIf="a.get('aLLiveConductorType')?.value=='DC'">
                        <label>DC:</label>
                        <select class="form-control" formControlName="aLLiveConductorDC">
                          <option selected="selected" value="2-pole">2-pole </option>
                          <option value=" 3-pole"> 3-pole</option>
                          <option value="Others">Others</option>
                        </select>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field class="client-description">
                        <mat-label>
                          <h3>Brief note (in case of confusion)</h3>
                        </mat-label>
                        <textarea matInput class="client-box-description" formControlName="aLLiveConductorBNote" maxlength="500" placeholder="Ex. Brief Note ..." ></textarea>
                      </mat-form-field>
                    </div>
                  </div>
        
                  <div class="row" *ngIf="a.get('aLLiveConductorType')?.value=='AC'">
                    <div class="col">
                      <h2>Applicable for AC: (Note: Please mention NA if any column is not applicable)</h2>
                      <div class="table-responsive">
                        <table  class="table" formArrayName="nominalVoltageArr1" *ngFor="let row of getTableArray(a); let j = index"> 
                          <thead> 
                              <tr align="center">
                                <th>Nature of supply parameters</th>
                                <th>L1-L2</th>
                                <th>L2-L3</th>
                                <th>L1-L3</th>
                                <th>L1-N</th>
                                <th>L2-N</th>
                                <th>L3-N</th>
                                <th>L1-PE</th>
                                <th>L2-PE</th>
                                <th>L3-PE</th>
                              </tr>
                          </thead>
                          <tbody [formGroupName]="j">
                              <tr>
                                <td nowrap="nowrap">Nominal voltage U/U0 (V)</td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage1" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage2" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage3" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage4" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage5" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage6" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage7" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalVoltage8" style="width:70px"></td>
                                <td><input type="text"  min="1" formControlName="nominalVoltage9" style="width:70px"></td>

                              </tr>
                              <tr>
                                <td nowrap="nowrap">Nominal Frequency f (HZ)</td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency1" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency2" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency3" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency4" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency5" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency6" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency7" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="nominalFrequency8" style="width:70px"></td>
                                <td><input type="text"  min="1" formControlName="nominalFrequency9" style="width:70px"></td>
                              </tr>
                              <tr>
                                <td nowrap="nowrap">Prospective fault current Ipfc (kA) </td>
                                <td><input type="text"  maxlength="4" formControlName="current1" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current2" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current3" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current4" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current5" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current6" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current7" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="current8" style="width:70px"></td>
                                <td><input type="text"  min="1" formControlName="current9" style="width:70px"></td>

                              </tr>
                              <tr>
                                <td nowrap="nowrap">External Loop Impedance Ze (Ω)</td>
                                <td><input type="text"  maxlength="4" formControlName="impedence1" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence2" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence3" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence4" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence5" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence6" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence7" style="width:70px"></td>
                                <td><input type="text"  maxlength="4" formControlName="impedence8" style="width:70px"></td>
                                <td><input type="text"  min="1" formControlName="impedence9" style="width:70px"></td>

                              </tr>
                                <tr><td >Installed capacity (kVA)</td>
                                  <td colspan="9"><input type="text"  maxlength="4" formControlName="capacity" style="width: 950px"></td>
                                </tr>
                                <tr>
                                  <td >Actual load current (R,Y,B, N)</td>
                                  <td colspan="2"><input type="text" formControlName="loadCurrent1" style="width:206px"></td>
                                  <td colspan="2"><input type="text" formControlName="loadCurrent2" style="width:206px"></td>
                                  <td colspan="3"><input type="text" formControlName="loadCurrent3" style="width:206px"></td>
                                  <td colspan="2"><input type="text" formControlName="loadCurrent4"  style="width:206px"></td>

                                </tr>
                              
                          </tbody>
                          </table>
                      </div>
                    </div>
                  </div>
    
                  <div class="row" style="margin-top: 50px;">
                    <div class="col">
                      <h2>Incoming (supply) protective device characteristics:</h2>
                      <table  class="table">
                          
                          <tr>
                            <td nowrap="nowrap">Type of Over Current Protective Device</td>
                            <td><input type="text" style="width:400px"></td>
                          </tr>
                          <tr>
                              <td nowrap="nowrap">Rated current (A)</td>
                              <td><input type="text" formControlName="ratedCurrent" style="width:400px"></td>
                          </tr>
                          <tr>
                            <td nowrap="nowrap">Current for disconnection with in 0.2 seconds</td>
                            <td><input type="text" formControlName="currentDissconnection" style="width:400px"></td>
                          </tr>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          
        </mat-expansion-panel>
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <h3>Particulars of installation referred in the report</h3>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="row">
                <div class="col-md-4" style="margin-top: 30px">
                  <p>Maximum demand <input type="number" formControlName="maximumDemand" [(ngModel)]="supplycharesteristic.maximumDemand" style="
                    width: 50px;
                    background: transparent;
                    border: none;
                    border-bottom: 1px solid #000000;"> KvA</p>
                </div>

                <div class="col-md-4" style="margin-top: 30px">
                  <p>Maximum load<input type="number" formControlName="maximumLoad" [(ngModel)]="supplycharesteristic.maximumLoad" style="
                    width: 50px;
                    background: transparent;
                    border: none;
                    border-bottom: 1px solid #000000;"> Amps</p>
                </div>

                <div class="col-md-4" >
                  <label>Means of earthing :</label>
                  <select class="form-control" formControlName="meansEarthing" [(ngModel)]="supplycharesteristic.meansEarthing" >
                    <option value="0" selected>Select option</option>
                    <option *ngFor="let value of MeansofEarthingList"> {{value}}</option>
                  </select>
                </div>
              </div>

              <div class="row" style="margin-top: 30px">
                
                <div class="col-md-4">
                  <label>Type of earth electrode :</label>
                  <select class="form-control" formControlName="electrodeType" [(ngModel)]="supplycharesteristic.electrodeType">
                    <option value="0" selected>Select option</option>
                    <option *ngFor="let value of  electrodeTypeList"> {{value}}</option>
                  </select>
                </div>

                <div class="col-md-4">
                  <label>Material of earth electrode:</label>
                  <select class="form-control" formControlName="electrodeMaterial" [(ngModel)]="supplycharesteristic.electrodeMaterial">
                    <option value="0" selected>Select option</option>
                    <option *ngFor="let value of  electrodeMaterialList"> {{value}}</option>
                  </select>
                </div>

                <div class="col-md-4" style="margin-top: 30px">
                  <p class="joints">Number of Locations <input type="number" formControlName="noOfLocation" [(ngModel)]="supplycharesteristic.noOfLocation" style="
                    width: 50px;
                    background: transparent;
                    border: none;
                    border-bottom: 1px solid #000000;" (keyup)="onKey1($event)"></p>
                </div>
              </div>
            <br>
              <div class="row">
                <div class="col-sm-12">
                  <h2>Number of Locations</h2>
                </div>
                <!-- <mat-icon class="mousechange" (click)="addLocation1()" style=" padding-top: 5px;">add_box</mat-icon> -->
              </div>
              

              <div class="row">
                <div class="col-md-3">
                  <label style="text-align: center;">Location Number</label>
                </div>
                <div class="col-md-3">
                  <label style="text-align: center;">Location Name</label>
                </div>
                <div class="col-md-3">
                  <label style="text-align: center;">Electrode resistance to earth in (Ω)</label>
                </div>
                <div class="col-md-3">
                  <label style="text-align: center;">Electrode resistance to grid (Ω)</label>
                </div>
              </div>
  
              <div formArrayName="location1Arr" *ngFor="let a of getLocation1Controls(); let i = index">
                <div class="form-group" [formGroupName]="i">
                  <div class="row">
                    <div class="col-md-3">
                      <input type="text"  formControlName="locationNo" class="form-control"  placeholder="Enter location number" >
                    </div>
  
                    <div class="col-md-3">
                      <input type="text"  formControlName="locationName" class="form-control"  placeholder="Enter location name" >
                    </div>
  
                    <div class="col-md-3">
                      <input type="text"  formControlName="electrodeResistanceEarth" class="form-control"  placeholder="Enter electrode resistance" >
                    </div>

                    <div class="col-md-3">
                      <input type="text"  formControlName="electrodeResistanceGird" class="form-control"  placeholder="Enter electrode resistance" >
                    </div>
                  </div>
                </div>
              </div>

            </mat-expansion-panel>

            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <h3>Details of main protective conductor</h3>
                </mat-panel-title>
              </mat-expansion-panel-header>
              
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4" style="margin-top: 57px">
                    <p>Size of earthing conductor <input type="number" formControlName="conductorSize" [(ngModel)]="supplycharesteristic.conductorSize" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;"> sq.mm</p>
                  </div>

                  <div class="col-md-4">
                    <label>Material of earthing conductor:</label>
                    <input type="text"  class="form-control" formControlName="conductormaterial" [(ngModel)]="supplycharesteristic.conductormaterial">
                  </div>

                  <div class="col-md-4">
                    <label>earthing conductor continuity and connection verified:</label>
                    
                    <select class="form-control" formControlName="conductorVerify" [(ngModel)]="supplycharesteristic.conductorVerify">
                      <option value="0" selected>Select option</option>
                      <option *ngFor="let value of  earthingConductorVerifyList"> {{value}}</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <div class="row">
                  <div class="col-md-4" style="margin-top: 30px">
                    <p>Size of main protective bonding conductor <input type="number" formControlName="bondingConductorSize" [(ngModel)]="supplycharesteristic.bondingConductorSize" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;"> sq.mm</p>
                  </div>

                  <div class="col-md-4">
                    <label>Material of main protective bonding conductor:</label>
                    <input type="text"  class="form-control" formControlName="bondingConductorMaterial" [(ngModel)]="supplycharesteristic.bondingConductorMaterial">
                  </div>

                  <div class="col-md-4">
                    <label>Main protective bonding conductor continuity and connection verified:</label>
                    <select class="form-control" formControlName="bondingConductorVerify" [(ngModel)]="supplycharesteristic.bondingConductorVerify">
                      <option value="0" selected>Select option</option>
                      <option *ngFor="let value of bondingConductorVerifyList"> {{value}}</option>
                    </select>
                  </div>
                </div>
              </div>
                  
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4" style="margin-top: 30px">
                    <p>Type of joints (impairing safety) <input type="number" formControlName="bondingJointsType" [(ngModel)]="supplycharesteristic.bondingJointsType" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;">
                    </p>
                  </div>
                  <div class="col-md-4" style="margin-top: 30px">
                    <p  class="joints">No of joints 
                      <input type="number" formControlName="bondingNoOfJoints" [(ngModel)]="supplycharesteristic.bondingNoOfJoints" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;" (keyup)="onKey($event)"
                      ></p>
                  </div>
                  <!-- (blur)="update(box.value)" (keyup)="onKey($event)"-->
                </div>
              </div>
                  
              <div class="row">
                <div class="col-sm-12">
                <h2>Location Table</h2>
                <!-- <mat-icon class="mousechange" (click)="addLocation2()" style=" padding-top: 5px;">add_box</mat-icon> -->
              </div>
              </div>
              
              <div class="row">
                <div class="col-md-4">
                  <label style="text-align: center;">Location</label>
                </div>
                <div class="col-md-4">
                  <label style="text-align: center;">Joint No</label>
                </div>
                <div class="col-md-4">
                  <label style="text-align: center;">Joint resistance (Ω)</label>
                </div>
              </div>
  
              <div formArrayName="location2Arr" *ngFor="let a of getLocation2Controls(); let i = index">
                <div class="form-group" [formGroupName]="i">
                  <div class="row">
                    <div class="col-md-4">
                      <input type="text"  formControlName="location" class="form-control"  placeholder="Enter location" >
                    </div>
  
                    <div class="col-md-4">
                      <input type="text"  formControlName="jointNo" class="form-control"  placeholder="Enter Joint No" >
                    </div>
  
                    <div class="col-md-4">
                      <input type="text"  formControlName="jointResistance" class="form-control"  placeholder="Enter Joint resistance" >
                    </div>
                  </div>
                </div>
              </div>
            
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4" style="margin-top: 30px">
                    <p>Size of main protective earthing conductor<input type="number" formControlName="earthingConductorSize" [(ngModel)]="supplycharesteristic.earthingConductorSize" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;"> Sq.mm</p>
                  </div>

                  <div class="col-md-4">
                    <label>Material of main protective earthing conductor:</label>
                    <input type="text"  class="form-control" formControlName="earthingConductorMaterial" [(ngModel)]="supplycharesteristic.earthingConductorMaterial">
                  </div>

                  <div class="col-md-4">
                    <label>Main Protective Conductor continuity and connection verified:</label>
                    <select class="form-control" formControlName="earthingConductorVerify" [(ngModel)]="supplycharesteristic.earthingConductorVerify">
                      <option value="0" selected>Select option</option>
                      <option *ngFor="let value of conductorVerifyList"> {{value}}</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <div class="row">
                  <div class="col-md-4" style="margin-top: 30px">
                    <p>Type of Joints<input type="number" formControlName="earthingJointsType" [(ngModel)]="supplycharesteristic.earthingJointsType" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;">
                    </p>
                  </div>

                  <div class="col-md-4" style="margin-top: 30px">
                    <p class="joints">No of Joints <input type="number" formControlName="earthingNoOfJoints" [(ngModel)]="supplycharesteristic.earthingNoOfJoints" style="
                      width: 50px;
                      background: transparent;
                      border: none;
                      border-bottom: 1px solid #000000;" (keyup)="onKey3($event)"></p>
                  </div>
                </div>
              </div>
              
              <div class="row">
                <div class="col-sm-12">
                <h2>Location Table</h2>
                </div>
                <!-- <mat-icon class="mousechange" (click)="addLocation3()" style=" padding-top: 5px;">add_box</mat-icon> -->
              </div>
              
              <div class="row">
                <div class="col-md-4">
                  <label style="text-align: center;">Location</label>
                </div>
                <div class="col-md-4">
                  <label style="text-align: center;">Joint No</label>
                </div>
                <div class="col-md-4">
                  <label style="text-align: center;">Joint resistance (Ω)</label>
                </div>
              </div>
  
              <div formArrayName="location3Arr" *ngFor="let a of getLocation3Controls(); let i = index">
                <div class="form-group" [formGroupName]="i">
                  <div class="row">
                    <div class="col-md-4">
                      <input type="text"  formControlName="location" class="form-control"  placeholder="Enter location" >
                    </div>
  
                    <div class="col-md-4">
                      <input type="text"  formControlName="jointNo" class="form-control"  placeholder="Enter Joint No" >
                    </div>
  
                    <div class="col-md-4">
                      <input type="text"  formControlName="jointResistance" class="form-control"  placeholder="Enter Joint resistance" >
                    </div>
                  </div>
                </div>
              </div>
              
            </mat-expansion-panel>

                <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="breaker">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <h3>Details of main switch or circuit breaker</h3>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div formArrayName="circuitArr" *ngFor="let a of getCircuitControls(); let i = index">
                    <div class="form-group" [formGroupName]="i">
                      <h2>Details of Circuit Breaker</h2>
                      <div class="row">
                        <div class="col-md-4">
                          <label>Location:</label>
                          <input type="text"  formControlName="location" class="form-control"  placeholder="Enter Location" >
                        </div>
            
                        <div class="col-md-4">
                          <label>Type:</label>
                          <select class="form-control" formControlName="type">
                            <option value="0" selected>Select option</option>
                            <option value="MCB">MCB</option>
                            <option value=" ACB"> ACB</option>
                            <option value="MCCB">MCCB</option>
                            <option value="RCBO">RCBO</option>
                          </select>
                        </div>
            
                        <div class="col-md-4">
                          <label>No of poles:</label>
                          <input type="text"   class="form-control" formControlName="noPoles"  placeholder="Enter poles" >
                        </div>
    
                        <div class="col-md-4">
                          <label>Current Rating:</label>
                          <div class="input-group">
                            <input type="text"   class="form-control" formControlName="current" placeholder="Enter rating" >
                            <div class="input-group-prepend">
                              <span class="input-group-text">A</span>
                            </div>  
                          </div>    
                        </div>                    
            
                        <div class="col-md-4">
                          <label>Voltage Rating:</label>
                          <div class="input-group">
                            <input type="text"   class="form-control" formControlName="voltage"  placeholder="Enter voltage" >
                            <div class="input-group-prepend">
                              <span class="input-group-text">V</span>
                            </div>  
                          </div>
                        </div>
            
                        <div class="col-md-4">
                          <label>Fuse Rating or Settings:</label>
                          <div class="input-group">
                            <input type="text"   class="form-control" formControlName="fuse" placeholder="Enter rating" >
                            <div class="input-group-prepend">
                              <span class="input-group-text">A</span>
                            </div>  
                          </div>
                        </div>
                        
                        <div class="col-md-4" *ngIf="true">
                          <label>Rated residual operating Current I∆n:</label>
                          <div class="input-group">
                            <input type="text"   class="form-control" formControlName="residualCurrent"  placeholder="Enter value" >
                            <div class="input-group-prepend">
                              <span class="input-group-text">mA</span>
                            </div>  
                          </div>
                        </div>
            
                        <div class="col-md-4" *ngIf="true">
                          <label>Rated residual operating time @I∆n T∆n	:</label>
                          <div class="input-group">
                            <input type="text"   class="form-control" formControlName="residualTime" placeholder="Enter value" >
                            <div class="input-group-prepend">
                              <span class="input-group-text">mS</span>
                            </div>  
                          </div>
                        </div>
    
                      </div>
                    </div>
                  </div>
    
               
              </mat-expansion-panel>
             </mat-accordion>
             <div style="text-align: center;margin-top: 40px;">
              <button class="previous" mat-button matStepperPrevious>&laquo; Back</button>
              <button  class="next"  mat-button matStepperNext>Next &raquo;</button>
            </div>
    </form>
  </div>
</div>