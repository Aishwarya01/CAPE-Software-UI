<div class="card">
    <div class="card-body">

        <form [formGroup]="EmcClientDetailsForm" (keyup)="onKeyForm($event)" (change)="onChangeForm($event)"
            (ngSubmit)="saveClientDetails(flag)">
            <div class="row">

                <div class="col-md-4">
                    <div class="form-group">
                        <label>* Client Name </label>
                        <input type="text" class="form-control" formControlName="clientName"
                            [(ngModel)]="emcClientDetails.clientName"
                            [ngClass]="{'is-invalid':submitted && a.clientName?.errors}"
                            placeholder="Please Enter Client name">
                        <div *ngIf="submitted &&a.clientName?.errors" class="invalid-feedback">
                            <div *ngIf="a.clientName?.errors?.required">Client Name Is Required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <label>* Contact Number:</label>
                    <input type="tel" minlength="10" maxlength="10" ng2TelInput
                        [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                        (keypress)="keyPressNumbers($event)" (countryChange)="countryChange($event)"
                        placeholder="Enter Contact Number" formControlName="contactNumber" class="form-control"
                        [ngClass]="{'is-invalid':submitted && a.contactNumber?.errors}">
                    <div *ngIf="submitted &&a.contactNumber?.errors" class="invalid-feedback">
                        <div *ngIf="a.contactNumber?.errors?.required">Contact Number is Required</div>
                        <div *ngIf="a.contactNumber?.errors?.minlength">Please Enter 10 Digit Number</div>
                        <div *ngIf="a.contactNumber?.errors?.maxlength">Please Enter 10 Digit Number</div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>* Contact Person </label>
                        <input type="text" class="form-control" formControlName="contactPerson"
                            [(ngModel)]="emcClientDetails.contactPerson"
                            [ngClass]="{'is-invalid':submitted && a.contactPerson?.errors}"
                            placeholder="Please Enter Client Person">
                        <div *ngIf="submitted &&a.contactPerson?.errors" class="invalid-feedback">
                            <div *ngIf="a.contactPerson?.errors?.required">Client Person Is Required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <label>* Landmark:</label>
                    <input type="text" formControlName="landMark" class="form-control" placeholder="Enter Landmark"
                        [(ngModel)]="emcClientDetails.landMark"
                        [ngClass]="{ 'is-invalid': submitted && a.landMark?.errors }">
                    <div *ngIf="submitted && a.landMark?.errors" class="invalid-feedback">
                        <div *ngIf="a.landMark?.errors?.required">Landmark Is Required</div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>* Location </label>
                        <input type="text" class="form-control" formControlName="clientLocation"
                            [(ngModel)]="emcClientDetails.clientLocation"
                            [ngClass]="{'is-invalid':submitted && a.clientLocation?.errors}"
                            placeholder="Please Enter Client Location">
                        <div *ngIf="submitted &&a.clientLocation?.errors" class="invalid-feedback">
                            <div *ngIf="a.clientLocation?.errors?.required">Client Location Is Required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <label>* Address</label>
                    <input type="text" formControlName="clientAddress" class="form-control" placeholder="Enter Address"
                        [(ngModel)]="emcClientDetails.clientAddress"
                        [ngClass]="{ 'is-invalid': submitted && a.clientAddress?.errors }">
                    <div *ngIf="submitted && a.clientAddress?.errors" class="invalid-feedback">
                        <div *ngIf="a.clientAddress?.errors?.required">Address Is Required</div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>* Email: </label>
                        <input type="text" class="form-control" formControlName="email"
                            [(ngModel)]="emcClientDetails.email" placeholder="Enter Email Address"
                            [ngClass]="{'is-invalid':submitted && a.email?.errors}">
                        <div *ngIf="submitted &&a.email?.errors" class="invalid-feedback">
                            <div *ngIf="a.email?.errors?.required">Email is required</div>
                            <div *ngIf="a.email?.errors?.pattern">Enter valid email</div>
                        </div>
                    </div>

                </div>

                <div class="col-md-4">
                    <label>* Country:</label>
                    <select formControlName="country" class="form-control" (change)="changeCountry($event)"
                        [(ngModel)]="emcClientDetails.country"
                        [ngClass]="{ 'is-invalid': submitted && a.country?.errors }">
                        <option value="0" selected>Select Country Name</option>
                        <option *ngFor="let country of countryList">{{country.name}}</option>
                    </select>
                    <div *ngIf="submitted && a.country?.errors" class="invalid-feedback">
                        <div *ngIf="a.country?.errors?.required">Country Is Required</div>
                    </div>
                </div>

                <div class="col-md-4">
                    <label>* State:</label>
                    <select formControlName="state" class="form-control" [(ngModel)]="emcClientDetails.state"
                        [ngClass]="{ 'is-invalid': submitted && a.state?.errors }">
                        <option value="0" selected>Select State Name</option>
                        <option *ngFor="let state of stateList">{{state.name}}</option>
                    </select>
                    <div *ngIf="submitted && a.state?.errors" class="invalid-feedback">
                        <div *ngIf="a.state?.errors?.required">State Is Required</div>
                    </div>
                </div>

            </div>


            <div *ngIf="validationError" style="text-align: center;">
                <span class="errorshow">{{validationErrorMsg}}</span>
            </div>

            <div style="text-align: center;margin-top: 40px;margin-bottom: 20px;">
                <button class="next" (click)="gotoNextModal(content)" mat-button>Next &raquo;</button>
            </div>

        </form>
    </div>
</div>

<ng-template #content let-modal>
    <mat-progress-spinner style="margin: 0 auto;" *ngIf="finalSpinner" color="primary">
    </mat-progress-spinner>
    <div class="modal-body" *ngIf="popup">
        <div class="centre-text m-btm30">
            <div *ngIf="success" style="text-align: center;">
                <span class="successshow">{{successMsg}}</span>
            </div>
            <div *ngIf="Error" style="text-align: center;">
                <span class="errorshow">{{errorMsg}}</span>
            </div>
        </div>
    </div>
    <br>

    <button type="button" *ngIf="popup" style="text-align: center;margin-left:180px;width:20%" class="close"
        class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn" aria-label="Close"
        (click)="closeModalDialog()" matStepperNext>
        <span aria-hidden="true">Ok</span>
    </button>
</ng-template>