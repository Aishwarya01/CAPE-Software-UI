<!-- step 3 -->
<div *ngIf="tabError" style="text-align: center;">
  <span class="alert alert-danger">{{tabErrorMsg}}</span>
</div>
<div *ngIf="validationErrorTab" style="text-align: center;">
  <span class="alert alert-danger">{{validationErrorMsgTab}}</span>
</div>
<div class="card">
  <form [formGroup]="addstep3" (ngSubmit)="nextTab3(flag)" (keyup)="onKeyForm($event)" (change)="onChangeForm($event)">
<div class="card-body" formArrayName="incomingArr" *ngFor="let a of getIncomingControls(); let i = index" >
  <div [formGroupName]="i" >
  <div class="search-bar">
    <div class="form-group" [ngClass]="{'disableForm':service.allFieldsDisable}">
      <div class="row">
        <div class="col-md-4">
              <label>Location Number*</label>
              <input type="number" min="1" class="form-control" formControlName="locationNumber"
               placeholder="Enter Location Number" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
               [ngClass]="{ 'is-invalid': submitted && a.get('locationNumber')?.errors }">
              <div *ngIf="submitted && a.get('locationNumber')?.errors" class="invalid-feedback">
                <div *ngIf="a.get('locationNumber')?.errors?.required">Location Number is required</div>
            </div> 
        </div>
        <div class="col-md-4">
              <label>Location Name*</label>
              <input type="text" class="form-control" formControlName="locationName"
              placeholder="Enter Location Name" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
              [ngClass]="{ 'is-invalid': submitted && a.get('locationName')?.errors }">
              <div *ngIf="submitted && a.get('locationName')?.errors" class="invalid-feedback">
                <div *ngIf="a.get('locationName')?.errors?.required">Location name is required</div>
            </div> 
        </div>
      </div>
  </div>
</div>
  <mat-accordion>
    <!-- IpaInsection starts-->
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Incoming Equipment</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cable/Busbar trunking:</label>
            <mat-icon style="float: right;font-size: 18px;
                     line-height: unset;"
                     matTooltip="Type and availability status to be included."
                 matTooltipClass="multiline-tooltip"
                aria-label="Button that shows a red tooltip"
                 class="example-button"> info_outline
            </mat-icon>
            <select class="form-control" formControlName="serviceCable"
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('serviceCable')?.errors }">
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== a.get('serviceCable')?.value">{{value}}</option>
          </select>
            <div *ngIf="submitted && a.get('serviceCable')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('serviceCable')?.errors?.required">Service Cable is required</div>
          </div>
            
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Incoming Protective Device:</label>
            <mat-icon style="float: right;font-size: 18px;
                     line-height: unset;"
                     matTooltip="Availability status to be included."
                 matTooltipClass="multiline-tooltip"
                aria-label="Button that shows a red tooltip"
                 class="example-button"> info_outline
            </mat-icon>
            <select class="form-control" formControlName="serviceFuse" 
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('serviceFuse')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('serviceFuse')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('serviceFuse')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('serviceFuse')?.errors?.required">Service Fuse is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Energy Meters for Mains Incoming:</label>
            <mat-icon style="float: right;font-size: 18px;
                 line-height: unset;"
                 matTooltip="Availability status to be included."
                matTooltipClass="multiline-tooltip"
               aria-label="Button that shows a red tooltip"
                class="example-button"> info_outline
             </mat-icon>
            <select class="form-control" formControlName="meterDistributor" 
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('meterDistributor')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('meterDistributor')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('meterDistributor')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('meterDistributor')?.errors?.required">Meter Distributor is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Energy Meters for Outgoings:</label>
            <mat-icon style="float: right;font-size: 18px;
                 line-height: unset;"
                matTooltip="Availability status to be included."
                matTooltipClass="multiline-tooltip"
                aria-label="Button that shows a red tooltip"
                class="example-button"> info_outline
            </mat-icon>
            <select class="form-control" formControlName="meterConsumer" 
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('meterConsumer')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('meterConsumer')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('meterConsumer')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('meterConsumer')?.errors?.required">Meter Consumer is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Over Voltage Protection:</label>
            <mat-icon style="float: right;font-size: 18px;
                line-height: unset;"
                matTooltip="Availability status to be included."
                matTooltipClass="multiline-tooltip"
                aria-label="Button that shows a red tooltip"
                class="example-button"> info_outline
            </mat-icon>
            <select class="form-control" formControlName="meterEqu" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('meterEqu')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('meterEqu')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('meterEqu')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('meterEqu')?.errors?.required">Metering Equipment is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Isolator (Means To Isolate The Incoming Supply System):</label>
            <mat-icon style="float: right;font-size: 18px;
                line-height: unset;"
            matTooltip="Availability status to be included. Generally, the incoming protective device have this facility."
            matTooltipClass="multiline-tooltip"
            aria-label="Button that shows a red tooltip"
            class="example-button"> info_outline
        </mat-icon>
            <select class="form-control" formControlName="isolator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('isolator')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('isolator')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('isolator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('isolator')?.errors?.required">Isolator is required</div>
          </div>
          </div>
        </div>
      </div>
        <!-- </div>
      </div> -->
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Presence of Adequate Arrangements For Parallel Or Switched Alternative Sources Of Supply </h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Dedicated Earthing Arrangement Independent To That Of Incoming Utility Supply:</label>
            <mat-icon style="float: right;font-size: 18px;
                line-height: unset;"
                matTooltip="Arrangement of earthing downstream point of commencement of supply."
                matTooltipClass="multiline-tooltip"
                aria-label="Button that shows a red tooltip"
                class="example-button"> info_outline
            </mat-icon>
            <select class="form-control" formControlName="earthingArrangement" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('earthingArrangement')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('earthingArrangement')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('earthingArrangement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('earthingArrangement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence of Adequate Arrangements Where Generator To Operate in Parallel With The Incoming Utility
              Supply:</label>
            <select class="form-control" formControlName="adequateArrangement" 
            [ngClass]="{ 'is-invalid': submitted && a.get('adequateArrangement')?.errors }" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('adequateArrangement')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('adequateArrangement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('adequateArrangement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Correct Connections Of Generator In Parallel. (Note: Special Attention To Neutral Circulating
              Currents):</label>
            <select class="form-control" formControlName="connectionGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('connectionGenerator')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('connectionGenerator')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('connectionGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('connectionGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Compatibility of Characteristics Of Generator (V,I,Hz):</label>
            <select class="form-control" formControlName="compatibilityCharacteristics" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('compatibilityCharacteristics')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('compatibilityCharacteristics')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('compatibilityCharacteristics')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('compatibilityCharacteristics')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Means To Provide Automatic Change Over Of Generator In The Event Of
              Loss Of Incoming Utility Supply Or Voltage Or Frequency Deviation Beyond Declared Values:</label>
            <select class="form-control" formControlName="automaticDisconnectGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('automaticDisconnectGenerator')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('automaticDisconnectGenerator')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('automaticDisconnectGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('automaticDisconnectGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Means to Automatically Change Over to Incoming Utility Supply and ShotDown of Generator when the Utility Supply
              is Normally Available:</label>
            <select class="form-control" formControlName="preventConnectGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('preventConnectGenerator')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('preventConnectGenerator')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('preventConnectGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('preventConnectGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Means to Isolate Generator From The Public Supply System :</label>
            <select class="form-control" formControlName="isolateGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('isolateGenerator')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('isolateGenerator')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('isolateGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('isolateGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
        
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Automatic Disconnection Of Supply</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Main Earthing and Main Protective Bonding arrangements:</label>
               <mat-icon style="float: right;font-size: 18px;
                 line-height: unset;"
                  matTooltip="If the earth busbar of mains incoming panel and nearby metal installations such as metal pipes, metal handrails and lightning protection down conductors are not connected, select NO"
                  matTooltipClass="multiline-tooltip"
                  aria-label="Button that shows a red tooltip"
                  class="example-button"> info_outline
                </mat-icon>
            <select class="form-control" formControlName="mainEarting" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('mainEarting')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('mainEarting')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('mainEarting')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('mainEarting')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence and Adequacy Of Earthing Arrangement to Source Or Installation Earth
              Electrode Arrangement:</label>
              <mat-icon style="float: right;font-size: 18px;
                 line-height: unset;"
                  matTooltip="For TN system, protective conductor to source neutral is applicable. 
                  TT system earth electrode is applicable."
                  matTooltipClass="multiline-tooltip"
                  aria-label="Button that shows a red tooltip"
                  class="example-button"> info_outline
                </mat-icon>
            <select class="form-control" formControlName="earthElectordeArrangement" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('earthElectordeArrangement')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('earthElectordeArrangement')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('earthElectordeArrangement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('earthElectordeArrangement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence And Adequacy Of Earthing Conductor And Connections:</label>
            <select class="form-control" formControlName="earthConductorConnection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('earthConductorConnection')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('earthConductorConnection')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('earthConductorConnection')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('earthConductorConnection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Accessibility Of Earthing Conductor Connections:</label>
            <select class="form-control" formControlName="accessibility" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('accessibility')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('accessibility')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('accessibility')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('accessibility')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence and Adequacy Of Main Protective Bonding Conductors And Connections (Colour, Sizes,
              Termination, and Provision of Independent Earthing) :</label>
              <mat-icon style="float: right;font-size: 18px;
                 line-height: unset;"
                  matTooltip="If the earth busbar of mains incoming panel and nearby metal installations such as metal pipes, metal handrails and lightning protection down conductors are not connected, select NO"
                  matTooltipClass="multiline-tooltip"
                  aria-label="Button that shows a red tooltip"
                  class="example-button"> info_outline
                </mat-icon>
            <select class="form-control" formControlName="aainProtectBonding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('aainProtectBonding')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('aainProtectBonding')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('aainProtectBonding')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('aainProtectBonding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Accessibility Of All Protective Bonding Connections:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="If the earth busbar of mains incoming panel and nearby metal installations such as metal pipes, metal handrails and lightning protection down conductors are not connected, select NO"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="allProtectBonding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('allProtectBonding')?.errors }" 
            >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('allProtectBonding')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('allProtectBonding')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('allProtectBonding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence and Adequacy of Electrical Earthing/Bonding Labels At All Appropriate
              Locations:</label>
            <select class="form-control" formControlName="allAppropriateLocation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('allAppropriateLocation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('allAppropriateLocation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('allAppropriateLocation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('allAppropriateLocation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Accessibility Of FELV Requirements Satisfied:</label>
            <select class="form-control" formControlName="felvRequirement" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('felvRequirement')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('felvRequirement')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('felvRequirement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('felvRequirement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Other Methods Of Protection Applicable To Locations Where Automatic Disconnection Of Supply Is
            Not Employed.</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <h3><b>Basic and Fault Protection</b></h3>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>SELV System, Including The Source And Associated Circuits:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation."
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="selvSystem" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('selvSystem')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('selvSystem')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('selvSystem')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('selvSystem')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>PELV system, Including The Source And Associated Circuits:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="pelvSystem" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('pelvSystem')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('pelvSystem')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('pelvSystem')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('pelvSystem')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Double Insulation (Class II or Equivalent Equipment And Associated Circuits):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="doubleInsulation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('doubleInsulation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('doubleInsulation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('doubleInsulation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('doubleInsulation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>ReInforced Insulation:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="reinforcedInsulation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('reinforcedInsulation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('reinforcedInsulation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('reinforcedInsulation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('reinforcedInsulation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Electrical Separation:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="basicElectricalSepartion" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('basicElectricalSepartion')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('basicElectricalSepartion')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('basicElectricalSepartion')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('basicElectricalSepartion')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <!-- <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Isolator(Means to isolate the public supply system) :</label>
            <select class="form-control" formControlName="isolatePublicSupply" 
            [ngClass]="{ 'is-invalid': submitted && a.get('isolatePublicSupply')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('isolatePublicSupply')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('isolatePublicSupply')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('isolatePublicSupply')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div> -->
      </div>

      <h3><b>Basic Protection (Prevention Of Contact With Live Parts)</b></h3>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Insulation of Live Parts (Conductors Completely Covered With Durable Insulating
              Material):</label>
              <mat-icon style="float: right;font-size: 18px;
              line-height: unset;"
               matTooltip="YES - If this protective measure is applied in the installation"
               matTooltipClass="multiline-tooltip"
               aria-label="Button that shows a red tooltip"
               class="example-button"> info_outline
             </mat-icon>
            <select class="form-control" formControlName="insulationLiveParts" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('insulationLiveParts')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('insulationLiveParts')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('insulationLiveParts')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('insulationLiveParts')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Barriers Or Enclosures (Correct IP Rating):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="barriersEnclosers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('barriersEnclosers')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('barriersEnclosers')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('barriersEnclosers')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('barriersEnclosers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Obstacles:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="obstacles" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('obstacles')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('obstacles')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('obstacles')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('obstacles')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Placing out of reach:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="placingOutReach" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('placingOutReach')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('placingOutReach')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('placingOutReach')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('placingOutReach')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

      <h3><b>Fault protection</b></h3>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Non-Conducting Location – Earth Free local Equipotential Bonding:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="nonConductLocation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('nonConductLocation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('nonConductLocation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('nonConductLocation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('nonConductLocation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Electrical Separation:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="faultElectricalSepartion" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('faultElectricalSepartion')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('faultElectricalSepartion')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('faultElectricalSepartion')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('faultElectricalSepartion')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

      <h3><b>Additional Protection</b></h3>
      <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>RCD(s) Not Exceeding 30 mA Operating Current:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="operatingCurrent" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('operatingCurrent')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('operatingCurrent')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('operatingCurrent')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('operatingCurrent')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Supplementary Bonding:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="supplementaryBonding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('supplementaryBonding')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('supplementaryBonding')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('supplementaryBonding')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('supplementaryBonding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
    <!-- IpaInsection ends-->

    <!-- consumerUnit starts-->
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Consumer Unit(s) / Distribution Board(s) / Distribution Equipment</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div formArrayName="consumerUnit" *ngFor="let b of getearthingControls(a); let i = index">
        <div class="form-group" [formGroupName]="i"  [ngClass]="{'disableForm':service.allFieldsDisable}">
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Access And Working Space For Items Of Electrical Equipment Including
              Switchgear:</label>
              <mat-icon style="float: right;font-size: 18px;
              line-height: unset;"
               matTooltip="Spacing requirements shall be referred to NEC/NBC"
               matTooltipClass="multiline-tooltip"
               aria-label="Button that shows a red tooltip"
               class="example-button"> info_outline
             </mat-icon>
            <select class="form-control" formControlName="accessWorking" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('accessWorking')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('accessWorking')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('accessWorking')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('accessWorking')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Security Of Fixing:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="Quality of terminations and fixings"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="securityFixing" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('securityFixing')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('securityFixing')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('securityFixing')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('securityFixing')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Insulation Of Live Parts Not Damaged During Erection:</label>
            <select class="form-control" formControlName="livePartsDamage" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('livePartsDamage')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('livePartsDamage')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('livePartsDamage')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('livePartsDamage')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy / Security Of Barriers:</label>
            <select class="form-control" formControlName="securityBarriers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('securityBarriers')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('securityBarriers')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('securityBarriers')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('securityBarriers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of Enclosure(s) For IP And Fire Ratings:</label>
            <select class="form-control" formControlName="suitabilityEnclosure" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('suitabilityEnclosure')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('suitabilityEnclosure')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('suitabilityEnclosure')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('suitabilityEnclosure')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Enclosure Not Damaged During Installation:</label>
            <select class="form-control" formControlName="enclosureDamaged" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('enclosureDamaged')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('enclosureDamaged')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('enclosureDamaged')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('enclosureDamaged')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div> 

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence And Effectiveness Of Obstacles:</label>
            <select class="form-control" formControlName="presenceObstacles" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('presenceObstacles')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('presenceObstacles')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('presenceObstacles')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('presenceObstacles')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Placing Out Of Reach:</label>
            <select class="form-control" formControlName="placingOutOfConsumer" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('placingOutOfConsumer')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('placingOutOfConsumer')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('placingOutOfConsumer')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('placingOutOfConsumer')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Main Switches Linked Where Required:</label>
            <select class="form-control" formControlName="presenceMainSwitches" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('presenceMainSwitches')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('presenceMainSwitches')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('presenceMainSwitches')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('presenceMainSwitches')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Operation Of Main Switches (Functional Checks):</label>
            <select class="form-control" formControlName="operationMainSwitches" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('operationMainSwitches')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('operationMainSwitches')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('operationMainSwitches')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('operationMainSwitches')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Manual Operation Of Circuit Breakers And RCD’s To Prove Functionally:</label>
            <select class="form-control" formControlName="manualCircuitBreakers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('manualCircuitBreakers')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('manualCircuitBreakers')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('manualCircuitBreakers')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('manualCircuitBreakers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation That Integral Test Button / Switch Causes RCD’s To Trip When Operated
              (Functional Check):</label>
            <select class="form-control" formControlName="switchCausesRcd" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('switchCausesRcd')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('switchCausesRcd')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('switchCausesRcd')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('switchCausesRcd')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>RCD’s Provided For Fault Protection, Where Specified:</label>
            <select class="form-control" formControlName="rcdFaultProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('rcdFaultProtection')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('rcdFaultProtection')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('rcdFaultProtection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('rcdFaultProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>RCD’s Provided For Additional Protection, Where Specified:</label>
            <select class="form-control" formControlName="rcdAdditionalProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('rcdAdditionalProtection')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('rcdAdditionalProtection')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('rcdAdditionalProtection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('rcdAdditionalProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation Of Over Voltage Protection (SPD’s) Provided Where Specified:</label>
            <select class="form-control" formControlName="overVoltageProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('overVoltageProtection')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('overVoltageProtection')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('overVoltageProtection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('overVoltageProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation Of Indication That SPD Is Functional:</label>
            <select class="form-control" formControlName="indicationOfSpd" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('indicationOfSpd')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('indicationOfSpd')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('indicationOfSpd')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('indicationOfSpd')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of RCD Quarterly Test Notice:</label>
            <select class="form-control" formControlName="rcdQuarterlyTest" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('rcdQuarterlyTest')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('rcdQuarterlyTest')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('rcdQuarterlyTest')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('rcdQuarterlyTest')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Diagrams Charts Or Schedules At Or Near Each Distribution Board Where
              Required:</label>
            <select class="form-control" formControlName="diagramsCharts" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('diagramsCharts')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('diagramsCharts')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('diagramsCharts')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('diagramsCharts')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Nonstandard (Mixed) Cable Colour Warning Notice Near Appropriate Distribution
              Board, As Required:</label>
            <select class="form-control" formControlName="nonstandardCableColour" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('nonstandardCableColour')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('nonstandardCableColour')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('nonstandardCableColour')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('nonstandardCableColour')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near The Origin:</label>
            <select class="form-control" formControlName="alSupplyOfOrign" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('alSupplyOfOrign')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('alSupplyOfOrign')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('alSupplyOfOrign')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('alSupplyOfOrign')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near The Meter Position, If Remote
              From Origin:</label>
            <select class="form-control" formControlName="alSupplyOfMeter" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('alSupplyOfMeter')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('alSupplyOfMeter')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('alSupplyOfMeter')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('alSupplyOfMeter')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near The Distribution Board To Which
              Alternative Sources Are Connected:</label>
            <select class="form-control" formControlName="alSupplyDistribution" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('alSupplyDistribution')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('alSupplyDistribution')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('alSupplyDistribution')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('alSupplyDistribution')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near All Points Of Isolation Of ALL
              Sources Of Supply:</label>
            <select class="form-control" formControlName="allPointsIsolation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('allPointsIsolation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('allPointsIsolation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('allPointsIsolation')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('allPointsIsolation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Next Inspection Recommendation Label:</label>
            <select class="form-control" formControlName="nextInspection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('nextInspection')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('nextInspection')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('nextInspection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('nextInspection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Other Required Labelling:</label>
            <select class="form-control" formControlName="otherRequiredLabelling" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('otherRequiredLabelling')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('otherRequiredLabelling')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('otherRequiredLabelling')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('otherRequiredLabelling')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Selection Of Protective Devices And Bases Correct Type And Rating (No Signs Of Unacceptable
              Thermal Damage, Arcing Or Overheating):</label>
            <select class="form-control" formControlName="basesCorrectType" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('basesCorrectType')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('basesCorrectType')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('basesCorrectType')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('basesCorrectType')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Single Pole Protective Devices In Line Conductor Only:</label>
            <select class="form-control" formControlName="singlePole" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('singlePole')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('singlePole')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('singlePole')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('singlePole')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Protection Against Mechanical Damage Where Cables Enter Equipment:</label>
            <select class="form-control" formControlName="mechanicalDamage" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('mechanicalDamage')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('mechanicalDamage')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('mechanicalDamage')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('mechanicalDamage')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Protection Against Electromagnetic/Heating Effects Where Cables Enter Ferromagnetic
              Enclosures:</label>
            <select class="form-control" formControlName="electromagnetic" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('electromagnetic')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('electromagnetic')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('electromagnetic')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('electromagnetic')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation That All Conductor Connections Including Connections To Busbars Are Correctly
              Located In Terminals And Are Tight And Secure:</label>
            <select class="form-control" formControlName="allConductorCon" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('allConductorCon')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== b.get('allConductorCon')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && b.get('allConductorCon')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('allConductorCon')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
        </div>
        </div>
    </mat-expansion-panel>
    <!-- consumerUnit ends-->

    <!-- circuit starts-->
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Circuits</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div formArrayName="circuit" *ngFor="let c of getcircuitControls(a); let i = index">
        <div class="form-group" [formGroupName]="i"  [ngClass]="{'disableForm':service.allFieldsDisable}">
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Identification Of Conductors Including Main Earthing / Bonding Arrangements:</label>
            <select class="form-control" formControlName="identificationConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('identificationConductors')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('identificationConductors')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('identificationConductors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('identificationConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cable Installation Methods (Including Support) Suitable For The Location(s) And External
              Influences (Cables Correctly Supported Throughout):</label>
            <select class="form-control" formControlName="cableInstallation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cableInstallation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('cableInstallation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('cableInstallation')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cableInstallation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Examination Of Cables For Signs Of Mechanical Damage During Installation:</label>
            <select class="form-control" formControlName="examinationCables" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('examinationCables')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('examinationCables')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('examinationCables')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('examinationCables')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Examination Of Insulation Of Live Parts Not Damaged During Erection:</label>
            <select class="form-control" formControlName="examinationInsulation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('examinationInsulation')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('examinationInsulation')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('examinationInsulation')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('examinationInsulation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Non-Sheathed Cables Protected By Enclosure In Conduit, Ducting Or Trucking:</label>
            <select class="form-control" formControlName="nonSheathedCables" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('nonSheathedCables')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('nonSheathedCables')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('nonSheathedCables')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('nonSheathedCables')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of Containment Systems Including Flexible Conduit:</label>
            <select class="form-control" formControlName="containmentSystems" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('containmentSystems')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('containmentSystems')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('containmentSystems')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('containmentSystems')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Correct Temperature Rating Of Cable Insulation:</label>
            <select class="form-control" formControlName="temperatureRating" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('temperatureRating')?.errors }" 
           >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('temperatureRating')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('temperatureRating')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('temperatureRating')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cables Correctly Terminated In Enclosures:</label>
            <select class="form-control" formControlName="cablesTerminated" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cablesTerminated')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('cablesTerminated')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('cablesTerminated')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cablesTerminated')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Conductors For Current-Carrying Capacity With Respect To Type And Nature Of The
              Installation:</label>
            <select class="form-control" formControlName="currentCarryCapacity" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('currentCarryCapacity')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('currentCarryCapacity')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('currentCarryCapacity')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('currentCarryCapacity')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Protective Devices, Type And Fault Current Rating For Fault Protection:</label>
            <select class="form-control" formControlName="adequacyProtectDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('adequacyProtectDevices')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('adequacyProtectDevices')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('adequacyProtectDevices')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('adequacyProtectDevices')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence, Adequacy, And Correct Termination Of Protective Conductors:</label>
            <select class="form-control" formControlName="presenceProtectConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('presenceProtectConductors')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('presenceProtectConductors')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('presenceProtectConductors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('presenceProtectConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Co-ordination Between Conductors And Overload Protective Devices:</label>
            <select class="form-control" formControlName="coOrdination" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('coOrdination')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('coOrdination')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('coOrdination')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('coOrdination')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Wiring Systems And Cable Installation Methods/ Practices With Regard To The Type And Nature
              Of Installation And External Influences:</label>
            <select class="form-control" formControlName="wiringSystems" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('wiringSystems')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('wiringSystems')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('wiringSystems')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('wiringSystems')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cables Concealed Under Floors Above Ceilings, In Wall Adequately Protected Against Damage
              By Contact With Fixings:</label>
            <select class="form-control" formControlName="cablesConcealUnderFloors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cablesConcealUnderFloors')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('cablesConcealUnderFloors')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('cablesConcealUnderFloors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cablesConcealUnderFloors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional Protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For Circuits Used To Supply Mobile Equipment Not Exceeding 32A Rating For Use Outdoors In All
              Cases:</label>
            <select class="form-control" formControlName="operatingCurrentCircuits" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('operatingCurrentCircuits')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('operatingCurrentCircuits')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('operatingCurrentCircuits')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('operatingCurrentCircuits')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For All Socket Outlets Of Rating 20A Or Less Provided For Use By Ordinary Persons Unless
              Exempt:</label>
            <select class="form-control" formControlName="operatingCurrentSocket" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('operatingCurrentSocket')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('operatingCurrentSocket')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('operatingCurrentSocket')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('operatingCurrentSocket')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional Protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For Cables Concealed In Walls At a Depth Of Less Than 50mm:</label>
            <select class="form-control" formControlName="cablesConcDepth" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cablesConcDepth')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('cablesConcDepth')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('cablesConcDepth')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cablesConcDepth')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional Protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For Cables Concealed In Walls / Sections Containing Metal Sections Regardless Of Depth:</label>
            <select class="form-control" formControlName="sectionsRegardlessDepth" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('sectionsRegardlessDepth')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('sectionsRegardlessDepth')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('sectionsRegardlessDepth')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('sectionsRegardlessDepth')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Provision Of Fire Barriers, Sealing Arrangements So As To Minimize The Spread Of
              Fire:</label>
            <select class="form-control" formControlName="provisionFireBarriers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('provisionFireBarriers')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('provisionFireBarriers')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('provisionFireBarriers')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('provisionFireBarriers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Segregation/Separation Of Band I (ELV) And Band II (LV) Circuits:</label>
            <select class="form-control" formControlName="separationBand" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('separationBand')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('separationBand')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('separationBand')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('separationBand')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Segregation/separation Of Electrical And Non-Electrical Services:</label>
            <select class="form-control" formControlName="separationElectrical" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('separationElectrical')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('separationElectrical')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('separationElectrical')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('separationElectrical')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Condition Of Circuit Accessories:</label>
            <select class="form-control" formControlName="conditionCircuitAccessories" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conditionCircuitAccessories')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('conditionCircuitAccessories')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('conditionCircuitAccessories')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conditionCircuitAccessories')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cables And Conductors Correctly Terminated, Enclosed And With No UnDue Mechanical
              Strain:</label>
            <select class="form-control" formControlName="conductorCorrectTerminated" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conductorCorrectTerminated')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('conductorCorrectTerminated')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('conductorCorrectTerminated')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conductorCorrectTerminated')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>No Basic Insulation Of A Conductor Visible Outside Enclosure:</label>
            <select class="form-control" formControlName="conductorVisibleOutside" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conductorVisibleOutside')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('conductorVisibleOutside')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('conductorVisibleOutside')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conductorVisibleOutside')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Connections Of Live Conductors Adequately Enclosed:</label>
            <select class="form-control" formControlName="connLiveConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('connLiveConductors')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('connLiveConductors')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('connLiveConductors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('connLiveConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequately Connected At The Point Of Entry To Enclosure (Glands, Bushes etc.):</label>
            <select class="form-control" formControlName="adequatelyConnectedEnclosure" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('adequatelyConnectedEnclosure')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('adequatelyConnectedEnclosure')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('adequatelyConnectedEnclosure')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('adequatelyConnectedEnclosure')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of Circuit Accessories For External Influences:</label>
            <select class="form-control" formControlName="suitabilityCircuitAccessories" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('suitabilityCircuitAccessories')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('suitabilityCircuitAccessories')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('suitabilityCircuitAccessories')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('suitabilityCircuitAccessories')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Condition Of Accessories Including Socket-Outlets, Switches And Joint Boxes (Circuit
              Accessories Not Damaged, Securely Fixed, Correctly Connected, Suitable For External
              Influences):</label>
            <select class="form-control" formControlName="conditionAccessories" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conditionAccessories')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('conditionAccessories')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('conditionAccessories')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conditionAccessories')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Single-Pole Devices For Switching Or Protection In Line Conductors Only:</label>
            <select class="form-control" formControlName="singlePoleDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('singlePoleDevices')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('singlePoleDevices')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('singlePoleDevices')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('singlePoleDevices')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Connections, Including Protective Conductors, Within Accessories And Fixed And Stationary Equipment:</label>
            <select class="form-control" formControlName="adequacyConnections" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('adequacyConnections')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('adequacyConnections')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('adequacyConnections')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('adequacyConnections')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
     
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence, operation, And Correct Location of Appropriate Devices For Isolation And Switching:</label>
            <select class="form-control" formControlName="isolationSwitching" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('isolationSwitching')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== c.get('isolationSwitching')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && c.get('isolationSwitching')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('isolationSwitching')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

      </div>
        </div>
      </div>
    </mat-expansion-panel>
  <!-- circuit ends-->

   <!-- isolationCurrent starts-->
   <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h3>Isolation And Switching</h3>
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div formArrayName="isolationCurrent" *ngFor="let d of getisolationCurrentControls(a); let i = index">
      <div class="form-group" [formGroupName]="i"  [ngClass]="{'disableForm':service.allFieldsDisable}">
    <div class="row">
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Presence of Appropriate Devices :</label>
          <select class="form-control" formControlName="presenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('presenceDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('presenceDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('presenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('presenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators – Condition Of Appropriate Devices :</label>
          <select class="form-control" formControlName="conditionDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('conditionDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('conditionDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('conditionDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('conditionDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Location Of Appropriate Devices (State If Local Or Remote From Equipment In Question):</label>
          <select class="form-control" formControlName="locationDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('locationDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('locationDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('locationDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('locationDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Capable Of Being Secured In OFF Position:</label>
          <select class="form-control" formControlName="capableSecured" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('capableSecured')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('capableSecured')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('capableSecured')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('capableSecured')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Correct Operation Verified (Functional Checks):</label>
          <select class="form-control" formControlName="operationVerify" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('operationVerify')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('operationVerify')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('operationVerify')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('operationVerify')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - The installation, Circuit Or Section There of That Will Be Isolated Is Clearly Identified By Location And/Or Durable Marking:</label>
          <select class="form-control" formControlName="installCircuit" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('installCircuit')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('installCircuit')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('installCircuit')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('installCircuit')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Warning Label Posted In The Situation Where Live Sections Cannot Be Isolated By The Operation Of Single Device:</label>
          <select class="form-control" formControlName="warningLabel" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('warningLabel')?.errors }" 
         >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('warningLabel')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('warningLabel')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('warningLabel')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Presence Of Appropriate Devices:</label>
          <select class="form-control" formControlName="swPresenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swPresenceDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swPresenceDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swPresenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swPresenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Condition Of Appropriate Devices:</label>
          <select class="form-control" formControlName="swConditionDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swConditionDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swConditionDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swConditionDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swConditionDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Acceptable Location (State If Local Or Remote From Equipment In Question):</label>
          <select class="form-control" formControlName="swAcceptableLocation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swAcceptableLocation')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swAcceptableLocation')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swAcceptableLocation')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swAcceptableLocation')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Capable Of Being Secured In OFF Position:</label>
          <select class="form-control" formControlName="swCapableOffPosition" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swCapableOffPosition')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swCapableOffPosition')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swCapableOffPosition')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swCapableOffPosition')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Correct Operation Verified (Functional Check):</label>
          <select class="form-control" formControlName="swCorrectOperation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swCorrectOperation')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swCorrectOperation')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swCorrectOperation')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swCorrectOperation')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - The Circuit Or Section There Of That Will Be Disconnected Clearly Identified By Location And / Or Durable Marking:</label>
          <select class="form-control" formControlName="swCircuit" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swCircuit')?.errors }">
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swCircuit')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swCircuit')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swCircuit')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Warning Label Posted In Situations Where Live Parts Cannot Be Isolated By The Operation Of A Single Device:</label>
          <select class="form-control" formControlName="swWarningLabel" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swWarningLabel')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('swWarningLabel')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('swWarningLabel')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swWarningLabel')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping - Presence Of Appropriate Devices:</label>
          <select class="form-control" formControlName="emSwitPresenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitPresenceDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('emSwitPresenceDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitPresenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitPresenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping – Condition of appropriate devices:</label>
          <select class="form-control" formControlName="emSwitConditionDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitConditionDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('emSwitConditionDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitConditionDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitConditionDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency switching / stopping - Location Of Appropriate Devices (Readily Accessible For Operation Where Danger Might Occur):</label>
          <select class="form-control" formControlName="emSwitLocationDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitLocationDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('emSwitLocationDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitLocationDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitLocationDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping - Correct Operation Verified (Functional Check):</label>
          <select class="form-control" formControlName="emSwitOperationVerify" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitOperationVerify')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('emSwitOperationVerify')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitOperationVerify')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitOperationVerify')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping - The Installation Circuit Or Section There Of That Will Be Disconnected Clearly Identified By Location And / Or Durable Marking:</label>
          <select class="form-control" formControlName="emSwitInstallCircuit" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitInstallCircuit')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('emSwitInstallCircuit')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitInstallCircuit')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitInstallCircuit')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Functional Switching - Presence Of Appropriate Devices:</label>
          <select class="form-control" formControlName="fuSwitPresenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('fuSwitPresenceDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('fuSwitPresenceDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('fuSwitPresenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('fuSwitPresenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Functional Switching - Location Of Appropriate Devices:</label>
          <select class="form-control" formControlName="fuSwitLocationDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('fuSwitLocationDevices')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('fuSwitLocationDevices')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('fuSwitLocationDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('fuSwitLocationDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Functional Switching - Correct Operation Verified (Functional Check):</label>
          <select class="form-control" formControlName="fuSwitOperationVerify" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('fuSwitOperationVerify')?.errors }" >
           <option value="0" selected>Select Option</option>
            <option *ngFor="let value of InspectionList" [selected]="value=== d.get('fuSwitOperationVerify')?.value">{{value}}</option>
          </select>
          <div *ngIf="submitted && d.get('fuSwitOperationVerify')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('fuSwitOperationVerify')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
    </div>
    <h3><b>Current – Using Equipment (Permanently Connected)</b></h3>
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of The Equipment In Terms Of IP And Fire Ratings :</label>
            <select class="form-control" formControlName="suitabilityEquipment" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('suitabilityEquipment')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('suitabilityEquipment')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('suitabilityEquipment')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('suitabilityEquipment')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Enclosure Not Damaged / Deteriorated During Installation So As To Impair Safety :</label>
            <select class="form-control" formControlName="enclosureNotDamaged" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('enclosureNotDamaged')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('enclosureNotDamaged')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('enclosureNotDamaged')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('enclosureNotDamaged')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability For The Environment And External Influences:</label>
            <select class="form-control" formControlName="suitabilityEnvironment" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('suitabilityEnvironment')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('suitabilityEnvironment')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('suitabilityEnvironment')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('suitabilityEnvironment')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Security Of Fixing:</label>
            <select class="form-control" formControlName="securityFixing" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('securityFixing')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('securityFixing')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('securityFixing')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('securityFixing')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cable Entry Holes In Ceilings Above Luminaries, Seized Or Sealed So As To Restrict The Spread Of Fire.:</label>
            <select class="form-control" formControlName="cableEntryHoles" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('cableEntryHoles')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('cableEntryHoles')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('cableEntryHoles')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('cableEntryHoles')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Provision (Condition) Of Under Voltage Protection, Where Specified.:</label>
            <select class="form-control" formControlName="provisionVoltage" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('provisionVoltage')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('provisionVoltage')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('provisionVoltage')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('provisionVoltage')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Provision (Condition) Of Overload Protection, Where Specified.:</label>
            <select class="form-control" formControlName="provisionOverload" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('provisionOverload')?.errors }">
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('provisionOverload')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('provisionOverload')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('provisionOverload')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Recessed Luminaires (Downlighters) - Correct Type Of Lamps Fitted :</label>
            <select class="form-control" formControlName="correctTypeLamps" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('correctTypeLamps')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('correctTypeLamps')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('correctTypeLamps')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('correctTypeLamps')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Recessed Luminaires (Downlighters) - Installed To Minimise Build-Up Of Heat By Use Of “Fire Rated” Fittings, Insulation Displacement Box Or Similar :</label>
            <select class="form-control" formControlName="insulaDisplacementBox" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('insulaDisplacementBox')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('insulaDisplacementBox')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('insulaDisplacementBox')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('insulaDisplacementBox')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>No Signs Of Overheating To Surrounding Building Fabric (Applicable For Periodic Inspection):</label>
            <select class="form-control" formControlName="overheatSurrounding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('overheatSurrounding')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('overheatSurrounding')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('overheatSurrounding')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('overheatSurrounding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>No Signs Of Overheating To Conductors / Terminations (Applicable For Periodic Inspection):</label>
            <select class="form-control" formControlName="overheatConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('overheatConductors')?.errors }" >
             <option value="0" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== d.get('overheatConductors')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && d.get('overheatConductors')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('overheatConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
  </div>
</div>
  </mat-expansion-panel>
<!-- isolationCurrent ends--> 
</mat-accordion>
</div>
 
<mat-icon class="mousechange" *ngIf="getIncomingControls().length > 1" (click)="removeItem(i)"
  style="float:right;margin: 0px 15px 0px 15px;">delete</mat-icon>
</div>

<mat-accordion>
  <!-- comments start-->
  <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="hideShowComment"
  style="margin: 20px;margin-top: -19px;">
   <mat-expansion-panel-header>
     <mat-panel-title>
       <h3>Comments</h3>
     </mat-panel-title>
   </mat-expansion-panel-header>
  
  <mat-progress-spinner style="margin: 0 auto;" *ngIf="spinner"
 color="primary"
  [mode]="mode"
  value="50"
 diameter="50">
 </mat-progress-spinner>
 
 <div class="card-body" style="padding: 0px;" *ngIf="cardBodyComments">
 <button class="btn dropdown" (click)="showSubmenu = !showSubmenu" style="width:100%;" 
 *ngIf="(isExpanded || isShowing) || (toggleHideShow || getViewerCommentControls().length > 2)">
 <mat-icon class="menu-button" [ngClass]="{'rotated' : showSubmenu}" style="float: left;">chevron_right</mat-icon> 
 <label style="float: left;">Check comments here!</label>
 </button> 
 <span *ngIf="getViewerCommentControls().length==0">No comments!</span>
 <mat-icon class="mousechange" (click)="refreshCommentSection()" style="float: right;"
 title="Refresh comment">refresh</mat-icon> 
 
 <div  formArrayName="viewerCommentArr" *ngFor="let a of getViewerCommentControls(); let i = index" 
 style="margin-left: 10px;">
 <div [formGroupName]="i" style="margin-left: 30px;">
 <div class="submenu" [ngClass]="{'expanded' : showSubmenu}" [ngStyle]="{'display': showSubmenu ? 'block' : 'none'}">
 
 <div class="input-group" [ngClass]="{even: i!=0}" style="align-items: end;">
   <div class="input-group-prepend" title="Viewer" style="height: 26px;">
       <span class="input-group-text" style="line-height: unset;">
           <i class="bi bi-eye-fill"></i>
       </span>
   </div>
   <textarea cols="60" rows="1" formControlName="viewerComments" placeholder="Enter Viewer Comment">
  </textarea>
 
 <div style="display: flex;margin-left: 25px;" *ngIf="replyCommentBox">
 
         <mat-icon class="mousechange" (click)="sendViewerComment(a)" [ngClass]="{'disable':disableSend== true}"
         *ngIf="((a.get('inspectorComments')?.value=='' || a.get('inspectorComments')?.value==null) && sendComment)"
         title="Send comment">send</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;
 
         <mat-icon class="mousechange" (click)="replyToViewerComment(a)" 
         *ngIf="((a.get('viewerComments')?.value!='') && (getViewerCommentControls().length-1 == i)) && hideAsViewerLogin "
        title="Reply comment">reply</mat-icon>&nbsp;&nbsp;&nbsp;&nbsp;
 
        <mat-icon class="mousechange" (click)="ViewerRemoveComment(i)" style="float:right;position: relative;left: 630%;"
        *ngIf="(a.get('inspectorComments')?.value=='' || a.get('viewerComments')?.value=='') && hideDelete" >delete</mat-icon>
        &nbsp;&nbsp;&nbsp;&nbsp;
 
       
 </div>
 </div>
 
 
 <span [ngClass]="i!=0 ? 'viewer' : 'even1'">
   {{a.value.viewerUserName}} {{a.value.viewerDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}
 </span>  
 
 <div *ngIf="replyCommentBox">
 
 <ul style="list-style-type:none;margin-bottom: 0rem;">
 <li> 
 
 <div class="input-group" style="align-items: end;"
 *ngIf="(a.get('inspectorComments')?.value!='' && a.get('inspectorComments')?.value!=null) || showReplyBox" >
   <div class="input-group-prepend" title="Inspector" style="height: 26px;">
       <span class="input-group-text" style="line-height: unset;">
           <i class="bi bi-person-fill"></i>
       </span>
   </div>
   <textarea cols="60" rows="1" placeholder="Enter Inspector Comment" formControlName="inspectorComments" ></textarea>
 <div style="display: initial;margin-left: 25px;">
 
    <mat-icon class="mousechange" (click)="inspectorComment(a)" [ngClass]="{'disable':disableReply== true}"
    *ngIf="(getViewerCommentControls().length-1 == i) && SendReply" title="Send reply">send</mat-icon>
 
    <mat-icon class="mousechange" (click)="approveComment(a)" [ngClass]="{'disable':enabledRequest== true}"
    *ngIf="((getViewerCommentControls().length-1 == i) && hideapprove) && a.value.approveOrReject != 'REJECT'"
    title="Approve comment">thumb_up_alt</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;
 
    <mat-icon class="mousechange" (click)="rejectComment(a)" 
    [ngClass]="{'disable':a.value.approveOrReject === 'REJECT' || enabledRequest== true}"
     *ngIf="((getViewerCommentControls().length-1 == i) && hideReject) || 
     ((a.get('inspectorComments')?.value!='' || a.get('viewerComments')?.value!='') && a.value.approveOrReject=='REJECT')"
    title="Reject comment">thumb_down_alt</mat-icon>

    <mat-icon class="mousechange" (click)="addAnotherviewerComment()"
    *ngIf="((getViewerCommentControls().length-1 == i) && hideAdd) 
    || ((a.value.approveOrReject === 'REJECT' && getViewerCommentControls().length-1 == i) && addReject)"
     style="float:right;position: relative;left: 718%;" title="Add another comment">add_box</mat-icon>
 
 </div>
 </div>
 
 <span style="display: block;font-size: 11px;text-align: center;margin-left: -29%;">
 {{a.value.inspectorUserName}} {{a.value.inspectorDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}</span>  
      </li>
    </ul>
   </div> 
   </div>
   </div>
 </div> 
  
 </div>   
  
 </mat-expansion-panel>
 
 <!-- completed comments start-->
 <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="completedComments"
 style="margin: 20px;margin-top: -19px;">
 <mat-expansion-panel-header>
 <mat-panel-title>
 <h3>Completed Comments</h3>
 </mat-panel-title>
 
 </mat-expansion-panel-header>
 <div class="card-body" style="padding: 0px;">
 <div formArrayName="completedCommentArr1" *ngFor="let x of getCompletedCommentControls1(); let j = index" >
 <div [formGroupName]="j">
 
 <button class="btn dropdown" (click)="showHideAccordion(j);" style="width:100%;" 
 *ngIf="(isExpanded || isShowing) || toggleHideShow || getCompletedCommentControls1().length >= 1">
 <mat-icon class="menu-button" style="float: left;">chevron_right</mat-icon> 
 <label style="float: left;">{{getViewerFirstMessage(x)}}...</label>
 </button> 
 
 <div *ngIf="j === expandedIndexx" >
 <div  formArrayName="completedCommentArr" *ngFor="let a of getCompletedCommentControls(x); let i = index" 
 style="margin-left: 10px;" > 
 <div [formGroupName]="i" style="margin-left: 30px;">
 <div class="submenu" >
 
 <div class="input-group" [ngClass]="{even: i!=0}" style="align-items: end;">
 <div class="input-group-prepend" title="Viewer" style="height: 26px;">
   <span class="input-group-text" style="line-height: unset;">
       <i class="bi bi-eye-fill"></i>
   </span>
 </div>
 <textarea cols="60" rows="1"  formControlName="viewerComments" placeholder="Enter Viewer Comment">
 </textarea>
 </div>
 <div>
 <span [ngClass]="i!=0 ? 'viewer' : 'even1'">
 {{a.value.viewerUserName}} 
 {{a.value.viewerDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}
 </span>  
 </div>
 <div class="input-group" style="margin-left: 41px;width: 50%;align-items: end;">
 <div class="input-group-prepend" title="Inspector" style="height: 26px;">
 <span class="input-group-text" style="line-height: unset;">
 <i class="bi bi-person-fill"></i>
 </span>
 </div>
 <textarea cols="60" rows="1"  formControlName="inspectorComments" placeholder="Enter Viewer Comment"></textarea>
 </div>
 
 <span style="display: block;font-size: 11px;text-align: center;margin-left: -25%;">
 {{a.value.inspectorUserName}} {{a.value.inspectorDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}</span>  
  
 </div>
 </div>
 </div> 
 </div>
 </div>
 </div>
 </div>   
 
 </mat-expansion-panel>
 <!-- completed comments end-->
 </mat-accordion>
 <!-- <mat-icon class="mousechange" *ngIf="getIncomingControls().length > 1" (click)="removeItem(i)"
  style="float:right;margin: 0px 15px 0px 15px;">delete</mat-icon> -->
<div *ngIf="validationError" style="text-align: center;margin-top: 30px;">
  <span class="alert alert-danger">{{validationErrorMsg}}</span>
</div>
<div *ngIf="commentSuccess" style="text-align: center;margin-top: 30px;">
  <span class="successshow">Your comment has been sent to Inspector</span>
</div>
<div *ngIf="commentApprove" style="text-align: center;margin-top: 30px;">
  <span class="alert alert-success">Your response to comments has been approved</span>
</div>
<div *ngIf="commentReject" style="text-align: center;margin-top: 30px;">
  <span class="alert alert-danger">Your response to comments has been rejected</span>
</div>
<br>
<div style="text-align: center;margin-top: 40px;margin-bottom: 20px;">
  <!-- <button class="previous" mat-button matStepperPrevious>&laquo; Back</button> -->
  <button  class="next" (click)="gotoNextModal(content3,content2)" mat-button >Next &raquo;</button>
</div>
</form>


<button class="btn btn-info mousechange" (click)="addItem()" title="Add another location" [ngClass]="{'disableForm':service.allFieldsDisable}"

style="padding: 5px 0px 0px 0px;
left: 2%;
top: -100px;
width: 3%;
height: 35px;
position: relative;">
<mat-icon aria-hidden="false" aria-label="Example home icon" mat-list-icon>add_box</mat-icon>
</button>
</div>

<ng-template #content3 let-modal>
<div class="modal-body">
<div class="centre-text m-btm30">
<div *ngIf="success" style="text-align: center;">
  <span class="alert alert-success">{{successMsg}}</span>
 </div>
 <div *ngIf="Error" style="text-align: center;">
   <span class="alert alert-danger">{{errorMsg}}</span>
  </div>
     </div>
 </div>
<br>
 <button type="button" class="close" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
 aria-label="Close" (click)="closeModalDialog()" matStepperNext>
  <span aria-hidden="true">Ok</span>
</button>
</ng-template>


<ng-template #content2 let-modal>
  <div class="modal-body">
   <div class="centre-text m-btm30">
    <div style="text-align: center;">
      <span class="successshow">Are you sure you want to procced? </span>
      <br>
      <span style="font-size: 12px;">Note: Please verify all the details! </span>
     </div>
    </div>
   </div>
  <br>
  <div class="row">
     <button type="button" class="col-md-6" style="text-align:center; width: auto;" class="btn btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close" (click)="closeModalDialog()" matStepperNext>
     <i class="bi bi-arrow-right-circle"></i>&nbsp;
      <span aria-hidden="true">Ok</span>
  </button>
  <button type="button" class="col-md-6" style="width: auto;" class="btn btn-danger btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close" (click)="closeModalDialog()">
     <i class="bi bi-x icon"></i>
      <span aria-hidden="true">Cancel</span>
  </button>
</div>

  </ng-template>