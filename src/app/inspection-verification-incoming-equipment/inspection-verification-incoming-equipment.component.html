<!-- step 3 -->
<div *ngIf="tabError" style="text-align: center;">
  <span class="alert alert-danger">{{tabErrorMsg}}</span>
</div>
<div *ngIf="validationErrorTab" style="text-align: center;">
  <span class="alert alert-danger">{{validationErrorMsgTab}}</span>
</div>

<div class="card">
  <div class="card-body">
  <div class="row">
    <div class="col-sm-12">
      <a  [ngClass]="{'glow':service.observationGlowInspection}"
      style="margin-top: -10px;margin-bottom: 5px;float: right;text-decoration: underline;">Observations</a>
    </div>
    </div>
  <form [formGroup]="addstep3" (ngSubmit)="nextTab3(flag)" (keyup)="onKeyForm($event)" (change)="onChangeForm($event)">
<div formArrayName="incomingArr" *ngFor="let a of getIncomingControls(); let i = index" >
  <div [formGroupName]="i" >
  <div class="search-bar">
    <div class="form-group" [ngClass]="{'disableForm':service.allFieldsDisable}">
      <h4 *ngIf="i==0"><b>Note:</b> For periodic inspection, a visual inspection should be made to find out the external condition of all electrical equipment which is not concealed. Further detailed inspection, including partial dismantling of equipment (as required), should be carried out as agreed with the customer.</h4>
      <br>
      <div class="row">
        <div class="col-md-4">
              <label>Location Number*</label>
              <input type="text" min="1" class="form-control" formControlName="locationNumber" (keypress)="keyPressNumbers($event)" maxlength="10"
               placeholder="Enter Location Number" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
               [ngClass]="{ 'is-invalid': submitted && a.get('locationNumber')?.errors }">
              <div *ngIf="submitted && a.get('locationNumber')?.errors" class="invalid-feedback">
                <div *ngIf="a.get('locationNumber')?.errors?.required">Location Number is required</div>
            </div> 
        </div>
        <div class="col-md-4">
              <label>Location Name*</label>
              <input type="text" class="form-control" formControlName="locationName"
              placeholder="Enter Location Name" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
              [ngClass]="{ 'is-invalid': submitted && a.get('locationName')?.errors }">
              <div *ngIf="submitted && a.get('locationName')?.errors" class="invalid-feedback">
                <div *ngIf="a.get('locationName')?.errors?.required">Location name is required</div>
            </div> 
        </div>

        <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':service.allFieldsDisable}" *ngIf="getIncomingControls().length > 1" (click)="removeItem(i)" title="Delete" style="position: relative; top: 34px; left: 27%;">remove_circle_outline</mat-icon>
      </div>
  </div>
</div>

<br>
<div class="row" formArrayName="inspectionOuterObervation" *ngFor="let b of getObservationControls(a); let i = index" [ngClass]="{'disableForm':service.allFieldsDisable}">	
  <div class="col-md-6" [formGroupName]="i">	
    <mat-form-field  class="client-description " >	
      <mat-label>	
        <h3>Observations</h3>	
      </mat-label>	
      <textarea matInput  class="client-description "	formControlName="observationDescription"
     maxlength="2000" placeholder="Ex. Observations  ..."  [ngClass]="{ 'is-invalid': submitted && b.get('observationDescription')?.errors }"></textarea>	
     <div *ngIf="submitted && b.get('observationDescription')?.errors" class="invalid-feedback">
      <div *ngIf="b.get('observationDescription')?.errors?.required">Observation is required</div>
  </div> 
    </mat-form-field>	
  </div>
  </div>	
  <br>
  <div class="row">
    <div class="col-sm-12">         
      <div class="form-group">
        <label>Protection against electric shock:</label>
        <select class="form-control" formControlName="electricShock" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
        [ngClass]="[submitted && a.get('electricShock')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
         <option value="" selected>Select Option</option>
         <option value="Protective measures with basic and fault protection" [selected]="'Protective measures with basic and fault protection' === a.get('electricShock')?.value">Protective measures with basic and fault protection</option>
         <option value="Protective measures (Limitation of Voltage or current)" [selected]="'Protective measures (Limitation of Voltage or current)' === a.get('electricShock')?.value">Protective measures (Limitation of Voltage or current)</option>
         <option value="Protective measures with Additional Protection" [selected]="'Protective measures with Additional Protection' === a.get('electricShock')?.value">Protective measures with Additional Protection</option>
        </select>
        <div *ngIf="submitted && a.get('electricShock')?.errors" class="invalid-feedback">
          <div *ngIf="a.get('electricShock')?.errors?.required">Field Is Required</div>
      </div>
      </div>
    </div>
  </div>
  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="a.get('electricShock')?.value === 'Protective measures with basic and fault protection'">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Protective measures with basic and fault protection</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row"> 
        <div class="col-md-6">         
          <div class="form-group">
            <label>Basic Protection:</label>
            <select class="form-control" formControlName="basicProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('basicProtection')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Basic Insulation" [selected]="'Basic Insulation' === a.get('basicProtection')?.value">Basic Insulation</option>
             <option value="Reinforced Insulation" [selected]="'Reinforced Insulation' === a.get('basicProtection')?.value">Reinforced Insulation</option>
             <option value="Barriers or enclosures" [selected]="'Barriers or enclosures' === a.get('basicProtection')?.value">Barriers or enclosures</option>
            </select>
            <div *ngIf="submitted && a.get('basicProtection')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('basicProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-md-6">         
          <div class="form-group">
            <label>Faultprotection:</label>
            <select class="form-control" formControlName="faultProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('faultProtection')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Supplementry insulation" [selected]="'Supplementry insulation' === a.get('faultProtection')?.value">Supplementry insulation</option>
             <option value="Protective equipotential bonding" [selected]="'Protective equipotential bonding' === a.get('faultProtection')?.value">Protective equipotential bonding</option>
             <option value="Protective screening" [selected]="'Protective screening' === a.get('faultProtection')?.value">Protective screening</option>
             <option value="Protective equipotential bonding and automatic disconnection of supply" [selected]="'Protective equipotential bonding and automatic disconnection of supply' === a.get('faultProtection')?.value">Protective equipotential bonding and automatic disconnection of supply</option>
             <option value="Simple separation" [selected]="'Simple separation' === a.get('faultProtection')?.value">Simple separation</option>
            </select>
            <div *ngIf="submitted && a.get('faultProtection')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('faultProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="a.get('electricShock')?.value === 'Protective measures (Limitation of Voltage or current)'">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Protective measures (Limitation of Voltage or current)</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row"> 
        <div class="col-md-4">         
          <div class="form-group">
            <label>Limited value:</label>
            <select class="form-control" formControlName="limitedValue" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('limitedValue')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Limitation ov voltage (PELV)" [selected]="'Limitation ov voltage (PELV)' === a.get('limitedValue')?.value">Limitation ov voltage (PELV)</option>
             <option value="Limitation ov voltage (SELV)" [selected]="'Limitation ov voltage (SELV)' === a.get('limitedValue')?.value">Limitation ov voltage (SELV)</option>
             <option value="Limitation of current" [selected]="'Limitation of current' === a.get('limitedValue')?.value">Limitation of current</option>
            </select>
            <div *ngIf="submitted && a.get('limitedValue')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('limitedValue')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-md-4">         
          <div class="form-group ">
            <label>Protective measure:</label>
            <select class="form-control" formControlName="protectiveMeasure" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('protectiveMeasure')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Protective Seperation" [selected]="'Protective Seperation' === a.get('protectiveMeasure')?.value">Protective Seperation</option>
             <option value="NIL" [selected]="'NIL' === a.get('protectiveMeasure')?.value">NIL</option>
            </select>
            <div *ngIf="submitted && a.get('protectiveMeasure')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('protectiveMeasure')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-md-4">         
          <div class="form-group">
            <label>Additional measure:</label>
            <select class="form-control" formControlName="additionalMeasure" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('additionalMeasure')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Simple seperation from earth" [selected]="'Simple seperation from earth' === a.get('additionalMeasure')?.value">Simple seperation from earth</option>
             <option value="Simple seperation from PELV" [selected]="'Simple seperation from PELV' === a.get('additionalMeasure')?.value">Simple seperation from PELV</option>
             <option value="Simple seperation from other SELV" [selected]="'Simple seperation from other SELV' === a.get('additionalMeasure')?.value">Simple seperation from other SELV</option>
             <option value="Additional basic insulation" [selected]="'Additional basic insulation' === a.get('additionalMeasure')?.value">Additional basic insulation</option>
             <option value="Barriers or enclosures" [selected]="'Barriers or enclosures' === a.get('additionalMeasure')?.value">Barriers or enclosures</option>
            </select>
            <div *ngIf="submitted && a.get('additionalMeasure')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('additionalMeasure')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="a.get('electricShock')?.value === 'Protective measures with Additional Protection'">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Protective measures with Additional Protection</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row"> 
        <div class="col-md-6">         
          <div class="form-group">
            <label>Additonal protection:</label>
            <select class="form-control" formControlName="additionalProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('additionalProtection')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Additional protection by lesser than 30 mA RCD" [selected]="'Additional protection by lesser than 30 mA RCD' === a.get('additionalProtection')?.value">Additional protection by lesser than 30 mA RCD</option>
             <option value="Additional protection by Supplementary protective equipotential bonding" [selected]="'Additional protection by Supplementary protective equipotential bonding' === a.get('additionalProtection')?.value">Additional protection by Supplementary protective equipotential bonding</option>
            </select>
            <div *ngIf="submitted && a.get('additionalProtection')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('additionalProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-md-6">         
          <div class="form-group">
            <label>Faultprotection:</label>
            <select class="form-control" formControlName="faultprotection1" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('faultprotection1')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Protective measures with basic and fault protection" [selected]="'Protective measures with basic and fault protection' === a.get('faultprotection1')?.value">Protective measures with basic and fault protection</option>
             <option value="Protective measures (Limitation of Voltage or current)" [selected]="'Protective measures (Limitation of Voltage or current)' === a.get('faultprotection1')?.value">Protective measures (Limitation of Voltage or current)</option>
             <option value="Protective measures with Additional Protection" [selected]="'Protective measures with Additional Protection' === a.get('faultprotection1')?.value">Protective measures with Additional Protection</option>
            </select>
            <div *ngIf="submitted && a.get('faultprotection1')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('faultprotection1')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
    <!-- IpaInsection starts-->
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Incoming Equipment</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cable/Busbar trunking:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
            matTooltip="Type and availability status to be included."
        matTooltipClass="multiline-tooltip"
       aria-label="Button that shows a red tooltip"
        class="example-button"> info_outline
   </mat-icon>
            <select class="form-control" formControlName="serviceCable"
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('serviceCable')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
           <option value="" selected>Select Option</option>
            <option *ngFor="let value of cableBusBarList" [selected]="value=== a.get('serviceCable')?.value">{{value}}</option>
          </select>
            <div *ngIf="submitted && a.get('serviceCable')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('serviceCable')?.errors?.required">Service Cable is required</div>
          </div>
            
          </div>
        </div>

        <div class="col-sm-12">
        
          <div class="form-group equipment">
            <label>Incoming Protective Device:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
            matTooltip="Availability status to be included."
        matTooltipClass="multiline-tooltip"
       aria-label="Button that shows a red tooltip"
        class="example-button"> info_outline
   </mat-icon>
            <select class="form-control" formControlName="serviceFuse" 
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('serviceFuse')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('serviceFuse')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('serviceFuse')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('serviceFuse')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('serviceFuse')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('serviceFuse')?.errors?.required">Service Fuse is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Energy Meters for Mains Incoming:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
            matTooltip="Availability status to be included."
           matTooltipClass="multiline-tooltip"
          aria-label="Button that shows a red tooltip"
           class="example-button"> info_outline
        </mat-icon>
            <select class="form-control" formControlName="meterDistributor" 
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('meterDistributor')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('meterDistributor')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('meterDistributor')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('meterDistributor')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('meterDistributor')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('meterDistributor')?.errors?.required">Meter Distributor is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Energy Meters for Outgoings:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
           matTooltip="Availability status to be included."
           matTooltipClass="multiline-tooltip"
           aria-label="Button that shows a red tooltip"
           class="example-button"> info_outline
       </mat-icon>
            <select class="form-control" formControlName="meterConsumer" 
            [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('meterConsumer')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">

             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('meterConsumer')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('meterConsumer')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('meterConsumer')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('meterConsumer')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('meterConsumer')?.errors?.required">Meter Consumer is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Over Voltage Protection (overvoltage category maintained):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
            matTooltip="Availability status to be included."
            matTooltipClass="multiline-tooltip"
            aria-label="Button that shows a red tooltip"
            class="example-button"> info_outline
        </mat-icon>
            <select class="form-control" formControlName="meterEqu" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('meterEqu')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">

             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('meterEqu')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('meterEqu')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('meterEqu')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('meterEqu')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('meterEqu')?.errors?.required">Metering Equipment is required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          
          <div class="form-group equipment">
            <label>TOV Control Measures On LV Side Due To HV Fault:</label>
            <mat-icon style="float: right;font-size: 18px;
                line-height: unset;"
                matTooltip="Availability status to be included."
                matTooltipClass="multiline-tooltip"
                aria-label="Button that shows a red tooltip"
                class="example-button"> info_outline
            </mat-icon>
            <select class="form-control" formControlName="tovMeasuresLVHV" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('tovMeasuresLVHV')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">

             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('tovMeasuresLVHV')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('tovMeasuresLVHV')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('tovMeasuresLVHV')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('tovMeasuresLVHV')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('tovMeasuresLVHV')?.errors?.required">TOV Control Measures required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Isolator (Means To Isolate The Incoming Supply System):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
        matTooltip="Availability status to be included. Generally, the incoming protective device have this facility."
        matTooltipClass="multiline-tooltip"
        aria-label="Button that shows a red tooltip"
        class="example-button"> info_outline
    </mat-icon>
            <select class="form-control" formControlName="isolator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('isolator')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('isolator')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('isolator')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('isolator')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('isolator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('isolator')?.errors?.required">Isolator is required</div>
          </div>
          </div>
        </div>
        
        <div class="col-sm-12">
          <p><b>Note:</b> Where inadequacies in distributor’s equipment are encountered, it is recommended that the user informs this to the appropriate authority.</p>
        </div>
      </div>
        <!-- </div>
      </div> -->
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Presence of Adequate Arrangements For Parallel Or Switched Alternative Sources Of Supply </h3>
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="row">
        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Dedicated Earthing Arrangement Independent To That Of Public Supply:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
            matTooltip="Arrangement of earthing downstream point of commencement of supply."
            matTooltipClass="multiline-tooltip"
            aria-label="Button that shows a red tooltip"
            class="example-button"> info_outline
        </mat-icon>
            <select class="form-control" formControlName="earthingArrangement" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('earthingArrangement')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('earthingArrangement')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('earthingArrangement')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('earthingArrangement')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('earthingArrangement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('earthingArrangement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Presence of Adequate Arrangements Where Generator To Operate in Parallel With The Public
              Supply System:</label>
            <select class="form-control" formControlName="adequateArrangement" 
            [ngClass]="{ 'is-invalid': submitted && a.get('adequateArrangement')?.errors }" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('adequateArrangement')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('adequateArrangement')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('adequateArrangement')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('adequateArrangement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('adequateArrangement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Correct Connections Of Generator In Parallel. (Note: Special Attention To Circulating
              Currents):</label>
            <select class="form-control" formControlName="connectionGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('connectionGenerator')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('connectionGenerator')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('connectionGenerator')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('connectionGenerator')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('connectionGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('connectionGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Compatibility of Characteristics Of Means of Generation :</label>
            <select class="form-control" formControlName="compatibilityCharacteristics" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('compatibilityCharacteristics')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('compatibilityCharacteristics')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('compatibilityCharacteristics')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('compatibilityCharacteristics')?.value">Not Applicable</option>            
            </select>
            <div *ngIf="submitted && a.get('compatibilityCharacteristics')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('compatibilityCharacteristics')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Means To Provide Automatic Disconnection Of Generator In The Event Of
              Loss Of Public Supply System Or Voltage Or Frequency Deviation Beyond Declared Values:</label>
            <select class="form-control" formControlName="automaticDisconnectGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('automaticDisconnectGenerator')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('automaticDisconnectGenerator')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('automaticDisconnectGenerator')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('automaticDisconnectGenerator')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('automaticDisconnectGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('automaticDisconnectGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Means to prevent connection of generator in the event of loss of public supply system or voltage or frequency deviation beyond declared values:</label>
            <select class="form-control" formControlName="preventConnectGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('preventConnectGenerator')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('preventConnectGenerator')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('preventConnectGenerator')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('preventConnectGenerator')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('preventConnectGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('preventConnectGenerator')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Means to Isolate Generator From The Public Supply System :</label>
            <select class="form-control" formControlName="isolateGenerator" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('isolateGenerator')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('isolateGenerator')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('isolateGenerator')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('isolateGenerator')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('isolateGenerator')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('isolateGenerator')?.errors?.required">Field Is Required</div>
            </div>
          </div>
        </div>
      </div>
        
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Automatic Disconnection Of Supply</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row">

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Main Earthing/Bonding arrangements:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="If the earth busbar of mains incoming panel and nearby metal installations such as metal pipes, metal handrails and lightning protection down conductors are not connected, select NO"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="mainEarting" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('mainEarting')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('mainEarting')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('mainEarting')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('mainEarting')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('mainEarting')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('mainEarting')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          
          <div class="form-group equipment">
            <label>Presence and adequacy of energy suppliers earthing arrangement or installation earth electrode arrangement:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="For TN system, protective conductor to source neutral is applicable. 
             TT system earth electrode is applicable."
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="earthElectordeArrangement" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('earthElectordeArrangement')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('earthElectordeArrangement')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('earthElectordeArrangement')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('earthElectordeArrangement')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('earthElectordeArrangement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('earthElectordeArrangement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Presence And Adequacy Of Earthing Conductor And Connections:</label>
            <select class="form-control" formControlName="earthConductorConnection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('earthConductorConnection')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('earthConductorConnection')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('earthConductorConnection')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('earthConductorConnection')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('earthConductorConnection')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('earthConductorConnection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Accessibility Of Earthing Conductor Connections:</label>
            <select class="form-control" formControlName="accessibility" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('accessibility')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('accessibility')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('accessibility')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('accessibility')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('accessibility')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('accessibility')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Presence and Adequacy Of Main Protective Bonding Conductors And Connections (Colour, Sizes,
              Termination, and Provision of Independent Earthing) :</label>
              <mat-icon style="float: right;font-size: 18px;
              line-height: unset;"
               matTooltip="If the earth busbar of mains incoming panel and nearby metal installations such as metal pipes, metal handrails and lightning protection down conductors are not connected, select NO"
               matTooltipClass="multiline-tooltip"
               aria-label="Button that shows a red tooltip"
               class="example-button"> info_outline
             </mat-icon>
            <select class="form-control" formControlName="aainProtectBonding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('aainProtectBonding')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('aainProtectBonding')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('aainProtectBonding')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('aainProtectBonding')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('aainProtectBonding')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('aainProtectBonding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          
          <div class="form-group equipment">
            <label>Accessibility Of All Protective Bonding Connections:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="If the earth busbar of mains incoming panel and nearby metal installations such as metal pipes, metal handrails and lightning protection down conductors are not connected, select NO"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="allProtectBonding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('allProtectBonding')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
            
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('allProtectBonding')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('allProtectBonding')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('allProtectBonding')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('allProtectBonding')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('allProtectBonding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Presence and Adequacy of Electrical Earthing/Bonding Labels At All Appropriate
              Locations:</label>
            <select class="form-control" formControlName="allAppropriateLocation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('allAppropriateLocation')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('allAppropriateLocation')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('allAppropriateLocation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('allAppropriateLocation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('allAppropriateLocation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('allAppropriateLocation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment" [ngClass]="{'disableForm':service.allFieldsDisable}">
            <label>Accessibility Of FELV Requirements Satisfied:</label>
            <select class="form-control" formControlName="felvRequirement" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && a.get('felvRequirement')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('felvRequirement')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('felvRequirement')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('felvRequirement')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('felvRequirement')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('felvRequirement')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Other Methods Of Protection</h3>
          <button  class="ButtonSave"  *ngIf="intermediateSaveInspection" title="Save" (click)="intermedeateIpaoSave('content3')"  mat-button ><i class="fa fa-save"></i></button>	
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row">
        <div class="col-sm-12">
          <p><b>Note:</b>(applicable to locations where automatic disconnection of supply is not employed). If any of the methods listed below are employed details should be provided on separate page.</p>
        </div>
      </div>
      
      <h3><b><u>Basic and Fault Protection</u></b></h3>
      <div class="row">

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>SELV System, Including The Source And Associated Circuits:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation."
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="selvSystem" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('selvSystem')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('selvSystem')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('selvSystem')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('selvSystem')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('selvSystem')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('selvSystem')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>PELV system, Including The Source And Associated Circuits:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="pelvSystem" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('pelvSystem')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('pelvSystem')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('pelvSystem')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('pelvSystem')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('pelvSystem')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('pelvSystem')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
        
          <div class="form-group equipment">
            <label>Double Insulation (Class II or Equivalent Equipment And Associated Circuits):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="doubleInsulation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('doubleInsulation')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('doubleInsulation')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('doubleInsulation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('doubleInsulation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('doubleInsulation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('doubleInsulation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

      <div class="row">

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>ReInforced Insulation:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="reinforcedInsulation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('reinforcedInsulation')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('reinforcedInsulation')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('reinforcedInsulation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('reinforcedInsulation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('reinforcedInsulation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('reinforcedInsulation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment"> 
            <label>Electrical separation for one item of equipment (shaver supply unit):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="basicElectricalSepartion" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('basicElectricalSepartion')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('basicElectricalSepartion')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('basicElectricalSepartion')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('basicElectricalSepartion')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('basicElectricalSepartion')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('basicElectricalSepartion')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <!-- <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Isolator(Means to isolate the public supply system) :</label>
            <select class="form-control" formControlName="isolatePublicSupply" 
            [ngClass]="{ 'is-invalid': submitted && a.get('isolatePublicSupply')?.errors }" >
             <option value="" selected>Select Option</option>
              <option *ngFor="let value of InspectionList" [selected]="value=== a.get('isolatePublicSupply')?.value">{{value}}</option>
            </select>
            <div *ngIf="submitted && a.get('isolatePublicSupply')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('isolatePublicSupply')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div> -->
      </div>

      <h3><b><u>Basic Protection (Prevention Of Contact With Live Parts)</u></b></h3>
      <div class="row">

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Insulation of Live Parts (Conductors Completely Covered With Durable Insulating
              Material):</label>
              <mat-icon style="float: right;font-size: 18px;
              line-height: unset;"
               matTooltip="YES - If this protective measure is applied in the installation"
               matTooltipClass="multiline-tooltip"
               aria-label="Button that shows a red tooltip"
               class="example-button"> info_outline
             </mat-icon>
            <select class="form-control" formControlName="insulationLiveParts" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('insulationLiveParts')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('insulationLiveParts')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('insulationLiveParts')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('insulationLiveParts')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('insulationLiveParts')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('insulationLiveParts')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
        
          <div class="form-group equipment">
            <label>Barriers Or Enclosures (Correct IP Rating):</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="barriersEnclosers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('barriersEnclosers')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('barriersEnclosers')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('barriersEnclosers')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('barriersEnclosers')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('barriersEnclosers')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('barriersEnclosers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
       
          <div class="form-group equipment">
            <label>Obstacles:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="obstacles" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('obstacles')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('obstacles')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('obstacles')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('obstacles')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('obstacles')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('obstacles')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Placing out of reach:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="placingOutReach" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('placingOutReach')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('placingOutReach')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('placingOutReach')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('placingOutReach')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('placingOutReach')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('placingOutReach')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

      <h3><b><u>Fault protection</u></b></h3>
      <div class="row">

        <div class="col-sm-12">
       
          <div class="form-group equipment">
            <label>Non-Conducting Location – Earth Free local Equipotential Bonding:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="faultNonConductLocation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('faultNonConductLocation')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('faultNonConductLocation')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('faultNonConductLocation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('faultNonConductLocation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('faultNonConductLocation')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('faultNonConductLocation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Electrical Separation:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="faultElectricalSepartion" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('faultElectricalSepartion')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('faultElectricalSepartion')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('faultElectricalSepartion')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('faultElectricalSepartion')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('faultElectricalSepartion')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('faultElectricalSepartion')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

      <h3><b><u>Additional Protection</u></b></h3>
      <div class="row">

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>RCD(s) Not Exceeding 30 mA Operating Current:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="operatingCurrent" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('operatingCurrent')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('operatingCurrent')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('operatingCurrent')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('operatingCurrent')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('operatingCurrent')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('operatingCurrent')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          
          <div class="form-group equipment">
            <label>Supplementary Bonding:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="YES - If this protective measure is applied in the installation"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="supplementaryBonding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && a.get('supplementaryBonding')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === a.get('supplementaryBonding')?.value">Yes</option>
             <option value="No" [selected]="'No' === a.get('supplementaryBonding')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === a.get('supplementaryBonding')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && a.get('supplementaryBonding')?.errors" class="invalid-feedback">
              <div *ngIf="a.get('supplementaryBonding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

        <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="col-md-4">
             <mat-form-field class="client-description">
              <!-- <mat-icon style="float: right;font-size: 18px;
              line-height: unset;margin-right: 85%; margin-top: 0.7%;"
              matTooltip="Main’s incoming in case of no alternative supply from state EB.
              Main’s incoming in case of alternative supply from state EB act as standby.
              EB source incomer-1 in case of alternative supply from state EB share the total load."
              matTooltipClass="multiline-tooltip">
              info_outline
             </mat-icon> -->
              <mat-label>
                <h3>SPECIFIC INSPECTION EXAMPLES to be included in the report as appropriate to the installation</h3>
              </mat-label>
              <textarea matInput class="client-box-description" formControlName="specificInspectionRe" 
              [ngClass]="{ 'is-invalid': submitted && a.get('specificInspectionRe')?.errors }"   
              maxlength="500" [readonly]="service.allFieldsDisable" 
              placeholder="Ex. Note ..." ></textarea>
              <div *ngIf="submitted && a.get('specificInspectionRe')?.errors" class="invalid-feedback">
                <div *ngIf="a.get('specificInspectionRe')?.errors?.required">Field Is Required</div>
              </div>
            </mat-form-field>
          </div>
        </div>
    </mat-expansion-panel>
    <!-- IpaInsection ends-->

    <!-- consumerUnit starts-->
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Consumer Unit(s) / Distribution Board(s) / Distribution Equipment</h3>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="row">
        <div class="col">
          <mat-icon  class="mousechange" (click)="addIncoming(a)" [ngClass]="{'disableForm':service.allFieldsDisable}"
        style="float:right; padding-right: 37px; padding-top: 10px;">add_box</mat-icon>
        </div>
      </div>

      <br>
      <br>

      <div formArrayName="consumerUnit" *ngFor="let b of getearthingControls(a); let i = index">
        <div class="form-group" [formGroupName]="i">
      <div class="row">
        <div class="col">
          <h3><b>Consumer Unit(s) / Distribution Board(s) / Distribution Equipment - {{1+i}}</b> </h3> 
        </div>
        <div class="col">
          <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':service.allFieldsDisable}" *ngIf="getearthingControls(a).length > 1" (click)="removeConsumerCircuit(a,i)"title="Delete" style="position: relative;  float: right; right: 2%;">remove_circle_outline</mat-icon>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4">
            <label>Distribution Board Details </label>
            <input type="text" formControlName="distributionBoardDetails"  
            (keyup)="ChangeBoardDetails($event,a,i)" (focusout)="onFocusOutEventBoard($event,b)"
            placeholder="Enter Distribution board details"  class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && b.get('distributionBoardDetails')?.errors }" [readonly]="service.allFieldsDisable" >
            <div *ngIf="submitted && b.get('distributionBoardDetails')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('distributionBoardDetails')?.errors?.required">Distribution board details  value is required</div>
              <div *ngIf="b.get('distributionBoardDetails')?.errors?.pattern">Distribution board details cannot contain special characters</div>
            </div>
        </div>

        <div class="col-md-4">
            <label>Distribution board name</label>
            <input type="text" formControlName="referance" placeholder="Enter Distribution board name" 
            (keyup)="ChangeBoardName($event,a,i)" (focusout)="onFocusOutEventReferance($event,b)"
            class="form-control"[ngClass]="{ 'is-invalid': submitted && b.get('referance')?.errors }" [readonly]="service.allFieldsDisable" >
            <div *ngIf="submitted && b.get('referance')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('referance')?.errors?.required">Reference name  is required</div>
              <div *ngIf="b.get('referance')?.errors?.pattern">Reference name cannot contain special characters</div>
            </div>
        </div>

        <div class="col-md-4">
            <label>Location</label>
            <input type="text" formControlName="location"  placeholder="Enter Location Name" 
            (keyup)="ChangeLocation($event,a,i)" (focusout)="onFocusOutEventLocation($event,b)"
            class="form-control"[ngClass]="{ 'is-invalid': submitted && b.get('location')?.errors }" [readonly]="service.allFieldsDisable" >
            <div *ngIf="submitted && b.get('location')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('location')?.errors?.required">Location  name  is required</div>
              <div *ngIf="b.get('location')?.errors?.pattern">Location  name cannot contain special characters</div>
            </div>

            <div *ngIf="b.get('locationFlag')?.value" class="invalid-feedback">
              <div style="color: #b4b659;">Location name already exist</div>
            </div>
        </div>
      </div>

      <br>
      <h3><b><u> Section 1: Consumer unit's / Distribution board's: </u></b></h3>

      <div class="row">
        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Adequacy Of Access And Working Space For Items Of Electrical Equipment Including
              Switchgear:</label>
              <mat-icon style="float: right;font-size: 18px;
              line-height: unset;"
               matTooltip="Spacing requirements shall be referred to NEC/NBC"
               matTooltipClass="multiline-tooltip"
               aria-label="Button that shows a red tooltip"
               class="example-button"> info_outline
             </mat-icon>
            <select class="form-control" formControlName="accessWorking" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && b.get('accessWorking')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('accessWorking')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('accessWorking')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('accessWorking')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('accessWorking')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('accessWorking')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
         
          <div class="form-group equipment">
            <label>Security Of Fixing:</label>
            <mat-icon style="float: right;font-size: 18px;
            line-height: unset;"
             matTooltip="Quality of terminations and fixings"
             matTooltipClass="multiline-tooltip"
             aria-label="Button that shows a red tooltip"
             class="example-button"> info_outline
           </mat-icon>
            <select class="form-control" formControlName="securityFixing" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="[submitted && b.get('securityFixing')?.errors ? 'is-invalid' : '' , service.allFieldsDisable ? 'disableForm' : '']">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('securityFixing')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('securityFixing')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('securityFixing')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('securityFixing')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('securityFixing')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Insulation Of Live Parts Not Damaged During Erection:</label>
            <select class="form-control" formControlName="livePartsDamage" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('livePartsDamage')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('livePartsDamage')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('livePartsDamage')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('livePartsDamage')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('livePartsDamage')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('livePartsDamage')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Adequacy / Security Of Barriers:</label>
            <select class="form-control" formControlName="securityBarriers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('securityBarriers')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('securityBarriers')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('securityBarriers')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('securityBarriers')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('securityBarriers')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('securityBarriers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Suitability Of Enclosure(s) For IP And Fire Ratings:</label>
            <select class="form-control" formControlName="suitabilityEnclosure" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('suitabilityEnclosure')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('suitabilityEnclosure')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('suitabilityEnclosure')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('suitabilityEnclosure')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('suitabilityEnclosure')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('suitabilityEnclosure')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Enclosure Not Damaged During Installation:</label>
            <select class="form-control" formControlName="enclosureDamaged" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('enclosureDamaged')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('enclosureDamaged')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('enclosureDamaged')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('enclosureDamaged')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('enclosureDamaged')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('enclosureDamaged')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div> 

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Presence And Effectiveness Of Obstacles:</label>
            <select class="form-control" formControlName="presenceObstacles" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('presenceObstacles')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('presenceObstacles')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('presenceObstacles')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('presenceObstacles')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('presenceObstacles')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('presenceObstacles')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Placing Out Of Reach:</label>
            <select class="form-control" formControlName="placingOutOfConsumer" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('placingOutOfConsumer')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('placingOutOfConsumer')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('placingOutOfConsumer')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('placingOutOfConsumer')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('placingOutOfConsumer')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('placingOutOfConsumer')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Protection Against Mechanical Damage Where Cables Enter Equipment:</label>
            <select class="form-control" formControlName="mechanicalDamage" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('mechanicalDamage')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('mechanicalDamage')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('mechanicalDamage')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('mechanicalDamage')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('mechanicalDamage')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('mechanicalDamage')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Protection Against Electromagnetic/Heating Effects Where Cables Enter Ferromagnetic
              Enclosures:</label>
            <select class="form-control" formControlName="electromagnetic" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('electromagnetic')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('electromagnetic')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('electromagnetic')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('electromagnetic')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('electromagnetic')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('electromagnetic')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="form-group equipment">
            <label>Confirmation That All Conductor Connections Including Connections To Busbars Are Correctly
              Located In Terminals And Are Tight And Secure:</label>
            <select class="form-control" formControlName="allConductorCon" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('allConductorCon')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('allConductorCon')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('allConductorCon')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('allConductorCon')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('allConductorCon')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('allConductorCon')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>


        <h3><b><u>Section 2: Distribution Equipment’s: </u></b></h3>
        <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Selection Of Protective Devices And Bases Correct Type And Rating (No Signs Of Unacceptable
              Thermal Damage, Arcing Or Overheating):</label>
            <select class="form-control" formControlName="basesCorrectType" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('basesCorrectType')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('basesCorrectType')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('basesCorrectType')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('basesCorrectType')?.value">Not Applicable</option>            </select>
            <div *ngIf="submitted && b.get('basesCorrectType')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('basesCorrectType')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Main Switches Linked Where Required:</label>
            <select class="form-control" formControlName="presenceMainSwitches" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('presenceMainSwitches')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('presenceMainSwitches')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('presenceMainSwitches')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('presenceMainSwitches')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('presenceMainSwitches')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('presenceMainSwitches')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Operation Of Main Switches (Functional Checks):</label>
            <select class="form-control" formControlName="operationMainSwitches" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('operationMainSwitches')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('operationMainSwitches')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('operationMainSwitches')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('operationMainSwitches')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('operationMainSwitches')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('operationMainSwitches')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Manual Operation Of Circuit Breakers And RCD’s To Prove Functionally:</label>
            <select class="form-control" formControlName="manualCircuitBreakers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('manualCircuitBreakers')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('manualCircuitBreakers')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('manualCircuitBreakers')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('manualCircuitBreakers')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('manualCircuitBreakers')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('manualCircuitBreakers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation That Integral Test Button / Switch Causes RCD’s To Trip When Operated
              (Functional Check):</label>
            <select class="form-control" formControlName="switchCausesRcd" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('switchCausesRcd')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('switchCausesRcd')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('switchCausesRcd')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('switchCausesRcd')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('switchCausesRcd')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('switchCausesRcd')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>RCD’s Provided For Fault Protection, Where Specified:</label>
            <select class="form-control" formControlName="rcdFaultProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('rcdFaultProtection')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('rcdFaultProtection')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('rcdFaultProtection')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('rcdFaultProtection')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('rcdFaultProtection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('rcdFaultProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>RCD’s Provided For Additional Protection, Where Specified:</label>
            <select class="form-control" formControlName="rcdAdditionalProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('rcdAdditionalProtection')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('rcdAdditionalProtection')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('rcdAdditionalProtection')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('rcdAdditionalProtection')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('rcdAdditionalProtection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('rcdAdditionalProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation Of Over Voltage Protection (SPD’s) Provided Where Specified:</label>
            <select class="form-control" formControlName="overVoltageProtection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('overVoltageProtection')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('overVoltageProtection')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('overVoltageProtection')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('overVoltageProtection')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('overVoltageProtection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('overVoltageProtection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Confirmation Of Indication That SPD Is Functional:</label>
            <select class="form-control" formControlName="indicationOfSpd" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('indicationOfSpd')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('indicationOfSpd')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('indicationOfSpd')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('indicationOfSpd')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('indicationOfSpd')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('indicationOfSpd')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Single Pole Protective Devices In Line Conductor Only:</label>
            <select class="form-control" formControlName="singlePole" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('singlePole')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('singlePole')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('singlePole')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('singlePole')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('singlePole')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('singlePole')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>

        <h3><b><u>Section 3: Warning Notices: </u></b></h3>
        <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of RCD Quarterly Test Notice:</label>
            <select class="form-control" formControlName="rcdQuarterlyTest" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('rcdQuarterlyTest')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('rcdQuarterlyTest')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('rcdQuarterlyTest')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('rcdQuarterlyTest')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('rcdQuarterlyTest')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('rcdQuarterlyTest')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Diagrams Charts Or Schedules At Or Near Each Distribution Board Where
              Required:</label>
            <select class="form-control" formControlName="diagramsCharts" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('diagramsCharts')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('diagramsCharts')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('diagramsCharts')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('diagramsCharts')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('diagramsCharts')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('diagramsCharts')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Nonstandard (Mixed) Cable Colour Warning Notice Near Appropriate Distribution
              Board, As Required:</label>
            <select class="form-control" formControlName="nonstandardCableColour" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('nonstandardCableColour')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('nonstandardCableColour')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('nonstandardCableColour')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('nonstandardCableColour')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('nonstandardCableColour')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('nonstandardCableColour')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near The Origin:</label>
            <select class="form-control" formControlName="alSupplyOfOrign" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('alSupplyOfOrign')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('alSupplyOfOrign')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('alSupplyOfOrign')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('alSupplyOfOrign')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('alSupplyOfOrign')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('alSupplyOfOrign')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near The Meter Position, If Remote
              From Origin:</label>
            <select class="form-control" formControlName="alSupplyOfMeter" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('alSupplyOfMeter')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('alSupplyOfMeter')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('alSupplyOfMeter')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('alSupplyOfMeter')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('alSupplyOfMeter')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('alSupplyOfMeter')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near The Distribution Board To Which
              Alternative Sources Are Connected:</label>
            <select class="form-control" formControlName="alSupplyDistribution" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('alSupplyDistribution')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('alSupplyDistribution')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('alSupplyDistribution')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('alSupplyDistribution')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('alSupplyDistribution')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('alSupplyDistribution')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Alternative Supply - Warning Notice At Or Near All Points Of Isolation Of ALL
              Sources Of Supply:</label>
            <select class="form-control" formControlName="allPointsIsolation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('allPointsIsolation')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('allPointsIsolation')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('allPointsIsolation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('allPointsIsolation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('allPointsIsolation')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('allPointsIsolation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Next Inspection Recommendation Label:</label>
            <select class="form-control" formControlName="nextInspection" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('nextInspection')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('nextInspection')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('nextInspection')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('nextInspection')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('nextInspection')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('nextInspection')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence Of Other Required Labelling:</label>
            <select class="form-control" formControlName="otherRequiredLabelling" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && b.get('otherRequiredLabelling')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === b.get('otherRequiredLabelling')?.value">Yes</option>
             <option value="No" [selected]="'No' === b.get('otherRequiredLabelling')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === b.get('otherRequiredLabelling')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && b.get('otherRequiredLabelling')?.errors" class="invalid-feedback">
              <div *ngIf="b.get('otherRequiredLabelling')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="row" [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="col-sm-6">
             <mat-form-field  class="client-description " >	
              <mat-label>	
                <h3>Observations</h3>	
              </mat-label>	
              <textarea matInput  class="client-description "	formControlName="observationDescription"
             maxlength="2000" placeholder="Ex. Observations  ..."></textarea>	
            </mat-form-field>	
           </div>
        </div>
        
      </div>
        </div>
        </div>
    </mat-expansion-panel>
    <!-- consumerUnit ends-->

    <!-- circuit starts-->
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h3>Circuits</h3>
          <button *ngIf="intermediateSaveInspectionInCircuits" class="save" title="Save" (click)="intermedeateIpaoSave1('content3')"  mat-button><i class="fa fa-save"></i></button>	
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div formArrayName="circuit" *ngFor="let c of getcircuitControls(a); let i = index">
        <div class="form-group" [formGroupName]="i"  [ngClass]="{'disableForm':service.allFieldsDisable}">
          <div class="row">
            <div class="col">
              <h3><b>Circuits - {{1+i}}</b> </h3> 
            </div>
            <div class="col">
              <mat-icon class="mousechange" class="dlt" type="button" [ngClass]="{'disableForm':service.allFieldsDisable}" *ngIf="getcircuitControls(a).length > 1" (click)="removeConsumerCircuit(a,i)"title="Delete" style="position: relative;  float: right; right: 2%;">remove_circle_outline</mat-icon>
            </div>
          </div>


          <div class="row">
            <div class="col-md-4">
                <label>Distribution Board Details </label>
                <input type="text" formControlName="distributionBoardDetails"  
                readonly
                placeholder="Enter Distribution board details"  class="form-control" 
                [ngClass]="{ 'is-invalid': submitted && c.get('distributionBoardDetails')?.errors }" >
                <div *ngIf="submitted && c.get('distributionBoardDetails')?.errors" class="invalid-feedback">
                  <div *ngIf="c.get('distributionBoardDetails')?.errors?.required">Distribution board details  value is required</div>
                </div>
            </div>
    
            <div class="col-md-4">
                <label>Distribution board name</label>
                <input type="text" formControlName="referance" placeholder="Enter Distribution board name" 
                readonly
                class="form-control"[ngClass]="{ 'is-invalid': submitted && c.get('referance')?.errors }" >
                <div *ngIf="submitted && c.get('referance')?.errors" class="invalid-feedback">
                  <div *ngIf="c.get('referance')?.errors?.required">Reference name  is required</div>
                </div>
            </div>
    
            <div class="col-md-4">
                <label>Location</label>
                <input type="text" formControlName="location"  placeholder="Enter Location Name" 
                readonly
                class="form-control"[ngClass]="{ 'is-invalid': submitted && c.get('location')?.errors }" >
                <div *ngIf="submitted && c.get('location')?.errors" class="invalid-feedback">
                  <div *ngIf="c.get('location')?.errors?.required">Location  name  is required</div>
                </div>
            </div>
          </div>

          <br>

          <div class="row">
            <div class="col-md-4"> 
               <h3><b><u>Section 1: Circuit conductors and its insulation:</u></b></h3>
            </div>
          </div>

      <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Identification Of Conductors Including Main Earthing / Bonding Arrangements:</label>
            <select class="form-control" formControlName="identificationConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('identificationConductors')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('identificationConductors')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('identificationConductors')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('identificationConductors')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('identificationConductors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('identificationConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Examination Of Insulation Of Live Parts Not Damaged During Erection:</label>
            <select class="form-control" formControlName="examinationInsulation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('examinationInsulation')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('examinationInsulation')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('examinationInsulation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('examinationInsulation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('examinationInsulation')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('examinationInsulation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Conductors For Current-Carrying Capacity With Respect To Type And Nature Of The
              Installation:</label>
            <select class="form-control" formControlName="currentCarryCapacity" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('currentCarryCapacity')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('currentCarryCapacity')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('currentCarryCapacity')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('currentCarryCapacity')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('currentCarryCapacity')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('currentCarryCapacity')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence, Adequacy, And Correct Termination Of Protective Conductors:</label>
            <select class="form-control" formControlName="presenceProtectConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('presenceProtectConductors')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('presenceProtectConductors')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('presenceProtectConductors')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('presenceProtectConductors')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('presenceProtectConductors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('presenceProtectConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Provision Of Fire Barriers, Sealing Arrangements So As To Minimize The Spread Of
              Fire:</label>
            <select class="form-control" formControlName="provisionFireBarriers" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('provisionFireBarriers')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('provisionFireBarriers')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('provisionFireBarriers')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('provisionFireBarriers')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('provisionFireBarriers')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('provisionFireBarriers')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Segregation/Separation Of Band I (ELV) And Band II (LV) Circuits:</label>
            <select class="form-control" formControlName="separationBand" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('separationBand')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('separationBand')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('separationBand')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('separationBand')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('separationBand')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('separationBand')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Segregation/separation Of Electrical And Non-Electrical Services:</label>
            <select class="form-control" formControlName="separationElectrical" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('separationElectrical')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('separationElectrical')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('separationElectrical')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('separationElectrical')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('separationElectrical')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('separationElectrical')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>No Basic Insulation Of A Conductor Visible Outside Enclosure:</label>
            <select class="form-control" formControlName="conductorVisibleOutside" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conductorVisibleOutside')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('conductorVisibleOutside')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('conductorVisibleOutside')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('conductorVisibleOutside')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('conductorVisibleOutside')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conductorVisibleOutside')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Connections Of Live Conductors Adequately Enclosed:</label>
            <select class="form-control" formControlName="connLiveConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('connLiveConductors')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('connLiveConductors')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('connLiveConductors')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('connLiveConductors')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('connLiveConductors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('connLiveConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequately Connected At The Point Of Entry To Enclosure (Glands, Bushes etc.):</label>
            <select class="form-control" formControlName="adequatelyConnectedEnclosure" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('adequatelyConnectedEnclosure')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('adequatelyConnectedEnclosure')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('adequatelyConnectedEnclosure')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('adequatelyConnectedEnclosure')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('adequatelyConnectedEnclosure')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('adequatelyConnectedEnclosure')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Connections, Including Protective Conductors, Within Accessories And Fixed And Stationary Equipment:</label>
            <select class="form-control" formControlName="adequacyConnections" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('adequacyConnections')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('adequacyConnections')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('adequacyConnections')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('adequacyConnections')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('adequacyConnections')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('adequacyConnections')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        </div>

        <h3><b><u>Section 2: Circuit Equipment’s: </u></b></h3>

        <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Adequacy Of Protective Devices, Type And Fault Current Rating For Fault Protection:</label>
            <select class="form-control" formControlName="adequacyProtectDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('adequacyProtectDevices')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('adequacyProtectDevices')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('adequacyProtectDevices')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('adequacyProtectDevices')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('adequacyProtectDevices')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('adequacyProtectDevices')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Co-ordination Between Conductors And Overload Protective Devices:</label>
            <select class="form-control" formControlName="coOrdination" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('coOrdination')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('coOrdination')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('coOrdination')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('coOrdination')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('coOrdination')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('coOrdination')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional Protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For Circuits Used To Supply Mobile Equipment Not Exceeding 32A Rating For Use Outdoors In All
              Cases:</label>
            <select class="form-control" formControlName="operatingCurrentCircuits" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('operatingCurrentCircuits')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('operatingCurrentCircuits')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('operatingCurrentCircuits')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('operatingCurrentCircuits')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('operatingCurrentCircuits')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('operatingCurrentCircuits')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For All Socket Outlets Of Rating 20A Or Less Provided For Use By Ordinary Persons Unless
              Exempt:</label>
            <select class="form-control" formControlName="operatingCurrentSocket" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('operatingCurrentSocket')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('operatingCurrentSocket')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('operatingCurrentSocket')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('operatingCurrentSocket')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('operatingCurrentSocket')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('operatingCurrentSocket')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional Protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For Cables Concealed In Walls At a Depth Of Less Than 50mm:</label>
            <select class="form-control" formControlName="cablesConcDepth" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cablesConcDepth')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('cablesConcDepth')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('cablesConcDepth')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('cablesConcDepth')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('cablesConcDepth')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cablesConcDepth')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Additional Protection By RCD’s Having Residual Operating Current (I∆n) Not Exceeding 30mA
              For Cables Concealed In Walls / Sections Containing Metal Sections Regardless Of Depth:</label>
            <select class="form-control" formControlName="sectionsRegardlessDepth" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('sectionsRegardlessDepth')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('sectionsRegardlessDepth')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('sectionsRegardlessDepth')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('sectionsRegardlessDepth')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('sectionsRegardlessDepth')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('sectionsRegardlessDepth')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Condition Of Circuit Accessories:</label>
            <select class="form-control" formControlName="conditionCircuitAccessories" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conditionCircuitAccessories')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('conditionCircuitAccessories')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('conditionCircuitAccessories')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('conditionCircuitAccessories')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('conditionCircuitAccessories')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conditionCircuitAccessories')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of Circuit Accessories For External Influences:</label>
            <select class="form-control" formControlName="suitabilityCircuitAccessories" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('suitabilityCircuitAccessories')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('suitabilityCircuitAccessories')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('suitabilityCircuitAccessories')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('suitabilityCircuitAccessories')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('suitabilityCircuitAccessories')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('suitabilityCircuitAccessories')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Condition Of Accessories Including Socket-Outlets, Switches And Joint Boxes (Circuit
              Accessories Not Damaged, Securely Fixed, Correctly Connected, Suitable For External
              Influences):</label>
            <select class="form-control" formControlName="conditionAccessories" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conditionAccessories')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('conditionAccessories')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('conditionAccessories')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('conditionAccessories')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('conditionAccessories')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conditionAccessories')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Single-Pole Devices For Switching Or Protection In Line Conductors Only:</label>
            <select class="form-control" formControlName="singlePoleDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('singlePoleDevices')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('singlePoleDevices')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('singlePoleDevices')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('singlePoleDevices')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('singlePoleDevices')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('singlePoleDevices')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Presence, operation, And Correct Location of Appropriate Devices For Isolation And Switching:</label>
            <select class="form-control" formControlName="isolationSwitching" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('isolationSwitching')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('isolationSwitching')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('isolationSwitching')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('isolationSwitching')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('isolationSwitching')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('isolationSwitching')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        </div>

        <h3><b><u>Section 3: Cables: </u></b></h3>
        <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cable Installation Methods (Including Support) Suitable For The Location(s) And External
              Influences (Cables Correctly Supported Throughout):</label>
            <select class="form-control" formControlName="cableInstallation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cableInstallation')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('cableInstallation')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('cableInstallation')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('cableInstallation')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('cableInstallation')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cableInstallation')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Examination Of Cables For Signs Of Mechanical Damage During Installation:</label>
            <select class="form-control" formControlName="examinationCables" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('examinationCables')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('examinationCables')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('examinationCables')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('examinationCables')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('examinationCables')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('examinationCables')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Non-Sheathed Cables Protected By Enclosure In Conduit, Ducting Or Trucking:</label>
            <select class="form-control" formControlName="nonSheathedCables" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('nonSheathedCables')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('nonSheathedCables')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('nonSheathedCables')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('nonSheathedCables')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('nonSheathedCables')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('nonSheathedCables')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of Containment Systems Including Flexible Conduit:</label>
            <select class="form-control" formControlName="containmentSystems" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('containmentSystems')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('containmentSystems')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('containmentSystems')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('containmentSystems')?.value">Not Applicable</option>            </select>
            <div *ngIf="submitted && c.get('containmentSystems')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('containmentSystems')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Correct Temperature Rating Of Cable Insulation:</label>
            <select class="form-control" formControlName="temperatureRating" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('temperatureRating')?.errors }" 
           >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('temperatureRating')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('temperatureRating')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('temperatureRating')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('temperatureRating')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('temperatureRating')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cables Correctly Terminated In Enclosures:</label>
            <select class="form-control" formControlName="cablesTerminated" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cablesTerminated')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('cablesTerminated')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('cablesTerminated')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('cablesTerminated')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('cablesTerminated')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cablesTerminated')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Wiring Systems And Cable Installation Methods/ Practices With Regard To The Type And Nature
              Of Installation And External Influences:</label>
            <select class="form-control" formControlName="wiringSystems" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('wiringSystems')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('wiringSystems')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('wiringSystems')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('wiringSystems')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('wiringSystems')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('wiringSystems')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cables Concealed Under Floors Above Ceilings, In Wall Adequately Protected Against Damage
              By Contact With Fixings:</label>
            <select class="form-control" formControlName="cablesConcealUnderFloors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('cablesConcealUnderFloors')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('cablesConcealUnderFloors')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('cablesConcealUnderFloors')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('cablesConcealUnderFloors')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('cablesConcealUnderFloors')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('cablesConcealUnderFloors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cables And Conductors Correctly Terminated, Enclosed And With No UnDue Mechanical
              Strain:</label>
            <select class="form-control" formControlName="conductorCorrectTerminated" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && c.get('conductorCorrectTerminated')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === c.get('conductorCorrectTerminated')?.value">Yes</option>
             <option value="No" [selected]="'No' === c.get('conductorCorrectTerminated')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === c.get('conductorCorrectTerminated')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && c.get('conductorCorrectTerminated')?.errors" class="invalid-feedback">
              <div *ngIf="c.get('conductorCorrectTerminated')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
              

      </div>
        </div>
      </div>
    </mat-expansion-panel>
  <!-- circuit ends-->

   <!-- isolationCurrent starts-->
   <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h3>Isolation And Switching</h3>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div formArrayName="isolationCurrent" *ngFor="let d of getisolationCurrentControls(a); let i = index">
      <div class="form-group" [formGroupName]="i"  [ngClass]="{'disableForm':service.allFieldsDisable}">
        <h3><b><u>Section 1: Isolator: </u></b></h3>

      <div class="row">
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Presence of Appropriate Devices :</label>
          <select class="form-control" formControlName="presenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('presenceDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('presenceDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('presenceDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('presenceDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('presenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('presenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators – Condition Of Appropriate Devices :</label>
          <select class="form-control" formControlName="conditionDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('conditionDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('conditionDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('conditionDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('conditionDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('conditionDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('conditionDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Location Of Appropriate Devices (State If Local Or Remote From Equipment In Question):</label>
          <select class="form-control" formControlName="locationDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('locationDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('locationDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('locationDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('locationDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('locationDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('locationDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Capable Of Being Secured In OFF Position:</label>
          <select class="form-control" formControlName="capableSecured" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('capableSecured')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('capableSecured')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('capableSecured')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('capableSecured')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('capableSecured')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('capableSecured')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Correct Operation Verified (Functional Checks):</label>
          <select class="form-control" formControlName="operationVerify" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('operationVerify')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('operationVerify')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('operationVerify')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('operationVerify')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('operationVerify')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('operationVerify')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - The installation, Circuit Or Section There of That Will Be Isolated Is Clearly Identified By Location And/Or Durable Marking:</label>
          <select class="form-control" formControlName="installCircuit" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('installCircuit')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('installCircuit')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('installCircuit')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('installCircuit')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('installCircuit')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('installCircuit')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Isolators - Warning Label Posted In The Situation Where Live Sections Cannot Be Isolated By The Operation Of Single Device:</label>
          <select class="form-control" formControlName="warningLabel" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('warningLabel')?.errors }" 
         >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('warningLabel')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('warningLabel')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('warningLabel')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('warningLabel')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('warningLabel')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      </div>

      <h3><b><u>Section 2: Switching: </u></b></h3>
      <div class="row">

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Presence Of Appropriate Devices:</label>
          <select class="form-control" formControlName="swPresenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swPresenceDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swPresenceDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swPresenceDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swPresenceDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swPresenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swPresenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Condition Of Appropriate Devices:</label>
          <select class="form-control" formControlName="swConditionDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swConditionDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swConditionDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swConditionDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swConditionDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swConditionDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swConditionDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Acceptable Location (State If Local Or Remote From Equipment In Question):</label>
          <select class="form-control" formControlName="swAcceptableLocation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swAcceptableLocation')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swAcceptableLocation')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swAcceptableLocation')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swAcceptableLocation')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swAcceptableLocation')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swAcceptableLocation')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Capable Of Being Secured In OFF Position:</label>
          <select class="form-control" formControlName="swCapableOffPosition" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swCapableOffPosition')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swCapableOffPosition')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swCapableOffPosition')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swCapableOffPosition')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swCapableOffPosition')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swCapableOffPosition')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Correct Operation Verified (Functional Check):</label>
          <select class="form-control" formControlName="swCorrectOperation" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swCorrectOperation')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swCorrectOperation')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swCorrectOperation')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swCorrectOperation')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swCorrectOperation')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swCorrectOperation')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - The Circuit Or Section There Of That Will Be Disconnected Clearly Identified By Location And / Or Durable Marking:</label>
          <select class="form-control" formControlName="swCircuit" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swCircuit')?.errors }">
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swCircuit')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swCircuit')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swCircuit')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swCircuit')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swCircuit')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Switching Off For Mechanical Maintenance - Warning Label Posted In Situations Where Live Parts Cannot Be Isolated By The Operation Of A Single Device:</label>
          <select class="form-control" formControlName="swWarningLabel" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('swWarningLabel')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('swWarningLabel')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('swWarningLabel')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('swWarningLabel')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('swWarningLabel')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('swWarningLabel')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping - Presence Of Appropriate Devices:</label>
          <select class="form-control" formControlName="emSwitPresenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitPresenceDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('emSwitPresenceDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('emSwitPresenceDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('emSwitPresenceDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitPresenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitPresenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping – Condition of appropriate devices:</label>
          <select class="form-control" formControlName="emSwitConditionDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitConditionDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('emSwitConditionDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('emSwitConditionDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('emSwitConditionDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitConditionDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitConditionDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency switching / stopping - Location Of Appropriate Devices (Readily Accessible For Operation Where Danger Might Occur):</label>
          <select class="form-control" formControlName="emSwitLocationDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitLocationDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('emSwitLocationDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('emSwitLocationDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('emSwitLocationDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitLocationDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitLocationDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping - Correct Operation Verified (Functional Check):</label>
          <select class="form-control" formControlName="emSwitOperationVerify" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitOperationVerify')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('emSwitOperationVerify')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('emSwitOperationVerify')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('emSwitOperationVerify')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitOperationVerify')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitOperationVerify')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Emergency Switching / Stopping - The Installation Circuit Or Section There Of That Will Be Disconnected Clearly Identified By Location And / Or Durable Marking:</label>
          <select class="form-control" formControlName="emSwitInstallCircuit" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('emSwitInstallCircuit')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('emSwitInstallCircuit')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('emSwitInstallCircuit')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('emSwitInstallCircuit')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('emSwitInstallCircuit')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('emSwitInstallCircuit')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Functional Switching - Presence Of Appropriate Devices:</label>
          <select class="form-control" formControlName="fuSwitPresenceDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('fuSwitPresenceDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('fuSwitPresenceDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('fuSwitPresenceDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('fuSwitPresenceDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('fuSwitPresenceDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('fuSwitPresenceDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Functional Switching - Location Of Appropriate Devices:</label>
          <select class="form-control" formControlName="fuSwitLocationDevices" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('fuSwitLocationDevices')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('fuSwitLocationDevices')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('fuSwitLocationDevices')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('fuSwitLocationDevices')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('fuSwitLocationDevices')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('fuSwitLocationDevices')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="form-group equipment">
          <label>Functional Switching - Correct Operation Verified (Functional Check):</label>
          <select class="form-control" formControlName="fuSwitOperationVerify" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
          [ngClass]="{ 'is-invalid': submitted && d.get('fuSwitOperationVerify')?.errors }" >
           <option value="" selected>Select Option</option>
           <option value="Yes" [selected]="'Yes' === d.get('fuSwitOperationVerify')?.value">Yes</option>
           <option value="No" [selected]="'No' === d.get('fuSwitOperationVerify')?.value">No</option>
           <option value="Not Applicable" [selected]="'Not Applicable' === d.get('fuSwitOperationVerify')?.value">Not Applicable</option>
          </select>
          <div *ngIf="submitted && d.get('fuSwitOperationVerify')?.errors" class="invalid-feedback">
            <div *ngIf="d.get('fuSwitOperationVerify')?.errors?.required">Field Is Required</div>
        </div>
        </div>
      </div>
    </div>
    <h3><b><u>Section 3: Permanently Connected Loads: </u></b></h3>
      <div class="row">
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability Of The Equipment In Terms Of IP And Fire Ratings :</label>
            <select class="form-control" formControlName="suitabilityEquipment" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('suitabilityEquipment')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('suitabilityEquipment')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('suitabilityEquipment')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('suitabilityEquipment')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('suitabilityEquipment')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('suitabilityEquipment')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Enclosure Not Damaged / Deteriorated During Installation So As To Impair Safety :</label>
            <select class="form-control" formControlName="enclosureNotDamaged" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('enclosureNotDamaged')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('enclosureNotDamaged')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('enclosureNotDamaged')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('enclosureNotDamaged')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('enclosureNotDamaged')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('enclosureNotDamaged')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Suitability For The Environment And External Influences:</label>
            <select class="form-control" formControlName="suitabilityEnvironment" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('suitabilityEnvironment')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('suitabilityEnvironment')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('suitabilityEnvironment')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('suitabilityEnvironment')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('suitabilityEnvironment')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('suitabilityEnvironment')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Security Of Fixing:</label>
            <select class="form-control" formControlName="securityFixing" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('securityFixing')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('securityFixing')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('securityFixing')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('securityFixing')?.value">Not Applicable</option>            
            </select>
            <div *ngIf="submitted && d.get('securityFixing')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('securityFixing')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Cable Entry Holes In Ceilings Above Luminaries, Seized Or Sealed So As To Restrict The Spread Of Fire.:</label>
            <select class="form-control" formControlName="cableEntryHoles" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('cableEntryHoles')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('cableEntryHoles')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('cableEntryHoles')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('cableEntryHoles')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('cableEntryHoles')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('cableEntryHoles')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Provision (Condition) Of Under Voltage Protection, Where Specified.:</label>
            <select class="form-control" formControlName="provisionVoltage" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('provisionVoltage')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('provisionVoltage')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('provisionVoltage')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('provisionVoltage')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('provisionVoltage')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('provisionVoltage')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Provision (Condition) Of Overload Protection, Where Specified.:</label>
            <select class="form-control" formControlName="provisionOverload" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('provisionOverload')?.errors }">
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('provisionOverload')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('provisionOverload')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('provisionOverload')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('provisionOverload')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('provisionOverload')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Recessed Luminaires (Downlighters) - Correct Type Of Lamps Fitted :</label>
            <select class="form-control" formControlName="correctTypeLamps" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('correctTypeLamps')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('correctTypeLamps')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('correctTypeLamps')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('correctTypeLamps')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('correctTypeLamps')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('correctTypeLamps')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>Recessed Luminaires (Downlighters) - Installed To Minimise Build-Up Of Heat By Use Of “Fire Rated” Fittings, Insulation Displacement Box Or Similar :</label>
            <select class="form-control" formControlName="insulaDisplacementBox" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('insulaDisplacementBox')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('insulaDisplacementBox')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('insulaDisplacementBox')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('insulaDisplacementBox')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('insulaDisplacementBox')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('insulaDisplacementBox')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>No Signs Of Overheating To Surrounding Building Fabric (Applicable For Periodic Inspection):</label>
            <select class="form-control" formControlName="overheatSurrounding" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('overheatSurrounding')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('overheatSurrounding')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('overheatSurrounding')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('overheatSurrounding')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('overheatSurrounding')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('overheatSurrounding')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>

        <div class="col-sm-12">
          <div class="form-group equipment">
            <label>No Signs Of Overheating To Conductors / Terminations (Applicable For Periodic Inspection):</label>
            <select class="form-control" formControlName="overheatConductors" [disabled]="service.allFieldsDisable" [tabindex]="service.allFieldsDisable ? -1 : 0"
            [ngClass]="{ 'is-invalid': submitted && d.get('overheatConductors')?.errors }" >
             <option value="" selected>Select Option</option>
             <option value="Yes" [selected]="'Yes' === d.get('overheatConductors')?.value">Yes</option>
             <option value="No" [selected]="'No' === d.get('overheatConductors')?.value">No</option>
             <option value="Not Applicable" [selected]="'Not Applicable' === d.get('overheatConductors')?.value">Not Applicable</option>
            </select>
            <div *ngIf="submitted && d.get('overheatConductors')?.errors" class="invalid-feedback">
              <div *ngIf="d.get('overheatConductors')?.errors?.required">Field Is Required</div>
          </div>
          </div>
        </div>
      </div>
  </div>
</div>
  </mat-expansion-panel>
</mat-accordion>
</div>
 
<!-- <mat-icon class="mousechange" *ngIf="getIncomingControls().length > 1" (click)="removeItem(i)"
  style="float:right;margin: 0px 15px 0px 15px;">delete</mat-icon> -->


</div>

<mat-accordion>
 	 <!-- comments start-->	
  <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="hideShowComment"	
  style="margin: 1px;">	
   <mat-expansion-panel-header>	
     <mat-panel-title>	
       <h3>Comments</h3>	
     </mat-panel-title>	
   </mat-expansion-panel-header>	
  	
  <mat-progress-spinner style="margin: 0 auto;" *ngIf="spinner"	
 color="primary"	
  [mode]="mode"	
  value="50"	
 diameter="50">	
 </mat-progress-spinner>	
 	
 <div class="card-body" style="padding: 0px;" *ngIf="cardBodyComments">	
 <button class="btn dropdown" (click)="showSubmenu = !showSubmenu" style="width:100%;" 	
 *ngIf="(isExpanded || isShowing) || (toggleHideShow || getViewerCommentControls().length > 2)">	
 <mat-icon class="menu-button" [ngClass]="{'rotated' : showSubmenu}" style="float: left;">chevron_right</mat-icon> 	
 <label style="float: left;">Check comments here!</label>	
 </button> 	
 <span *ngIf="getViewerCommentControls().length==0">No comments!</span>	
 <mat-icon class="mousechange" (click)="refreshCommentSection()" style="float: right;"	
 title="Refresh comment">refresh</mat-icon> 	
 	
 <div  formArrayName="viewerCommentArr" *ngFor="let a of getViewerCommentControls(); let i = index" 	
 style="margin-left: 10px;">	
 <div [formGroupName]="i" style="margin-left: 30px;">	
 <div class="submenu" [ngClass]="{'expanded' : showSubmenu}" [ngStyle]="{'display': showSubmenu ? 'block' : 'none'}">	
 	
 <div class="input-group" [ngClass]="{even: i!=0}" style="align-items: end;">	
   <div class="input-group-prepend" title="Viewer" style="height: 26px;">	
       <span class="input-group-text" style="line-height: unset;">	
           <i class="bi bi-eye-fill"></i>	
       </span>	
   </div>	
   <textarea cols="60" rows="1" formControlName="viewerComments" placeholder="Enter Viewer Comment">	
  </textarea>	
 	
 <div style="display: flex;margin-left: 25px;" *ngIf="replyCommentBox">	
 	
         <mat-icon class="mousechange" (click)="sendViewerComment(a)" [ngClass]="{'disable':disableSend== true}"	
         *ngIf="((a.get('inspectorComments')?.value=='' || a.get('inspectorComments')?.value==null) && sendComment)"	
         title="Send comment">send</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;	
 	
         <mat-icon class="mousechange" (click)="replyToViewerComment(a)" 	
         *ngIf="((a.get('viewerComments')?.value!='') && (getViewerCommentControls().length-1 == i)) && hideAsViewerLogin "	
        title="Reply comment">reply</mat-icon>&nbsp;&nbsp;&nbsp;&nbsp;	
 	
        <mat-icon class="mousechange" (click)="ViewerRemoveComment(i)" style="float:right;position: relative;left: 630%;"	
        *ngIf="(a.get('inspectorComments')?.value=='' || a.get('viewerComments')?.value=='') && hideDelete" >delete</mat-icon>	
        &nbsp;&nbsp;&nbsp;&nbsp;	
 	
       	
 </div>	
 </div>	
 	
 	
 <span [ngClass]="i!=0 ? 'viewer' : 'even1'">	
   {{a.value.viewerUserName}} {{a.value.viewerDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}	
 </span>  	
 	
 <div *ngIf="replyCommentBox">	
 	
 <ul style="list-style-type:none;margin-bottom: 0rem;">	
 <li> 	
 	
 <div class="input-group" style="align-items: end;"	
 *ngIf="(a.get('inspectorComments')?.value!='' && a.get('inspectorComments')?.value!=null) || showReplyBox" >	
   <div class="input-group-prepend" title="Inspector" style="height: 26px;">	
       <span class="input-group-text" style="line-height: unset;">	
           <i class="bi bi-person-fill"></i>	
       </span>	
   </div>	
   <textarea cols="60" rows="1" placeholder="Enter Inspector Comment" formControlName="inspectorComments" ></textarea>	
 <div style="display: initial;margin-left: 25px;">	
 	
    <mat-icon class="mousechange" (click)="inspectorComment(a)" [ngClass]="{'disable':disableReply== true}"	
    *ngIf="(getViewerCommentControls().length-1 == i) && SendReply" title="Send reply">send</mat-icon>	
 	
    <mat-icon class="mousechange" (click)="approveComment(a)" [ngClass]="{'disable':enabledRequest== true}"	
    *ngIf="((getViewerCommentControls().length-1 == i) && hideapprove) && a.value.approveOrReject != 'REJECT'"	
    title="Approve comment">thumb_up_alt</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;	
 	
    <mat-icon class="mousechange" (click)="rejectComment(a)" 	
    [ngClass]="{'disable':a.value.approveOrReject === 'REJECT' || enabledRequest== true}"	
     *ngIf="((getViewerCommentControls().length-1 == i) && hideReject) || 	
     ((a.get('inspectorComments')?.value!='' || a.get('viewerComments')?.value!='') && a.value.approveOrReject=='REJECT')"	
    title="Reject comment">thumb_down_alt</mat-icon>	
    <mat-icon class="mousechange" (click)="addAnotherviewerComment()"	
    *ngIf="((getViewerCommentControls().length-1 == i) && hideAdd) 	
    || ((a.value.approveOrReject === 'REJECT' && getViewerCommentControls().length-1 == i) && addReject)"	
     style="float:right;position: relative;left: 718%;" title="Add another comment">add_box</mat-icon>	
 	
 </div>	
 </div>	
 	
 <span style="display: block;font-size: 11px;text-align: center;margin-left: -29%;">	
 {{a.value.inspectorUserName}} {{a.value.inspectorDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}</span>  	
      </li>	
    </ul>	
   </div> 	
   </div>	
   </div>	
 </div> 	
  	
 </div>   	
  	
 </mat-expansion-panel>
 <!-- completed comments start-->	
 <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="completedComments"	
 style="margin: 1px;">	
 <mat-expansion-panel-header>	
 <mat-panel-title>	
 <h3>Completed Comments</h3>	
 </mat-panel-title>	
 	
 </mat-expansion-panel-header>	
 <div class="card-body" style="padding: 0px;">	
 <div formArrayName="completedCommentArr1" *ngFor="let x of getCompletedCommentControls1(); let j = index" >	
 <div [formGroupName]="j">	
 	
 <button class="btn dropdown" (click)="showHideAccordion(j);" style="width:100%;" 	
 *ngIf="(isExpanded || isShowing) || toggleHideShow || getCompletedCommentControls1().length >= 1">	
 <mat-icon class="menu-button" style="float: left;">chevron_right</mat-icon> 	
 <label style="float: left;">{{getViewerFirstMessage(x)}}...</label>	
 </button> 	
 	
 <div *ngIf="j === expandedIndexx" >	
 <div  formArrayName="completedCommentArr" *ngFor="let a of getCompletedCommentControls(x); let i = index" 	
 style="margin-left: 10px;" > 	
 <div [formGroupName]="i" style="margin-left: 30px;">	
 <div class="submenu" >	
 	
 <div class="input-group" [ngClass]="{even: i!=0}" style="align-items: end;">	
 <div class="input-group-prepend" title="Viewer" style="height: 26px;">	
   <span class="input-group-text" style="line-height: unset;">	
       <i class="bi bi-eye-fill"></i>	
   </span>	
 </div>	
 <textarea cols="60" rows="1"  formControlName="viewerComments" placeholder="Enter Viewer Comment">	
 </textarea>	
 </div>	
 <div>	
 <span [ngClass]="i!=0 ? 'viewer' : 'even1'">	
 {{a.value.viewerUserName}} 	
 {{a.value.viewerDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}	
 </span>  	
 </div>	
 <div class="input-group" style="margin-left: 41px;width: 50%;align-items: end;">	
 <div class="input-group-prepend" title="Inspector" style="height: 26px;">	
 <span class="input-group-text" style="line-height: unset;">	
 <i class="bi bi-person-fill"></i>	
 </span>	
 </div>	
 <textarea cols="60" rows="1"  formControlName="inspectorComments" placeholder="Enter Viewer Comment"></textarea>	
 </div>	
 	
 <span style="display: block;font-size: 11px;text-align: center;margin-left: -25%;">	
 {{a.value.inspectorUserName}} {{a.value.inspectorDateTime | date:'dd-MM-YY hh:mm:ss a':'+0530'}}</span>  	
  	
 </div>	
 </div>	
 </div> 	
 </div>	
 </div>	
 </div>	
 </div>   	
 	
 </mat-expansion-panel>	
 <!-- completed comments end-->	
 </mat-accordion>	
 <!-- <mat-icon class="mousechange" *ngIf="getIncomingControls().length > 1" (click)="removeItem(i)"	
  style="float:right;margin: 0px 15px 0px 15px;">delete</mat-icon> -->	
<div *ngIf="validationError" style="text-align: center;margin-top: 30px;">	
  <span class="alert alert-danger">{{validationErrorMsg}}</span>	
</div>	
<div *ngIf="commentSuccess" style="text-align: center;margin-top: 30px;">	
  <span class="successshow">Your comment has been sent to Inspector</span>	
</div>	
<div *ngIf="commentApprove" style="text-align: center;margin-top: 30px;">	
  <span class="alert alert-success">Your response to comments has been approved</span>	
</div>	
<div *ngIf="commentReject" style="text-align: center;margin-top: 30px;">	
  <span class="alert alert-danger">Your response to comments has been rejected</span>	
</div>	
<br>
<button class="btn btn-info mousechange" (click)="addItem()" title="Add another location" [ngClass]="{'disableForm':service.allFieldsDisable}"
style="padding: 5px 0px 0px 0px;	
width: 3%;	
height: 35px;	
position: relative;">	
<mat-icon aria-hidden="false" aria-label="Example home icon" [ngClass]="{'disableForm':service.allFieldsDisable}" mat-list-icon>add_box</mat-icon>	
</button>	
<div style="text-align: center;">	
  <!-- <button class="previous" mat-button matStepperPrevious>&laquo; Back</button> -->	
  <button  class="next"  [ngClass]="{'disableSubmit':service.disableSubmitSummary}" (click)="gotoNextModal(content3,content2)" mat-button >Next &raquo;</button>	
</div>	
</form>	
</div>	
</div>
<ng-template #content3 let-modal>
  <mat-progress-spinner style="margin: 0 auto;" *ngIf="finalSpinner"
  color="primary"
  [mode]="mode"
  value="50"
  diameter="50">
  </mat-progress-spinner>
  <br>
  <div *ngIf="finalSpinner" style="text-align: center;">
    Inspection Save in Progress!
  </div>
<div class="modal-body" *ngIf="popup" >
<div class="centre-text m-btm30">
<div *ngIf="success" style="text-align: center;">
  <span class="alert alert-success">{{successMsg}}</span>
 </div>
 <div *ngIf="Error" style="text-align: center;">
   <span class="alert alert-danger">{{errorMsg}}</span>
  </div>
     </div>
 </div>
<br>
 <button type="button" *ngIf="popup" class="close" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
 aria-label="Close" (click)="closeModalDialog()" (matStepperNext)="stepperNav">
  <span aria-hidden="true">Ok</span>
</button>
</ng-template>
<ng-template #content4 let-modal>
  <mat-progress-spinner style="margin: 0 auto;" *ngIf="finalSpinner"
  color="primary"
  [mode]="mode"
  value="50"
  diameter="50">
  </mat-progress-spinner>
  <br>
  <div *ngIf="finalSpinner" style="text-align: center;">
    Inspection Save in Progress!
  </div>
  <div class="modal-body" *ngIf="popup" style="width: 496px; margin-left: -20px;">
  <div class="centre-text m-btm30">
  <div *ngIf="success" style="text-align: center;">
    <span class="alert alert-success">{{successMsg}}</span>
   </div>
   <div *ngIf="Error" style="text-align: center;">
     <span class="alert alert-danger">{{errorMsg}}</span>
    </div>
       </div>
   </div>
  <br>
 
  <span aria-hidden="true" (click)="closeModalDialog()"  class="btn btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"  style="text-align:center; width: auto;" >Ok</span>
  </ng-template>
  

<ng-template #content2 let-modal>
  <div class="modal-body">
   <div class="centre-text m-btm30">
    <div style="text-align: center;">
      <span class="successshow">Are you sure you want to procced? </span>
      <br>
      <span style="font-size: 12px;">Note: Please verify all the details! </span>
     </div>
    </div>
   </div>
  <br>
  <div class="row">
     <button type="button" class="col-md-6" style="text-align:center; width: auto;" class="btn btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close" (click)="closeModalDialog()" matStepperNext>
     <i class="bi bi-arrow-right-circle"></i>&nbsp;
      <span aria-hidden="true">Ok</span>
  </button>
  <button type="button" class="col-md-6" style="width: auto;" class="btn btn-danger btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close" (click)="closeModalDialog()">
     <i class="bi bi-x icon"></i>
      <span aria-hidden="true">Cancel</span>
  </button>
</div>

  </ng-template>

  <!-- <ng-template #observationIter let-modal>
    <form [formGroup]="ObservationsForm">
      <div class="modal-header" style="text-align: center; display: block">
        <h2 class="modal-title" style="display: contents">Observations:</h2>
      </div>
      <div class="modal-body">
        <textarea col=60 row=1 (keyup)="onKeyObservation($event);" 
        class="form-control"  [(ngModel)]="observationValuesI"
        formControlName="observations"  placeholder="Ex. Observations ..." >
        </textarea>
        <br>
        <div style="text-align: center">
          <button class="btn btn-primary" (click)="submit(observationUpdateFlag)" [disabled]="disableObservation" 
          style="font-size: 14px;">
            Save</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <button type="button" aria-label="Close" class="btn btn-danger" (click)="closeModalDialog()"
            style="font-size: 14px;">
            <i class="bi bi-x icon"></i>
            <span aria-hidden="true">Cancel</span>
          </button>
        </div>
  </div>
      <div *ngIf="success" style="text-align: center;">
        <span class="successshow">{{successMsg}}</span>
      </div>
      <div *ngIf="Error" style="text-align: center;">
        <span class="errorshow">{{errorMsg}}</span>
      </div>
    </form>
  
  </ng-template> -->