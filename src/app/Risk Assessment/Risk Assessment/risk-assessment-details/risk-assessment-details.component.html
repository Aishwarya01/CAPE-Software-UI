<div class="card">
    <div class="card-body">
    <form [formGroup]="step2Form" (ngSubmit)="submit()" (keyup)="onKeyForm($event)" (change)="onChangeForm($event)">  
    <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
            <mat-panel-title>
                <h3>Structure's Characteristics</h3>
            </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Location :</label>
                        <select class="form-control" formControlName="location"  (change) = changeLocation($event)
                        [ngClass]="{ 'is-invalid': submitted && f.location.errors }">
                            <option value="" selected>Select Option</option>
                            <option *ngFor="let value of locationList">{{value.location}}</option>
                        </select>
                        <div *ngIf="submitted && f.location.errors" class="invalid-feedback">
                            <div *ngIf="f.location?.errors?.required">Installation type is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4" *ngIf="f.location?.value === 'Others'">
                    <div class="form-group">
                        <label>Other Location* :</label>
                        <input type="text" class="form-control"  formControlName="otherLocation" placeholder="Enter Other Locations" 
                        [ngClass]="{ 'is-invalid': submitted && f.otherLocation.errors }">
                        <div *ngIf="submitted && f.otherLocation.errors" class="invalid-feedback">
                            <div *ngIf="f.otherLocation?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4" >
                    <div class="form-group">
                        <label>Ground flash density :</label>
                        <input type="number" class="form-control" [readonly] = "showFlashDensity" formControlName="groundFlashDensity" placeholder="Enter Designation" 
                       [ngClass]="{ 'is-invalid': submitted && f.groundFlashDensity.errors }">
                        <div *ngIf="submitted && f.groundFlashDensity.errors" class="invalid-feedback">
                            <div *ngIf="f.groundFlashDensity?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <hr>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Types of Building* :</label>
                        <select class="form-control" formControlName="typeOfBuilding"  
                        [ngClass]="{ 'is-invalid': submitted && f.typeOfBuilding.errors }">
                            <option value="" selected>Select Option</option>
                            <option value="Brick">Brick</option>
                            <option value="RCC with Brick">RCC with Brick</option>
                            <option value="PEB with sheet">PEB with sheet</option>
                            <option value="System designed by CAPE RCC building">System designed by CAPE RCC building</option>
                            <option value="System designed by CAPE PEB building">System designed by CAPE PEB building</option>
                        </select>
                        <div *ngIf="submitted && f.typeOfBuilding.errors" class="invalid-feedback">
                            <div *ngIf="f.typeOfBuilding?.errors?.required">Installation type is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Structure Screening Effectiveness :</label>
                        <input type="text" class="form-control" readonly formControlName="structureScreeningEffectiveness" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.structureScreeningEffectiveness.errors }">
                        <div *ngIf="submitted && f.structureScreeningEffectiveness.errors" class="invalid-feedback">
                            <div *ngIf="f.structureScreeningEffectiveness?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Internal Screening Effectiveness :</label>
                        <input type="text" class="form-control" readonly formControlName="internalScreeningEffectiveness" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.internalScreeningEffectiveness.errors }">
                        <div *ngIf="submitted && f.internalScreeningEffectiveness.errors" class="invalid-feedback">
                            <div *ngIf="f.internalScreeningEffectiveness?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <hr>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Length :</label>
                        <input type="number" class="form-control"  formControlName="protrusionLenght" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protrusionLenght.errors }">
                        <div *ngIf="submitted && f.protrusionLenght.errors" class="invalid-feedback">
                            <div *ngIf="f.protrusionLenght?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Width :</label>
                        <input type="number" class="form-control"  formControlName="protrusionWidth" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protrusionWidth.errors }">
                        <div *ngIf="submitted && f.protrusionWidth.errors" class="invalid-feedback">
                            <div *ngIf="f.protrusionWidth?.errors?.required">Designation is required</div>
                        </div>
                    </div>           
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Height :</label>
                        <input type="number" class="form-control"  formControlName="protrusionHeight" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protrusionHeight.errors }">
                        <div *ngIf="submitted && f.protrusionHeight.errors" class="invalid-feedback">
                            <div *ngIf="f.protrusionHeight?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Height of Highest Roof Protrusion :</label>
                        <input type="text" class="form-control" formControlName="heighestRoofProtrusion" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.heighestRoofProtrusion.errors }">
                        <div *ngIf="submitted && f.heighestRoofProtrusion.errors" class="invalid-feedback">
                            <div *ngIf="f.heighestRoofProtrusion?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Collection Area of Structure :</label>
                        <input type="text" class="form-control" readonly formControlName="collectionAreaOfStructure" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.collectionAreaOfStructure.errors }">
                        <div *ngIf="submitted && f.collectionAreaOfStructure.errors" class="invalid-feedback">
                            <div *ngIf="f.collectionAreaOfStructure?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Collection Area of Structure With Protrusion :</label>
                        <input type="text" class="form-control" readonly formControlName="collAreaOfStrucWithProtrusion" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.collAreaOfStrucWithProtrusion.errors }">
                        <div *ngIf="submitted && f.collAreaOfStrucWithProtrusion.errors" class="invalid-feedback">
                            <div *ngIf="f.collAreaOfStrucWithProtrusion?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Collection Area Near The Structure :</label>
                        <input type="text" class="form-control" readonly formControlName="collAreaOfNearStructure" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.collAreaOfNearStructure.errors }">
                        <div *ngIf="submitted && f.collAreaOfNearStructure.errors" class="invalid-feedback">
                            <div *ngIf="f.collAreaOfNearStructure?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>
            </div>

            <hr>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Height of Nearby Structure :</label>
                        <select class="form-control" formControlName="heightNearByStructure"  
                        [ngClass]="{ 'is-invalid': submitted && f.heightNearByStructure.errors }">
                            <option value="" selected>Select Option</option>
                            <option value="Lower than surrounding buildings">Lower than surrounding buildings</option>
                            <option value="Similar in height">Similar in height</option>
                            <option value="Tall/Isolated structure">Tall/Isolated structure</option>
                        </select>
                        <div *ngIf="submitted && f.heightNearByStructure.errors" class="invalid-feedback">
                            <div *ngIf="f.heightNearByStructure?.errors?.required">Installation type is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Electrical / Telephone Service Line :</label>
                        <select class="form-control" formControlName="telephoneServiceLine"  
                        [ngClass]="{ 'is-invalid': submitted && f.telephoneServiceLine.errors }">
                            <option value="" selected>Select Option</option>
                            <option value="LV power, telecommunication or data line">LV power, telecommunication or data line</option>
                            <option value="HV power (with HV/LV transformer)">HV power (with HV/LV transformer)</option>
                        </select>
                        <div *ngIf="submitted && f.telephoneServiceLine.errors" class="invalid-feedback">
                            <div *ngIf="f.telephoneServiceLine?.errors?.required">Installation type is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Environment :</label>
                        <select class="form-control" formControlName="environment"  
                        [ngClass]="{ 'is-invalid': submitted && f.environment.errors }">
                            <option value="" selected>Select Option</option>
                            <option value="Rural">Rural</option>
                            <option value="Suburban">Suburban</option>
                            <option value="Urban">Urban</option>
                            <option value="Urban with tall buildings">Urban with tall buildings</option>
                            <option value="Exposed hilltop">Exposed hilltop</option>
                        </select>
                        <div *ngIf="submitted && f.environment.errors" class="invalid-feedback">
                            <div *ngIf="f.environment?.errors?.required">Installation type is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>No of dangerous event on structure :</label>
                        <input type="text" class="form-control" readonly formControlName="noOfDangerousEventOnStructure" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.noOfDangerousEventOnStructure.errors }">
                        <div *ngIf="submitted && f.noOfDangerousEventOnStructure.errors" class="invalid-feedback">
                            <div *ngIf="f.noOfDangerousEventOnStructure?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>No of dangerous event near the structure :</label>
                        <input type="text" class="form-control" readonly formControlName="noOfDangerousEventNearStructure" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.noOfDangerousEventNearStructure.errors }">
                        <div *ngIf="submitted && f.noOfDangerousEventNearStructure.errors" class="invalid-feedback">
                            <div *ngIf="f.noOfDangerousEventNearStructure?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <hr>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Protection required for part of building :</label>
                        <select class="form-control" formControlName="protectionPartOFBuilding"  
                        [ngClass]="{ 'is-invalid': submitted && f.protectionPartOFBuilding.errors }">
                            <option value="" selected>Select Option</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <div *ngIf="submitted && f.protectionPartOFBuilding.errors" class="invalid-feedback">
                            <div *ngIf="f.protectionPartOFBuilding?.errors?.required">Installation type is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Length :</label>
                        <input type="text" class="form-control"  formControlName="protectionLenght" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protectionLenght.errors }">
                        <div *ngIf="submitted && f.protectionLenght.errors" class="invalid-feedback">
                            <div *ngIf="f.protectionLenght?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Width :</label>
                        <input type="text" class="form-control"  formControlName="protectionWidth" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protectionWidth.errors }">
                        <div *ngIf="submitted && f.protectionWidth.errors" class="invalid-feedback">
                            <div *ngIf="f.protectionWidth?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Height :</label>
                        <input type="text" class="form-control"  formControlName="protectionHeight" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protectionHeight.errors }">
                        <div *ngIf="submitted && f.protectionHeight.errors" class="invalid-feedback">
                            <div *ngIf="f.protectionHeight?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Collection Area :</label>
                        <input type="text" class="form-control" readonly formControlName="protectionCollectionArea" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.protectionCollectionArea.errors }">
                        <div *ngIf="submitted && f.protectionCollectionArea.errors" class="invalid-feedback">
                            <div *ngIf="f.protectionCollectionArea?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <hr>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Adjacent Building :</label>
                        <select class="form-control" formControlName="adjacentBuilding"  
                        [ngClass]="{ 'is-invalid': submitted && f.adjacentBuilding.errors }">
                            <option value="" selected>Select Option</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <div *ngIf="submitted && f.adjacentBuilding.errors" class="invalid-feedback">
                            <div *ngIf="f.adjacentBuilding?.errors?.required">Installation type is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Length :</label>
                        <input type="text" class="form-control" formControlName="adjacentLength" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.adjacentLength.errors }">
                        <div *ngIf="submitted && f.adjacentLength.errors" class="invalid-feedback">
                            <div *ngIf="f.adjacentLength?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Width :</label>
                        <input type="text" class="form-control"  formControlName="adjacentWidth" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.adjacentWidth.errors }">
                        <div *ngIf="submitted && f.adjacentWidth.errors" class="invalid-feedback">
                            <div *ngIf="f.adjacentWidth?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Height :</label>
                        <input type="text" class="form-control"  formControlName="adjacentHeight" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.adjacentHeight.errors }">
                        <div *ngIf="submitted && f.adjacentHeight.errors" class="invalid-feedback">
                            <div *ngIf="f.adjacentHeight?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Collection Area Of Adjacent Structure :</label>
                        <input type="text" class="form-control" readonly formControlName="collAreaOfAdjacentStruc" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.collAreaOfAdjacentStruc.errors }">
                        <div *ngIf="submitted && f.collAreaOfAdjacentStruc.errors" class="invalid-feedback">
                            <div *ngIf="f.collAreaOfAdjacentStruc?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>No of Dangerous Event On The Adjacent Structure :</label>
                        <input type="text" class="form-control" readonly formControlName="noOfDangEventOnAdjacentStruc" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.noOfDangEventOnAdjacentStruc.errors }">
                        <div *ngIf="submitted && f.noOfDangEventOnAdjacentStruc.errors" class="invalid-feedback">
                            <div *ngIf="f.noOfDangEventOnAdjacentStruc?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <hr>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Number Of People In The Building :</label>
                        <input type="text" class="form-control"  formControlName="noOfPeopleInBuilding" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.noOfPeopleInBuilding.errors }">
                        <div *ngIf="submitted && f.noOfPeopleInBuilding.errors" class="invalid-feedback">
                            <div *ngIf="f.noOfPeopleInBuilding?.errors?.required">Designation is required</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Number of People In The Zone :</label>
                        <input type="text" class="form-control"  formControlName="noOfPeopleInZone" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.noOfPeopleInZone.errors }">
                        <div *ngIf="submitted && f.noOfPeopleInZone.errors" class="invalid-feedback">
                            <div *ngIf="f.noOfPeopleInZone?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label>Number of Hours/Day People Are Present In The Building :</label>
                        <input type="text" class="form-control"  formControlName="dayPeoplePresentBuilding" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.dayPeoplePresentBuilding.errors }">
                        <div *ngIf="submitted && f.dayPeoplePresentBuilding.errors" class="invalid-feedback">
                            <div *ngIf="f.dayPeoplePresentBuilding?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>

            <div class="row" >
                <div class="col-md-4">
                    <div class="form-group">
                        <label>Number of hours/year people are present in the building :</label>
                        <input type="text" class="form-control" readonly formControlName="yearPeoplePresentBuilding" placeholder="Enter Designation" 
                         [ngClass]="{ 'is-invalid': submitted && f.yearPeoplePresentBuilding.errors }">
                        <div *ngIf="submitted && f.yearPeoplePresentBuilding.errors" class="invalid-feedback">
                            <div *ngIf="f.yearPeoplePresentBuilding?.errors?.required">Designation is required</div>
                        </div>
                    </div>            
                </div>
            </div>
        </mat-expansion-panel>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
            <mat-panel-title>
                <h3>Structure's Attributes</h3>
            </mat-panel-title>

            </mat-expansion-panel-header>
            <ng-container formArrayName="structureAttributes" *ngFor="let a of getStructureAttributesControls(); let i = index">
                <ng-container [formGroupName]="i">
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Type of Floor Surface :</label>
                                <select class="form-control" formControlName="stTypeOfFloorSurface"  
                                [ngClass]="{ 'is-invalid': submitted && a.get('stTypeOfFloorSurface')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Agricultural,concrete">Agricultural,concrete</option>
                                    <option value="Marble,Ceramic">Marble,Ceramic</option>
                                    <option value="Gravel,moquette,carpets">Gravel,moquette,carpets</option>
                                    <option value="Asphalt,linoleum,wood">Asphalt,linoleum,wood</option>
                                </select>
                                <div *ngIf="submitted && a.get('stTypeOfFloorSurface')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('stTypeOfFloorSurface')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Additional Protection :</label>
                                <select class="form-control" formControlName="stAdditionalProtection"  
                                [ngClass]="{ 'is-invalid': submitted && a.get('stAdditionalProtection')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="No protection measures">No protection measures</option>
                                    <option value="Warning notices">Warning notices</option>
                                    <option value="Electrical Insulation">Electrical Insulation</option>
                                    <option value="Effective Soil eqiupotentialisation">Effective Soil eqiupotentialisation</option>
                                    <option value="Physical restriction">Physical restriction</option>
                                </select>
                                <div *ngIf="submitted && a.get('stAdditionalProtection')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('stAdditionalProtection')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Risk of Fire :</label>
                                <input type="text" class="form-control"  formControlName="stRiskOfFire" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('stRiskOfFire')?.errors }">
                                <div *ngIf="submitted && a.get('stRiskOfFire')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('stRiskOfFire')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Fire Protection Measures :</label>
                                <select class="form-control" formControlName="stFireProtectionMeasure"  
                                [ngClass]="{ 'is-invalid': submitted && a.get('stFireProtectionMeasure')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="No provision">No provision</option>
                                    <option value="Manual">Manual</option>
                                    <option value="Automated system">Automated system</option>
                                </select>
                                <div *ngIf="submitted && a.get('stFireProtectionMeasure')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('stFireProtectionMeasure')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Type of Internal Wiring :</label>
                                <select class="form-control" formControlName="stTypeOfInternalWiring"  
                                [ngClass]="{ 'is-invalid': submitted && a.get('stTypeOfInternalWiring')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Unshielded,improper routing">Unshielded,improper routing</option>
                                    <option value="Unshielded,proper routing to avoid large loops">Unshielded,proper routing to avoid large loops</option>
                                    <option value="Unshielded,proper routing to avoid loops">Unshielded,proper routing to avoid loops</option>
                                    <option value="Shielded cables running in metal conduits">Shielded cables running in metal conduits</option>
                                </select>
                                <div *ngIf="submitted && a.get('stTypeOfInternalWiring')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('stTypeOfInternalWiring')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                    </div>
        
                    <hr>
        
                    <br>
                    <h3><b><u>Lines: </u></b></h3>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Total No of Lines :</label>
                                <input type="text" class="form-control"  formControlName="totalNoOfLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('totalNoOfLines')?.errors }">
                                <div *ngIf="submitted && a.get('totalNoOfLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('totalNoOfLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Number of Power Lines :</label>
                                <input type="text" class="form-control"  formControlName="noOfPowerLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('noOfPowerLines')?.errors }">
                                <div *ngIf="submitted && a.get('noOfPowerLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('noOfPowerLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Type of Power Lines :</label>
                                <select class="form-control" formControlName="typeOfPowerLines" 
                                [ngClass]="{ 'is-invalid': submitted && a.get('typeOfPowerLines')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Overhead">No protection measures</option>
                                    <option value="U.G cable from Electricity supplier">U.G cable from Electricity supplier</option>
                                    <option value="U.G cable from own transformer">U.G cable from own transformer</option>
                                </select>
                                <div *ngIf="submitted && a.get('typeOfPowerLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('typeOfPowerLines')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Length Of Power Line (In Meters) :</label>
                                <input type="text" class="form-control"  formControlName="lengthOfPowerLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('lengthOfPowerLines')?.errors }">
                                <div *ngIf="submitted && a.get('lengthOfPowerLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('lengthOfPowerLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Shielding, groundig, isolation :</label>
                                <select class="form-control" formControlName="shieldingGroundingIsolation" 
                                [ngClass]="{ 'is-invalid': submitted && a.get('shieldingGroundingIsolation')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="TN-C-S system with PME">TN-C-S system with PME</option>
                                    <option value="Burried, shield not equipotentially bonded">Burried, shield not equipotentially bonded</option>
                                    <option value="Overhead, shield not equipotentially bonded">Overhead, shield not equipotentially bonded</option>
                                    <option value="Burried, shield equipotentially bonded">Burried, shield equipotentially bonded</option>
                                    <option value="Overhead, shield equipotentially bonded">Overhead, shield equipotentially bonded</option>
                                    <option value="Overhead, unknown bonding at line entrance">Overhead, unknown bonding at line entrance</option>
                                    <option value="No external line">No external line</option>
                                    <option value="Designed by CAPE(large building with transformer and DG)">Designed by CAPE(large building with transformer and DG)</option>
                                </select>
                                <div *ngIf="submitted && a.get('shieldingGroundingIsolation')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('shieldingGroundingIsolation')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Collection Area Of The Power Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="collAreaOfPowerLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('collAreaOfPowerLines')?.errors }">
                                <div *ngIf="submitted && a.get('collAreaOfPowerLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('collAreaOfPowerLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Collection Area Near The Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="collAreaOfNearLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('collAreaOfNearLines')?.errors }">
                                <div *ngIf="submitted && a.get('collAreaOfNearLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('collAreaOfNearLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>No of Dangerous Event Near The Power Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="eventNearThePowerLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('eventNearThePowerLines')?.errors }">
                                <div *ngIf="submitted && a.get('eventNearThePowerLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('eventNearThePowerLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>No of Dangerous Event On The Power Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="eventOnThePowerLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('eventOnThePowerLines')?.errors }">
                                <div *ngIf="submitted && a.get('eventOnThePowerLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('eventOnThePowerLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Number of Telecom lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="noOfTelecomLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('noOfTelecomLines')?.errors }">
                                <div *ngIf="submitted && a.get('noOfTelecomLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('noOfTelecomLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Type of Telecom Lines :</label>
                                <select class="form-control" formControlName="typeOfTelecomLines"  
                                [ngClass]="{ 'is-invalid': submitted && a.get('typeOfTelecomLines')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Overhead">Overhead</option>
                                    <option value="U.G cable from Telecom supplier">U.G cable from Telecom supplier</option>
                                    <option value="U.G cable from own tower">U.G cable from own tower</option>
                                </select>
                                <div *ngIf="submitted && a.get('typeOfTelecomLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('typeOfTelecomLines')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Length Of Telecom Line (In Meters) :</label>
                                <input type="text" class="form-control"  formControlName="lengthOfTelecomLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('lengthOfTelecomLines')?.errors }">
                                <div *ngIf="submitted && a.get('lengthOfTelecomLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('lengthOfTelecomLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Shielding, groundig, isolation :</label>
                                <select class="form-control" formControlName="shieldingGroundingIsolationL1"  
                                [ngClass]="{ 'is-invalid': submitted && a.get('shieldingGroundingIsolationL1')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="TN-C-S system with PME">TN-C-S system with PME</option>
                                    <option value="Burried, shield not equipotentially bonded">Burried, shield not equipotentially bonded</option>
                                    <option value="Overhead, shield not equipotentially bonded">Overhead, shield not equipotentially bonded</option>
                                    <option value="Burried, shield equipotentially bonded">Burried, shield equipotentially bonded</option>
                                    <option value="Overhead, shield equipotentially bonded">Overhead, shield equipotentially bonded</option>
                                    <option value="Overhead, unknown bonding at line entrance">Overhead, unknown bonding at line entrance</option>
                                    <option value="No external line">No external line</option>
                                    <option value="Designed by CAPE(large building with transformer and DG)">Designed by CAPE(large building with transformer and DG)</option>
                                </select>
                                <div *ngIf="submitted && a.get('shieldingGroundingIsolationL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('shieldingGroundingIsolationL1')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Collection Area Of The Telecom Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="collAreaOfTelecomLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('collAreaOfTelecomLines')?.errors }">
                                <div *ngIf="submitted && a.get('collAreaOfTelecomLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('collAreaOfTelecomLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Collection Area Near The Telecom Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="collNearOfTelecomLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('collNearOfTelecomLines')?.errors }">
                                <div *ngIf="submitted && a.get('collNearOfTelecomLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('collNearOfTelecomLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>No of Dangerous Event Near The Telecom Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="eventNearTheTelecomeLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('eventNearTheTelecomeLines')?.errors }">
                                <div *ngIf="submitted && a.get('eventNearTheTelecomeLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('eventNearTheTelecomeLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>No of Dangerous Event On The Telecom Lines :</label>
                                <input type="text" readonly class="form-control"  formControlName="eventOnTheTelecomLines" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && a.get('eventOnTheTelecomLines')?.errors }">
                                <div *ngIf="submitted && a.get('eventOnTheTelecomLines')?.errors" class="invalid-feedback">
                                    <div *ngIf="a.get('eventOnTheTelecomLines')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
                </ng-container>
            </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" class="LiabilityTT">
            <mat-expansion-panel-header>
            <mat-panel-title>
                <h3>Losses</h3>
            </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container formArrayName="losses" *ngFor="let b of getLossesControls(); let i = index">
                <ng-container [formGroupName]="i">
                    <h3><b><u>Loss of Human Life (L1) :</u></b></h3>
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Hazard Classification :</label>
                                <select class="form-control" formControlName="hazardClassification"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('hazardClassification')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Concrete houses">Concrete houses</option>
                                    <option value="Two floor buildings with less than 100 people">Two floor buildings with less than 100 people</option>
                                    <option value="Culturals/sports - 100 to 1000 people">Culturals/sports - 100 to 1000 people</option>
                                    <option value="Hospitals,Multi-Storey Buildings">Hospitals,Multi-Storey Buildings</option>
                                    <option value="Culturals/sports - more than 1000 people">Culturals/sports - more than 1000 people</option>
                                    <option value="Multistoried buildings/hotels/industrial/commercial">Multistoried buildings/hotels/industrial/commercial</option>
                                    <option value="Risk of explosion">Risk of explosion</option>
                                </select>
                                <div *ngIf="submitted && b.get('hazardClassification')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('hazardClassification')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <select class="form-control" formControlName="humanLossOfphysicalDamage" 
                                [ngClass]="{ 'is-invalid': submitted && b.get('humanLossOfphysicalDamage')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Risk of explosion">Risk of explosion</option>
                                    <option value="Hospitals,hotel,school,civic building">Hospitals,hotel,school,civic building</option>
                                    <option value="Public entertainment,church,museum">Public entertainment,church,museume</option>
                                    <option value="Industrial,commercial">Industrial,commercials</option>
                                    <option value="Others">Others</option>
                                </select>
                                <div *ngIf="submitted && b.get('humanLossOfphysicalDamage')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('humanLossOfphysicalDamage')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Failure Of Internal Systems :</label>
                                <select class="form-control" formControlName="humanLossOffailureOfInternalSystem"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('humanLossOffailureOfInternalSystem')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Risk of explosion">Risk of explosion</option>
                                    <option value="Concrete houses">Concrete houses</option>
                                    <option value="Intensive care unit & Operation block of hospital">Intensive care unit & Operation block of hospital</option>
                                    <option value="Other part of Buildings">Other part of Buildings</option>
                                </select>
                                <div *ngIf="submitted && b.get('humanLossOffailureOfInternalSystem')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('humanLossOffailureOfInternalSystem')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Injury To Living Beings By Electric Shock :</label>
                                <input type="text" readonly class="form-control"  formControlName="humanLossOfInjuryOfElectricShock" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('humanLossOfInjuryOfElectricShock')?.errors }">
                                <div *ngIf="submitted && b.get('humanLossOfInjuryOfElectricShock')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('humanLossOfInjuryOfElectricShock')?.errors?.required">Designation is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage L1 :</label>
                                <input type="text" readonly class="form-control"  formControlName="humanLossOfPhysicalDamageL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('humanLossOfPhysicalDamageL1')?.errors }">
                                <div *ngIf="submitted && b.get('humanLossOfPhysicalDamageL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('humanLossOfPhysicalDamageL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Failure Of Internal Systems :</label>
                                <input type="text" readonly class="form-control"  formControlName="humanLossOffailureOfInternalSystemL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('humanLossOffailureOfInternalSystemL1')?.errors }">
                                <div *ngIf="submitted && b.get('humanLossOffailureOfInternalSystemL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('humanLossOffailureOfInternalSystemL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <hr>
        
                    <br>
                    <h3><b><u>Loss Of Service To Public (L2) :</u></b></h3>
                    <div class="row" >
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <select class="form-control" formControlName="SerToPubPhysicalDamage"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('SerToPubPhysicalDamage')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Gas, water,power supply">Gas,water,power supply</option>
                                    <option value="TV, telecommunication lines">TV, telecommunication lines</option>
                                    <option value="No Service">No Service</option>
                                </select>
                                <div *ngIf="submitted && b.get('SerToPubPhysicalDamage')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('SerToPubPhysicalDamage')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Loss Due To Failure Of Internal System :</label>
                                <select class="form-control" formControlName="serToPubfailureOfInternalSystem"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('serToPubfailureOfInternalSystem')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Gas, water,power supply">Gas,water,power supply</option>
                                    <option value="TV, telecommunication lines">TV, telecommunication lines</option>
                                    <option value="No Service">No Service</option>
                                </select>
                                <div *ngIf="submitted && b.get('serToPubfailureOfInternalSystem')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('serToPubfailureOfInternalSystem')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <input type="text"  class="form-control"  formControlName="SerToPubPhysicalDamageL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('SerToPubPhysicalDamageL1')?.errors }">
                                <div *ngIf="submitted && b.get('SerToPubPhysicalDamageL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('SerToPubPhysicalDamageL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>Loss Due To Failure Of Internal Systems :</label>
                                <input type="text"  class="form-control"  formControlName="serToPubfailureOfInternalSystemL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('serToPubfailureOfInternalSystemL1')?.errors }">
                                <div *ngIf="submitted && b.get('serToPubfailureOfInternalSystemL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('serToPubfailureOfInternalSystemL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <hr>
        
                    <br>
                    <h3><b><u>Loss Of Cultural Heritage (L3) :</u></b></h3>
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <select class="form-control" formControlName="culHerOfPhysicalDamage" 
                                [ngClass]="{ 'is-invalid': submitted && b.get('culHerOfPhysicalDamage')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Museums,galleries">Museums,galleries</option>
                                    <option value="No Cultural Heritage">No Cultural Heritage</option>
                                </select>
                                <div *ngIf="submitted && b.get('culHerOfPhysicalDamage')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('culHerOfPhysicalDamage')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <input type="text"  class="form-control"  formControlName="culHerOfPhysicalDamageL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('culHerOfPhysicalDamageL1')?.errors }">
                                <div *ngIf="submitted && b.get('culHerOfPhysicalDamageL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('culHerOfPhysicalDamageL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                    </div>
        
                    <hr>
        
                    <br>
                    <h3><b><u>Economic Loss (L4) :</u></b></h3>
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <select class="form-control" formControlName="ecoLossOfPhysicalDamage"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('ecoLossOfPhysicalDamage')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Risk of explosion">Risk of explosion</option>
                                    <option value="Hospitals,industrial,museum,agricultural">Hospitals,industrial,museum,agricultural</option>
                                    <option value="Hotel,school,office,public entertainment,church,commercial">Hotel,school,office,public entertainment,church,commercial</option>
                                    <option value="Others">Others</option>
                                </select>
                                <div *ngIf="submitted && b.get('ecoLossOfPhysicalDamage')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('ecoLossOfPhysicalDamage')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Failure Of Internal System :</label>
                                <select class="form-control" formControlName="ecoLossOfFailureOfInternalSystem" 
                                [ngClass]="{ 'is-invalid': submitted && b.get('ecoLossOfFailureOfInternalSystem')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="Risk of explosion">Risk of explosion</option>
                                    <option value="Hospitals,industrial,hotel,office,commercial">Hospitals,industrial,hotel,office,commercial</option>
                                    <option value="Museum,agricultural,school,office,public entertainment,church">Museum,agricultural,school,office,public entertainment,church</option>
                                    <option value="Others">Others</option>
                                </select>
                                <div *ngIf="submitted && b.get('ecoLossOfFailureOfInternalSystem')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('ecoLossOfFailureOfInternalSystem')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Injury To Living Beings By Electric Shock :</label>
                                <input type="text"  class="form-control"  formControlName="ecoLossOfInjuryOfElectricShock" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('ecoLossOfInjuryOfElectricShock')?.errors }">
                                <div *ngIf="submitted && b.get('ecoLossOfInjuryOfElectricShock')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('ecoLossOfInjuryOfElectricShock')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                    </div>
        
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Physical Damage :</label>
                                <input type="text"  class="form-control"  formControlName="ecoLossOfPhysicalDamageL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('ecoLossOfPhysicalDamageL1')?.errors }">
                                <div *ngIf="submitted && b.get('ecoLossOfPhysicalDamageL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('ecoLossOfPhysicalDamageL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Loss Due To Failure Of Internal Systems:</label>
                                <input type="text"  class="form-control"  formControlName="ecoLossOfFailureOfInternalSystemL1" placeholder="Enter Designation" 
                                 [ngClass]="{ 'is-invalid': submitted && b.get('ecoLossOfFailureOfInternalSystemL1')?.errors }">
                                <div *ngIf="submitted && b.get('ecoLossOfFailureOfInternalSystemL1')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('ecoLossOfFailureOfInternalSystemL1')?.errors?.required">Designation is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>
        
                    <hr>
        
                    <br>
                    <h3><b><u>Protection :</u></b></h3>
                    <div class="row" >
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Class of LPS :</label>
                                <select class="form-control" formControlName="classOfLPS"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('classOfLPS')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="No External LPS">No External LPS</option>
                                    <option value="Class IV LPS">Class IV LPS</option>
                                    <option value="Class III LPS">Class III LPS</option>
                                    <option value="Class II LPS">Class II LPS</option>
                                    <option value="Class I LPS">Class I LPS</option>
                                </select>
                                <div *ngIf="submitted && b.get('classOfLPS')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('classOfLPS')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Class of SPD :</label>
                                <select class="form-control" formControlName="classOfSPD"  
                                [ngClass]="{ 'is-invalid': submitted && b.get('classOfSPD')?.errors }">
                                    <option value="" selected>Select Option</option>
                                    <option value="No SPD">No SPD</option>
                                    <option value="Protec T1H 300 3+1 R">Protec T1H 300 3+1 R</option>
                                    <option value="Protec T1HS 300 3+1 R">Protec T1HS 300 3+1 R</option>
                                    <option value="Protec T1H 300 3+1 R & Protec T2H 300 3+1">Protec T1H 300 3+1 R & Protec T2H 300 3+1</option>
                                </select>
                                <div *ngIf="submitted && b.get('classOfSPD')?.errors" class="invalid-feedback">
                                    <div *ngIf="b.get('classOfSPD')?.errors?.required">Installation type is required</div>
                                </div>
                            </div>            
                        </div>
                    </div>        
                </ng-container>
            </ng-container>
        </mat-expansion-panel>
    </mat-accordion>
    
    <br>
    <div class="row" style="margin-top: 20px;">
        <!-- <button class="previous" mat-button matStepperPrevious>&laquo; Back</button> -->
        <button class="next" 
        mat-button>Next &raquo;</button>
    </div>

    </form>

    </div>
</div>
     