<div class="card">
    <div class="card-body">
      <form [formGroup]="step1Form" (ngSubmit)="nextTab(flag)">
      <div class="search-bar">
          <div class="form-group" *ngIf="siteDetails">
            <div class="row">
              <div class="col-md-4">
                    <label>Company Name*</label>
                    <select class="form-control" formControlName="clientName" (change)="changeClientName($event)"
                    [ngClass]="{ 'is-invalid': submitted && f.clientName.errors }">
                      <option value="0" selected>Select Client Name</option>
                      <option *ngFor="let client of clientList">{{client.clientName}}</option>
                    </select>
                    <div *ngIf="submitted && f.clientName.errors" class="invalid-feedback">
                      <div *ngIf="f.clientName?.errors?.required">Client name is required</div>
                  </div>
              </div>
              <div class="col-md-4">
                    <label>Department Name*</label>
                    <select class="form-control"  formControlName="departmentName" (change)="retrieveSiteInfo($event)" [ngClass]="{ 'is-invalid': submitted && f.departmentName.errors }">
                      <option value="0" selected>Select Department Name</option>
                      <option *ngFor="let department of departmentListInspec">{{department.departmentName}}</option>
                    </select>
                    <div *ngIf="submitted && f.departmentName.errors" class="invalid-feedback">
                      <div *ngIf="f.departmentName?.errors?.required">Department name is required</div>
                  </div>
              </div>
              <div class="col-md-4">
                    <label>Site Name*</label>
                    <select class="form-control" formControlName="siteName" (change)="retrieveSiteId($event)" [ngClass]="{ 'is-invalid': submitted && f.siteName.errors }">
                      <option value="0" selected>Select Site Name</option>
                      <option *ngFor="let site of siteListInspec">{{site.site}}</option>
                    </select>
                    <div *ngIf="submitted && f.siteName.errors" class="invalid-feedback">
                      <div *ngIf="f.siteName?.errors?.required">Site name is required</div>
                  </div>
              </div>
            </div>
        </div>

        <div class="form-group" *ngIf="siteDetails1">
          <div class="row">
            <div class="col-md-4">
                  <label>Company Name</label>
                  <input type="text" class="form-control" formControlName="clientName1" readonly/>
            </div>
            <div class="col-md-4">
                  <label>Department Name</label>
                  <input type="text" class="form-control"  formControlName="departmentName1" readonly/>
            </div>
            <div class="col-md-4">
                  <label>Site Name</label>
                  <input type="text" class="form-control"  formControlName="site1" readonly/>
            </div>
          </div>
      </div>
      </div>

      <mat-accordion>
          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Details Of Report</h3>
              </mat-panel-title>

            </mat-expansion-panel-header>

            <mat-form-field class="client-description ">
              <mat-label><h3>Description of Report*</h3></mat-label>
              <textarea matInput class="client-box-description" formControlName="descriptionOfReport"
              maxlength="500" placeholder="Ex. Report description..." [(ngModel)]="reportDetails.descriptionReport"
              [ngClass]="{ 'is-invalid': submitted && f.descriptionOfReport.errors }"></textarea>
              <div *ngIf="submitted && f.descriptionOfReport.errors" class="invalid-feedback">
                <div *ngIf="f.descriptionOfReport?.errors?.required">Description is required</div>
            </div>
            </mat-form-field>

            <mat-form-field class="client-description ">
              <mat-label><h3>Reason for the Report*</h3></mat-label>
              <textarea matInput class="client-box-description" formControlName="reasonOfReport" maxlength="500" placeholder="Ex. Report reason..." [(ngModel)]="reportDetails.reasonOfReport" [ngClass]="{ 'is-invalid': submitted && f.reasonOfReport.errors }"></textarea>
              <div *ngIf="submitted && f.reasonOfReport.errors" class="invalid-feedback">
                <div *ngIf="f.reasonOfReport?.errors?.required">Reason is required</div>
            </div>
            </mat-form-field>
          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Installation Details</h3>
              </mat-panel-title>

            </mat-expansion-panel-header>
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label>Type of Installation* :</label>
                  <select class="form-control" formControlName="installationType" (change)="showWiringAge($event)"
                  [(ngModel)]="reportDetails.installationType" [ngClass]="{ 'is-invalid': submitted && f.installationType.errors }">
                    <option [ngValue]="null">Select Option</option>
                    <option *ngFor="let value of installationList">{{value}}</option>
                  </select>
                  <div *ngIf="submitted && f.installationType.errors" class="invalid-feedback">
                    <div *ngIf="f.installationType?.errors?.required">Installation type is required</div>
                </div>
                </div>
              </div>

              <div class="col-md-4">
                <div class="form-group">
                  <label>Description of the Premise* :</label>
                  <select class="form-control" formControlName="descPremise"
                  [(ngModel)]="reportDetails.descriptionPremise" [ngClass]="{ 'is-invalid': submitted && f.descPremise.errors }">
                    <option value="0" selected>Select Option</option>
                    <option *ngFor="let value of premiseList" >{{value}}</option>
                  </select>
                  <div *ngIf="submitted && f.descPremise.errors" class="invalid-feedback">
                    <div *ngIf="f.descPremise?.errors?.required">Field Is Required</div>
                </div>
                </div>
              </div>

              <div class="col-md-4" *ngIf="showField1" style="margin-top: 24px;">
                  <label>Estimated Age of Wiring System Years:</label>
                    <input type="tel" formControlName="showField1" style="
                    width: 50px;
                    background: transparent;
                    border: none;
                    border-bottom: 1px solid #000000;"
                     [(ngModel)]="reportDetails.estimatedWireAge"
                     [ngClass]="{ 'is-invalid': submitted && f.showField1.errors }">
                     <div *ngIf="submitted && f.showField1.errors" class="invalid-feedback">
                      <div *ngIf="f.showField1?.errors?.required">Field Is Required</div>
                     </div>
              </div>

              <div class="col-md-4">
                <label>Evidence of Addition/Alterations* :</label>
                <select class="form-control" formControlName="evidenceAlterations" (change)="showEstimatedAge($event)"
                 [(ngModel)]="reportDetails.evidanceAddition" [ngClass]="{ 'is-invalid': submitted && f.evidenceAlterations.errors }">
                  <option value="0" selected>Select Option</option>
                  <option *ngFor="let value of evidenceList" >{{value}}</option>
                </select>
                <div *ngIf="submitted && f.evidenceAlterations.errors" class="invalid-feedback">
                  <div *ngIf="f.evidenceAlterations?.errors?.required">Evidence is required</div>
              </div>
              </div>

              <div class="col-md-4" *ngIf="showField2" style="margin-top: 35px;">
                <label>If Yes Estimated Age Years:</label>
                  <input type="tel" formControlName="showField2" style="
                  width: 50px;
                  background: transparent;
                  border: none;
                  border-bottom: 1px solid #000000;"
                  [(ngModel)]="reportDetails.evidanceWireAge"
                  [ngClass]="{ 'is-invalid': submitted && f.showField2.errors }">
                <div *ngIf="submitted && f.showField2.errors" class="invalid-feedback">
                  <div *ngIf="f.showField2?.errors?.required">Field Is Required</div>
                </div>
              </div>
              

              <div class="col-md-4">
                <label>Previous Records Available* :</label>
                <select class="form-control" formControlName="previousRecord"
                [(ngModel)]="reportDetails.previousRecords" [ngClass]="{ 'is-invalid': submitted && f.previousRecord.errors }">
                  <option value="0" selected>Select Option</option>
                  <option *ngFor="let value of previousRecordList" >{{value}}</option>
                </select>
                <div *ngIf="submitted && f.previousRecord.errors" class="invalid-feedback">
                  <div *ngIf="f.previousRecord?.errors?.required">Previous record is required</div>
                </div>
              </div>

              <div class="col-md-4">
                <label>Last Date Of Inspection* :</label>
                <input type="date" class="form-control" formControlName="inspectionLast" placeholder="Enter Date"
                [(ngModel)]="reportDetails.lastInspection" [ngClass]="{ 'is-invalid': submitted && f.inspectionLast.errors }">
                <div *ngIf="submitted && f.inspectionLast.errors" class="invalid-feedback">
                  <div *ngIf="f.inspectionLast?.errors?.required">Inspection last date is required</div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-4">
                <mat-form-field class="client-description ">
                  <mat-label><h3>Extent of Installation Covered By This Report*</h3> </mat-label>
                  <textarea matInput class="client-box-description" formControlName="extentInstallation"
                  maxlength="500" placeholder="Ex. Report reason..."
                  [(ngModel)]="reportDetails.extentInstallation"
                  [ngClass]="{ 'is-invalid': submitted && f.extentInstallation.errors }"></textarea>
                  <div *ngIf="submitted && f.extentInstallation.errors" class="invalid-feedback">
                    <div *ngIf="f.extentInstallation?.errors?.required">Field Is Required</div>
                  </div>
                </mat-form-field>
              </div>
            </div>

          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Details Of Client / Person Ordering This Report </h3>
              </mat-panel-title>

            </mat-expansion-panel-header>
            <div class="row">
              <div class="col-md-4">
                <mat-form-field class="client-description ">
                  <mat-label><h3>Details Of Client / Person Ordering This Report * (maximum length is 50 )</h3></mat-label>
                  <textarea matInput class="client-box-description" formControlName="detailsOfClient" maxlength="50"
                  [ngClass]="{ 'is-invalid': submitted && f.detailsOfClient.errors }" placeholder=" Ex. Name, address ,purpose ,relation with end user.." [(ngModel)]="reportDetails.clientDetails"></textarea>
                  <div *ngIf="submitted && f.detailsOfClient.errors" class="invalid-feedback">
                    <div *ngIf="f.detailsOfClient?.errors?.required">Details Of client is required</div>
                </div>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-md-4">
                <mat-form-field class="client-description ">
                  <mat-label><h3>Details Of Installation Referred In This Report * (maximum length is 75 )</h3></mat-label>
                  <textarea matInput class="client-box-description" formControlName="detailsOfInstallation" maxlength="75" [ngClass]="{ 'is-invalid': submitted && f.detailsOfInstallation.errors }" placeholder=" Ex. Occupier ,address details etc.." [(ngModel)]="reportDetails.installationDetails"></textarea>
                  <div *ngIf="submitted && f.detailsOfInstallation.errors" class="invalid-feedback">
                    <div *ngIf="f.detailsOfInstallation?.errors?.required">Details Of installation is required</div>
                </div>
                </mat-form-field>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label>Date of Starting the Verification *</label>
                  <input type="date" class="form-control" formControlName="startingDateVerification"
                  [ngClass]="{ 'is-invalid': submitted && f.startingDateVerification.errors }" placeholder="Enter Date" [(ngModel)]="reportDetails.verificationDate">
                  <div *ngIf="submitted && f.startingDateVerification.errors" class="invalid-feedback">
                    <div *ngIf="f.startingDateVerification?.errors?.required">Field Is Required</div>
                </div>
                </div>

                <div class="col-md-4">
                  <label>Name of Engineer Who Carries Out Verification * :</label>
                  <input type="text" class="form-control" formControlName="engineerName" placeholder="Enter Engineer Name" [(ngModel)]="reportDetails.verifiedEngineer" [ngClass]="{ 'is-invalid': submitted && f.engineerName.errors }">
                  <div *ngIf="submitted && f.engineerName.errors" class="invalid-feedback">
                    <div *ngIf="f.engineerName?.errors?.required">Engineer name is required</div>
                </div>
                </div>

                <div class="col-md-4">
                  <label>Designation* :</label>
                  <input type="text" class="form-control" formControlName="designation" placeholder="Enter Designation" 
                  [(ngModel)]="reportDetails.designation" [ngClass]="{ 'is-invalid': submitted && f.designation.errors }">
                  <div *ngIf="submitted && f.designation.errors" class="invalid-feedback">
                    <div *ngIf="f.designation?.errors?.required">Designation is required</div>
                </div>
                </div>
              </div>
            </div>

            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label>Company* :</label>
                  <input type="text" class="form-control" formControlName="companyName" placeholder="Enter Company Name" [(ngModel)]="reportDetails.company" [ngClass]="{ 'is-invalid': submitted && f.companyName.errors }">
                  <div *ngIf="submitted && f.companyName.errors" class="invalid-feedback">
                    <div *ngIf="f.companyName?.errors?.required">Company name is required</div>
                </div>
                </div>

                <div class="col-md-4">
                  <label>Read and Confirmed the Extent and Limitations* :</label>
                  <select class="form-control" formControlName="limitations" [(ngModel)]="reportDetails.limitations" [ngClass]="{ 'is-invalid': submitted && f.limitations.errors }">
                    <option value="0" selected>Select Option</option>
                    <option *ngFor="let value of previousRecordList" >{{value}}</option>
                  </select>
                  <div *ngIf="submitted && f.limitations.errors" class="invalid-feedback">
                    <div *ngIf="f.limitations?.errors?.required">Field Is Required</div>
                </div>
                </div>
              </div>
            </div>

          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Liability and Declaration</h3>
              </mat-panel-title>

            </mat-expansion-panel-header>
            <h3><b>Declaration of Designer of the Electrical Installation:</b></h3>
            <div class="form-group">
                <p>
                  I/we being the person responsible for the design of the electrical installation (as indicated by my/our signatures below), particulars of which are described above, having exercised reasonable skill and care when carrying out the design hereby declare that design work for which I/We have been responsible is to the best of my/our knowledge and belief in accordance with IEC 60364
                </p>
                <p>
                  The extent of liability of the signatory or signatories is limited to the work described above as the subject of this report.
                </p>

                <div formArrayName="designer1AcknowledgeArr" *ngFor="let a of getDesigner1AcknowledgeControls(); let i = index">
                  <div class="form-group" [formGroupName]="i">

                    <h2>Designer 1* :</h2>
                    <div class="row">
                      <div class="col-md-4">
                        <label>Signature:</label>
                        <input type="text" formControlName="declarationSignature" class="form-control"
                        [ngClass]="{ 'is-invalid': submitted && a.get('declarationSignature')?.errors }">
                          <div *ngIf="submitted && a.get('declarationSignature')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationSignature')?.errors?.required">Signature is required</div>
                        </div>
                      </div>

                      <div class="col-md-4">
                        <label>Date:</label>
                        <input type="date" formControlName="declarationDate" class="form-control" placeholder="Enter Date"
                        [ngClass]="{ 'is-invalid': submitted && a.get('declarationDate')?.errors }">
                          <div *ngIf="submitted && a.get('declarationDate')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationDate')?.errors?.required">Date is required</div>
                        </div>
                      </div>

                      <div class="col-md-4">
                        <label>Name (In block letters) :</label>
                        <input type="text" formControlName="declarationName" class="form-control" placeholder="Enter Designer Name"
                        [ngClass]="{ 'is-invalid': submitted && a.get('declarationName')?.errors }">
                          <div *ngIf="submitted && a.get('declarationName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationName')?.errors?.required">Name (In block letters) is required</div>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>

              <div formArrayName="designer2AcknowledgeArr" *ngFor="let a of getDesigner2AcknowledgeControls(); let i = index">
                <div class="form-group" [formGroupName]="i">
                   <h2>Designer 2: (Optional)</h2>
                    <div class="row">
                      <div class="col-md-4">
                        <label>Signature:</label>
                        <input type="text" formControlName="declarationSignature" class="form-control">
                      </div>
                      <div class="col-md-4">
                        <label>Date:</label>
                        <input type="date" formControlName="declarationDate" class="form-control" placeholder="Enter Date">
                      </div>

                      <div class="col-md-4">
                        <label>Name (In block letters) :</label>
                        <input type="text" formControlName="declarationName" class="form-control" placeholder="Enter Designer Name">
                      </div>
                    </div>

                  </div>
                </div>
            </div>

            <div class="form-group">
                <h3><b>Declaration of Contractor of Installation:</b></h3>
                  <p>
                    I/we being the person responsible for the construction of the electrical installation (as indicated by my/our signatures below), particulars of which are described above, having exercised reasonable skill and care when carrying out the design hereby declare that the design work for which I/We have been responsible is to the best of my/our knowledge and belief in accordance with IEC 60364
                  </p>
                  <p>
                    The extent of liability of the signatory is limited to the work described above as the subject of this report.
                  </p>

                  <div formArrayName="contractorAcknowledgeArr" *ngFor="let a of getContractorAcknowledgeControls(); let i = index">
                    <div class="form-group" [formGroupName]="i">
                      <h2>Contractor* :</h2>
                      <div class="row">
                        <div class="col-md-4">
                          <label>Signature:</label>
                          <input type="text" formControlName="declarationSignature" class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && a.get('declarationSignature')?.errors }">
                          <div *ngIf="submitted && a.get('declarationSignature')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationSignature')?.errors?.required">Signature is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                          <label>Date:</label>
                          <input type="date" formControlName="declarationDate" class="form-control" placeholder="Enter Date"
                          [ngClass]="{ 'is-invalid': submitted && a.get('declarationDate')?.errors }">
                          <div *ngIf="submitted && a.get('declarationDate')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationDate')?.errors?.required">Date is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                          <label>Name (In block letters) :</label>
                          <input type="text" formControlName="declarationName" class="form-control" placeholder="Enter Contractor Name"
                          [ngClass]="{ 'is-invalid': submitted && a.get('declarationName')?.errors }">
                          <div *ngIf="submitted && a.get('declarationName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationName')?.errors?.required">Name (In block letters) is required</div>
                        </div>
                        </div>
                      </div>

                    </div>
                  </div>
            </div>

            <div class="form-group">
                <h3><b>Declaration of Safety Engineer (Inspector):</b></h3>
                  <p>
                    I/we being the person responsible for the inspection & testing  of the electrical installation (as indicated by my/our signatures below), particulars of which are described above, having exercised reasonable skill and care when carrying out the design hereby declare that the design work for which I/We have been responsible is to the best of my/our knowledge and belief in accordance with IEC 60364
                  </p>
                  <p>
                    The extent of liability of the signatory is limited to the work described above as the subject of this report.
                  </p>
                  <div formArrayName="inspectorAcknowledgeArr" *ngFor="let a of getInspectorAcknowledgeControls(); let i = index">
                    <div class="form-group" [formGroupName]="i">

                      <h2>Inspector* :</h2>
                      <div class="row">
                        <div class="col-md-4">
                          <label>Signature:</label>
                          <input type="text" formControlName="declarationSignature" class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && a.get('declarationSignature')?.errors }">
                          <div *ngIf="submitted && a.get('declarationSignature')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationSignature')?.errors?.required">Signature is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                          <label>Date:</label>
                          <input type="date" formControlName="declarationDate" class="form-control" placeholder="Enter Date"
                          [ngClass]="{ 'is-invalid': submitted && a.get('declarationDate')?.errors }">
                          <div *ngIf="submitted && a.get('declarationDate')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationDate')?.errors?.required">Date is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                          <label>Name (In block letters) :</label>
                          <input type="text" formControlName="declarationName" class="form-control" placeholder="Enter Inspector Name"
                          [ngClass]="{ 'is-invalid': submitted && a.get('declarationName')?.errors }">
                          <div *ngIf="submitted && a.get('declarationName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('declarationName')?.errors?.required">Name (In block letters) is required</div>
                        </div>
                        </div>
                      </div>

                    </div>
                  </div>
            </div>

          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Next Inspection</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <label>I/We recommend that installation is further inspected and tested after an interval of not more than: </label>
              <input type="number" [ngClass]="{ 'is-invalid': submitted && f.nextInspection.errors }" style="
              width: 75px;
              background: transparent;
              border: none;
              border-bottom: 1px solid #000000;"
            [(ngModel)]="reportDetails.nextInspection" formControlName="nextInspection" placeholder="Enter year">
            <div *ngIf="submitted && f.nextInspection.errors" class="invalid-feedback">
              <div *ngIf="f.nextInspection?.errors?.required">Field Is Required</div>
          </div>
          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Details Of Signatories To The Verification Report</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <h2>Designer Details</h2>

            <mat-icon *ngIf="showAddButton" class="mousechange" (click)="addDesigner()" style="float:right; padding-right: 37px; padding-top: 10px;">add_box</mat-icon>

              <div formArrayName="designer1Arr" *ngFor="let a of getDesigner1Controls(); let i = index">
                <div class="form-group" [formGroupName]="i">
                  <h2>Designer 1*</h2>

                  <div class="form-group" >
                    <div class="row">
                        <div class="col-md-4">
                            <label>Person Name:</label>
                            <input type="text"  formControlName="personName" class="form-control"  placeholder="Enter Person Name"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personName')?.errors }">
                          <div *ngIf="submitted && a.get('personName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personName')?.errors?.required">Person name is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                            <label>* Mobile Number:</label>
                            <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                            (keypress)="keyPressNumbers($event)" (countryChange)="countryChange($event)" placeholder="Enter Mobile Number"
                             formControlName="personContactNo" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personContactNo')?.errors }">
                            <div *ngIf="submitted && a.get('personContactNo')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('personContactNo')?.errors?.required">Mobile Number is Required</div>
                              <!-- <div *ngIf="a.get('personContactNo')?.errors?.minlength">Please Enter 10 Digit Number</div> -->
                              <div *ngIf="a.get('personContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                          </div>
                        </div>

                        <div class="col-md-4">
                            <label>Email:</label>
                            <input type="email"  formControlName="personMailID" class="form-control"  placeholder="Enter Email Address"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personMailID')?.errors }">
                            <div *ngIf="submitted && a.get('personMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('personMailID')?.errors?.pattern">Enter valid email</div>
                        </div>
                        </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Manager Name:</label>
                            <input type="text"  formControlName="managerName" class="form-control"  placeholder="Enter Manager Name"
                            [ngClass]="{ 'is-invalid': submitted && a.get('managerName')?.errors }">
                          <div *ngIf="submitted && a.get('managerName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerName')?.errors?.required">Manager name is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                          <label>* Mobile Number:</label>
                          <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                          (keypress)="keyPressNumbers($event)" (countryChange)="countryChange1($event)"
                          formControlName="managerContactNo" class="form-control" placeholder="Enter Mobile Number"
                          [ngClass]="{ 'is-invalid': submitted && a.get('managerContactNo')?.errors }">
                          <div *ngIf="submitted && a.get('managerContactNo')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerContactNo')?.errors?.required">Mobile Number is Required</div>
                            <div *ngIf="a.get('managerContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                            <label>Email:</label>
                            <input type="email"  formControlName="managerMailID" class="form-control"  placeholder="Enter Email Address"
                            [ngClass]="{ 'is-invalid': submitted && a.get('managerMailID')?.errors }">
                          <div *ngIf="submitted && a.get('managerMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('managerMailID')?.errors?.pattern">Enter valid email</div>
                        </div>
                        </div>
                    </div>
                  </div>


                  <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Company Name:</label>
                              <input type="text"  formControlName="companyName" class="form-control"  placeholder="Enter Company Name"
                              [ngClass]="{ 'is-invalid': submitted && a.get('companyName')?.errors }">
                          <div *ngIf="submitted && a.get('companyName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('companyName')?.errors?.required">Company name is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Address Line1:</label>
                              <input type="text"  formControlName="addressLine1" class="form-control"  placeholder="Enter Address Line1"
                              [ngClass]="{ 'is-invalid': submitted && a.get('addressLine1')?.errors}">
                          <div *ngIf="submitted && a.get('addressLine1')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine1')?.errors?.required">AddressLine1 is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Address Line2: (Optional)</label>
                              <input type="text"  formControlName="addressLine2" class="form-control"  placeholder="Enter Address Line2"
                              [ngClass]="{ 'is-invalid': submitted && a.get('addressLine2')?.errors }">
                          <div *ngIf="submitted && a.get('addressLine2')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine2')?.errors?.required">AddressLine2 is required</div>
                        </div>
                          </div>
                      </div>
                  </div>

                  <div class="form-group">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Site Landmark: (Optional)</label>
                            <input type="text"  formControlName="landMark" class="form-control"  placeholder="Enter Landmark"
                            [ngClass]="{ 'is-invalid': submitted && a.get('landMark')?.errors }">
                          <div *ngIf="submitted && a.get('landMark')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('landMark')?.errors?.required">Site Landmark is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                            <label>Country:</label>
                            <select  formControlName="country" class="form-control" (change)="designer1changeCountry($event)"
                            [ngClass]="{ 'is-invalid': submitted && a.get('country')?.errors }">

                                <option value="0" selected>Select Country Name</option>
                                <option *ngFor="let country of countryList" [selected]="country.name=== a.get('country')?.value">{{country.name}}</option>
                            </select>
                            <div *ngIf="submitted && a.get('country')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('country')?.errors?.required">Country is required</div>
                          </div>
                        </div>

                        <div class="col-md-4">
                            <label>State:</label>
                            <select  formControlName="state" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && a.get('state')?.errors}">
                             <!-- <option value="0" selected>{{state1}}</option> -->
                                <option value="0" >Select State Name</option>
                                <option *ngFor="let state of stateList1" [selected]="state.name=== state1">{{state.name}}</option>
                            </select>
                            <div *ngIf="submitted && a.get('state')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('state')?.errors?.required">State is required</div>
                          </div>
                        </div>
                    </div>
                  </div>

                  <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Pincode:</label>
                              <input type="text"  formControlName="pinCode" class="form-control" (keypress)="keyPressNumbers($event)" minlength="6" maxlength="6" placeholder="Enter Pincode"
                              [ngClass]="{ 'is-invalid': submitted && a.get('pinCode')?.errors }">
                          <div *ngIf="submitted && a.get('pinCode')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('pinCode')?.errors?.required">Pincode is required</div>
                            <div *ngIf="a.get('pinCode')?.errors?.maxlength">Enter Six Digit Numbers</div>
                            <div *ngIf="a.get('pinCode')?.errors?.minlength">Enter Six Digit Numbers</div>
                        </div>
                          </div>
                      </div>
                  </div>
                </div>
              </div>

              <div *ngIf="showDesigner2">

                <mat-icon class="mousechange"  (click)="removeDesigner()" style="float:right; padding-right: 37px; padding-top: 10px;">delete</mat-icon>

                <div formArrayName="designer2Arr" *ngFor="let a of getDesigner2Controls(); let i = index">
                  <div class="form-group" [formGroupName]="i">
                    <h2>Designer 2 (Optional)</h2>

                    <div class="form-group" >
                      <div class="row">
                          <div class="col-md-4">
                              <label>Person Name:</label>
                              <input type="text"  formControlName="personName" class="form-control"  placeholder="Enter Person Name"
                              [ngClass]="{ 'is-invalid': submitted && a.get('personName')?.errors }">
                          <div *ngIf="submitted && a.get('personName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personName')?.errors?.required">Person name is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                            <label>* Mobile Number:</label>
                            <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                            (keypress)="keyPressNumbers($event)" (countryChange)="countryChange2($event)" placeholder="Enter Mobile Number"
                             formControlName="personContactNo" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personContactNo')?.errors }">
                            <div *ngIf="submitted && a.get('personContactNo')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('personContactNo')?.errors?.required">Mobile Number is Required</div>
                              <!-- <div *ngIf="a.get('personContactNo')?.errors?.minlength">Please Enter 10 Digit Number</div> -->
                              <div *ngIf="a.get('personContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                          </div>
                          </div>

                          <div class="col-md-4">
                              <label>Email:</label>
                              <input type="email"  formControlName="personMailID" class="form-control"  placeholder="Enter Email Address"
                              [ngClass]="{ 'is-invalid': submitted && a.get('personMailID')?.errors }">
                          <div *ngIf="submitted && a.get('personMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('personMailID')?.errors?.pattern">Enter valid email</div>
                        </div>
                          </div>
                      </div>
                    </div>

                    <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Manager Name:</label>
                              <input type="text"  formControlName="managerName" class="form-control"  placeholder="Enter Manager Name"
                              [ngClass]="{ 'is-invalid': submitted && a.get('managerName')?.errors }">
                          <div *ngIf="submitted && a.get('managerName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerName')?.errors?.required">Manager name is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                            <label>* Mobile Number:</label>
                            <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                            (keypress)="keyPressNumbers($event)" (countryChange)="countryChange3($event)" formControlName="managerContactNo" class="form-control" placeholder="Enter Mobile Number"
                            [ngClass]="{ 'is-invalid': submitted && a.get('managerContactNo')?.errors }">
                            <div *ngIf="submitted && a.get('managerContactNo')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('managerContactNo')?.errors?.required">Mobile Number is Required</div>
                              <div *ngIf="a.get('managerContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                          </div>
                          </div>

                          <div class="col-md-4">
                              <label>Email:</label>
                              <input type="email"  formControlName="managerMailID" class="form-control"  placeholder="Enter Email Address"
                              [ngClass]="{ 'is-invalid': submitted && a.get('managerMailID')?.errors }">
                          <div *ngIf="submitted && a.get('managerMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('managerMailID')?.errors?.pattern">Enter valid email</div>
                        </div>
                          </div>
                      </div>
                    </div>


                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-4">
                                <label>Company Name:</label>
                                <input type="text"  formControlName="companyName" class="form-control"  placeholder="Enter Company Name"
                                [ngClass]="{ 'is-invalid': submitted && a.get('companyName')?.errors }">
                          <div *ngIf="submitted && a.get('companyName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('companyName')?.errors?.required">Company name is required</div>
                        </div>
                            </div>

                            <div class="col-md-4">
                                <label>Address Line1:</label>
                                <input type="text"  formControlName="addressLine1" class="form-control"  placeholder="Enter Address Line1"
                                [ngClass]="{ 'is-invalid': submitted && a.get('addressLine1')?.errors }">
                          <div *ngIf="submitted && a.get('addressLine1')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine1')?.errors?.required">AddressLine1 is required</div>
                        </div>
                            </div>

                            <div class="col-md-4">
                                <label>Address Line2: (Optional)</label>
                                <input type="text"  formControlName="addressLine2" class="form-control"  placeholder="Enter Address Line2"
                                [ngClass]="{ 'is-invalid': submitted && a.get('addressLine2')?.errors}">
                          <div *ngIf="submitted && a.get('addressLine2')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine2')?.errors?.required">AddressLine2 is required</div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-4">
                                <label>Site Landmark: (Optional)</label>
                                <input type="text"  formControlName="landMark" class="form-control"  placeholder="Enter Landmark"
                                [ngClass]="{ 'is-invalid': submitted && a.get('landMark')?.errors }">
                          <div *ngIf="submitted && a.get('landMark')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('landMark')?.errors?.required">Site Landmark is required</div>
                        </div>
                            </div>

                            <div class="col-md-4">
                                <label>Country:</label>
                                <select  formControlName="country" class="form-control" (change)="designer2changeCountry($event)"
                                [ngClass]="{ 'is-invalid': submitted && a.get('country')?.errors }">
                                <option value="0" selected>Select Country Name</option>
                                <option *ngFor="let country of countryList" [selected]="country.name=== a.get('country')?.value">{{country.name}}</option>
                            </select>
                                <div *ngIf="submitted && a.get('country')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('country')?.errors?.required">Country is required</div>
                        </div>

                            </div>

                            <div class="col-md-4">
                                <label>State:</label>
                                <select  formControlName="state" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && a.get('state')?.errors }">
                                <option value="0" selected>Select State Name</option>
                                <option *ngFor="let state of stateList2" [selected]="state.name=== state2">{{state.name}}</option>
                            </select>
                                <div *ngIf="submitted && a.get('state')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('state')?.errors?.required">State is required</div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-4">
                                <label>Pincode:</label>
                                <input type="text"  formControlName="pinCode" class="form-control" (keypress)="keyPressNumbers($event)" minlength="6" maxlength="6" placeholder="Enter Pincode"
                                [ngClass]="{ 'is-invalid': submitted && a.get('pinCode')?.errors}">
                          <div *ngIf="submitted && a.get('pinCode')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('pinCode')?.errors?.required">Pincode is required</div>
                            <div *ngIf="a.get('pinCode')?.errors?.maxlength">Enter Six Digit Numbers</div>
                            <div *ngIf="a.get('pinCode')?.errors?.minlength">Enter Six Digit Numbers</div>
                        </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Details Of Contractor</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <h2>Contractor Details*</h2>

              <div formArrayName="contractorArr" *ngFor="let a of getContractorControls(); let i = index">
                  <div class="form-group" [formGroupName]="i">

                    <div class="form-group" >
                      <div class="row">
                          <div class="col-md-4">
                              <label>Person Name:</label>
                              <input type="text"  formControlName="personName" class="form-control"  placeholder="Enter Person Name"
                              [ngClass]="{ 'is-invalid': submitted && a.get('personName')?.errors }">
                          <div *ngIf="submitted && a.get('personName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personName')?.errors?.required">Person name is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>* Mobile Number:</label>
                              <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                              (keypress)="keyPressNumbers($event)" (countryChange)="countryChange4($event)" formControlName="personContactNo" class="form-control" placeholder="Enter Mobile Number"
                              [ngClass]="{ 'is-invalid': submitted && a.get('personContactNo')?.errors }">
                              <div *ngIf="submitted && a.get('personContactNo')?.errors" class="invalid-feedback">
                                <div *ngIf="a.get('personContactNo')?.errors?.required">Mobile Number is Required</div>
                                <!-- <div *ngIf="a.get('personContactNo')?.errors?.minlength">Please Enter 10 Digit Number</div> -->
                                <div *ngIf="a.get('personContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Email:</label>
                              <input type="email"  formControlName="personMailID" class="form-control"  placeholder="Enter Email Address"
                              [ngClass]="{ 'is-invalid': submitted && a.get('personMailID')?.errors }">
                          <div *ngIf="submitted && a.get('personMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('personMailID')?.errors?.pattern">Enter valid email</div>
                          </div>
                          </div>
                      </div>
                    </div>


                    <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Manager Name:</label>
                              <input type="text"  formControlName="managerName" class="form-control"  placeholder="Enter Manager Name"
                              [ngClass]="{ 'is-invalid': submitted && a.get('managerName')?.errors }">
                          <div *ngIf="submitted && a.get('managerName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerName')?.errors?.required">Manager name is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                            <label>* Mobile Number:</label>
                            <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                            (keypress)="keyPressNumbers($event)" (countryChange)="countryChange5($event)" formControlName="managerContactNo" class="form-control" placeholder="Enter Mobile Number"
                            [ngClass]="{ 'is-invalid': submitted && a.get('managerContactNo')?.errors }">
                          <div *ngIf="submitted && a.get('managerContactNo')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('managerContactNo')?.errors?.required">Mobile Number is Required</div>
                              <!-- <div *ngIf="a.get('managerContactNo')?.errors?.minlength">Please Enter 10 Digit Number</div> -->
                              <div *ngIf="a.get('managerContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Email:</label>
                              <input type="email"  formControlName="managerMailID" class="form-control"  placeholder="Enter Email Address"
                              [ngClass]="{ 'is-invalid': submitted && a.get('managerMailID')?.errors }">
                          <div *ngIf="submitted && a.get('managerMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('managerMailID')?.errors?.pattern">Enter valid email</div>
                          </div>
                          </div>
                      </div>
                    </div>


                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-4">
                                <label>Company Name:</label>
                                <input type="text"  formControlName="companyName" class="form-control"  placeholder="Enter Company Name"
                                [ngClass]="{ 'is-invalid': submitted && a.get('companyName')?.errors }">
                          <div *ngIf="submitted && a.get('companyName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('companyName')?.errors?.required">Company name is required</div>
                        </div>
                            </div>

                            <div class="col-md-4">
                                <label>Address Line1:</label>
                                <input type="text"  formControlName="addressLine1" class="form-control"  placeholder="Enter Address Line1"
                                [ngClass]="{ 'is-invalid': submitted && a.get('addressLine1')?.errors }">
                          <div *ngIf="submitted && a.get('addressLine1')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine1')?.errors?.required">AddressLine1 is required</div>
                        </div>
                            </div>

                            <div class="col-md-4">
                                <label>Address Line2: (Optional)</label>
                                <input type="text"  formControlName="addressLine2" class="form-control"  placeholder="Enter Address Line2"
                                [ngClass]="{ 'is-invalid': submitted && a.get('addressLine2')?.errors }">
                          <div *ngIf="submitted && a.get('addressLine2')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine2')?.errors?.required">AddressLine2 is required</div>
                        </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-4">
                                <label>Site Landmark: (Optional)</label>
                                <input type="text"  formControlName="landMark" class="form-control"  placeholder="Enter Landmark"
                                [ngClass]="{ 'is-invalid': submitted && a.get('landMark')?.errors }">
                          <div *ngIf="submitted && a.get('landMark')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('landMark')?.errors?.required">Site Landmark is required</div>
                        </div>
                            </div>

                            <div class="col-md-4">
                                <label>Country:</label>
                                <select  formControlName="country" class="form-control" (change)="contractorchangeCountry($event)"
                                [ngClass]="{ 'is-invalid': submitted && a.get('country')?.errors }">
                                <option value="0" selected>Select Country Name</option>
                                <option *ngFor="let country of countryList" [selected]="country.name=== a.get('country')?.value">{{country.name}}</option>
                            </select>
                                <div *ngIf="submitted && a.get('country')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('country')?.errors?.required">Country is required</div>
                        </div>

                            </div>

                            <div class="col-md-4">
                                <label>State:</label>
                                <select  formControlName="state" class="form-control"
                                [ngClass]="{ 'is-invalid': submitted && a.get('state')?.errors }">
                                    <option value="0" selected>Select State Name</option>
                                    <option *ngFor="let state of stateList3" [selected]="state.name=== state3">{{state.name}}</option>
                                </select>
                                <div *ngIf="submitted && a.get('state')?.errors" class="invalid-feedback">
                                  <div *ngIf="a.get('state')?.errors?.required">State is required</div>
                              </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-4">
                                <label>Pincode:</label>
                                <input type="text"  formControlName="pinCode" class="form-control" (keypress)="keyPressNumbers($event)" minlength="6" maxLength="6" placeholder="Enter Pincode"
                                [ngClass]="{ 'is-invalid': submitted && a.get('pinCode')?.errors }">
                          <div *ngIf="submitted && a.get('pinCode')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('pinCode')?.errors?.required">Pincode is required</div>
                            <div *ngIf="a.get('pinCode')?.errors?.maxlength">Enter Six Digit Numbers</div>
                            <div *ngIf="a.get('pinCode')?.errors?.minlength">Enter Six Digit Numbers</div>
                        </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>

          </mat-expansion-panel>

          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Details Of Inspector</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <h2>Inspector Details*</h2>

              <div formArrayName="inspectorArr" *ngFor="let a of getInspectorControls(); let i = index">
                <div class="form-group" [formGroupName]="i">
                  <div class="form-group">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Person Name:</label>
                            <input type="text" formControlName="personName" class="form-control" placeholder="Enter Person Name"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personName')?.errors }">
                          <div *ngIf="submitted && a.get('personName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personName')?.errors?.required">Person name is required</div>
                        </div>
                         </div>
                        <div class="col-md-4">
                            <label>* Mobile Number:</label>
                            <input type="tel" ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                            (keypress)="keyPressNumbers($event)" (countryChange)="countryChange6($event)" formControlName="personContactNo" class="form-control" placeholder="Enter Mobile Number"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personContactNo')?.errors }">
                           <div *ngIf="submitted && a.get('personContactNo')?.errors" class="invalid-feedback">
                              <div *ngIf="a.get('personContactNo')?.errors?.required">Mobile Number is Required</div>
                              <!-- <div *ngIf="a.get('personContactNo')?.errors?.minlength">Please Enter 10 Digit Number</div> -->
                              <div *ngIf="a.get('personContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                            <label>Email:</label>
                            <input type="email"  formControlName="personMailID" class="form-control"  placeholder="Enter Email Address"
                            [ngClass]="{ 'is-invalid': submitted && a.get('personMailID')?.errors }">
                          <div *ngIf="submitted && a.get('personMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('personMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('personMailID')?.errors?.pattern">Enter valid email</div>
                        </div>
                        </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Manager Name:</label>
                            <input type="text"  formControlName="managerName" class="form-control"  placeholder="Enter Manager Name"
                            [ngClass]="{ 'is-invalid': submitted && a.get('managerName')?.errors }">
                          <div *ngIf="submitted && a.get('managerName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerName')?.errors?.required">Manager name is required</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                          <label>* Mobile Number:</label>
                          <input type="tel"  ng2TelInput [ng2TelInputOptions]="{initialCountry: 'in',separateDialCode: 'true'}"
                          (keypress)="keyPressNumbers($event)" (countryChange)="countryChange7($event)" formControlName="managerContactNo" class="form-control" placeholder="Enter Mobile Number"
                          [ngClass]="{ 'is-invalid': submitted && a.get('managerContactNo')?.errors}">
                          <div *ngIf="submitted && a.get('managerContactNo')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerContactNo')?.errors?.required">Mobile Number is Required</div>
                            <!-- <div *ngIf="a.get('managerContactNo')?.errors?.minlength">Please Enter 10 Digit Number</div> -->
                            <div *ngIf="a.get('managerContactNo')?.errors?.maxlength">Please Enter 10 Digit Number</div>
                        </div>
                        </div>

                        <div class="col-md-4">
                            <label>Email:</label>
                            <input type="email"  formControlName="managerMailID" class="form-control"  placeholder="Enter Email Address"
                            [ngClass]="{ 'is-invalid': submitted && a.get('managerMailID')?.errors }">
                          <div *ngIf="submitted && a.get('managerMailID')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('managerMailID')?.errors?.required">Email is required</div>
                            <div *ngIf="a.get('managerMailID')?.errors?.pattern">Enter valid email</div>
                        </div>
                        </div>
                    </div>
                  </div>


                  <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Company Name:</label>
                              <input type="text"  formControlName="companyName" class="form-control"  placeholder="Enter Company Name"
                              [ngClass]="{ 'is-invalid': submitted && a.get('companyName')?.errors}">
                          <div *ngIf="submitted && a.get('companyName')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('companyName')?.errors?.required">Company name is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Address Line1:</label>
                              <input type="text"  formControlName="addressLine1" class="form-control"  placeholder="Enter Address Line1"
                              [ngClass]="{ 'is-invalid': submitted && a.get('addressLine1')?.errors }">
                          <div *ngIf="submitted && a.get('addressLine1')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine1')?.errors?.required">AddressLine1 is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Address Line2: (Optional)</label>
                              <input type="text"  formControlName="addressLine2" class="form-control"  placeholder="Enter Address Line2"
                              [ngClass]="{ 'is-invalid': submitted && a.get('addressLine2')?.errors }">
                          <div *ngIf="submitted && a.get('addressLine2')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('addressLine2')?.errors?.required">AddressLine2 is required</div>
                        </div>
                          </div>
                      </div>
                  </div>

                  <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Site Landmark: (Optional)</label>
                              <input type="text"  formControlName="landMark" class="form-control"  placeholder="Enter Landmark"
                              [ngClass]="{ 'is-invalid': submitted && a.get('landMark')?.errors }">
                          <div *ngIf="submitted && a.get('landMark')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('landMark')?.errors?.required">Site Landmark is required</div>
                        </div>
                          </div>

                          <div class="col-md-4">
                              <label>Country:</label>
                              <select  formControlName="country" class="form-control"
                              (change)="inspectorchangeCountry($event)"
                              [ngClass]="{ 'is-invalid': submitted && a.get('country')?.errors }">
                              <option value="0" selected>Select Country Name</option>
                              <option *ngFor="let country of countryList" [selected]="country.name=== a.get('country')?.value">{{country.name}}</option>
                          </select>
                              <div *ngIf="submitted && a.get('country')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('country')?.errors?.required">Country is required</div>
                        </div>

                          </div>

                          <div class="col-md-4">
                              <label>State:</label>
                              <select  formControlName="state" class="form-control"
                              [ngClass]="{ 'is-invalid': submitted && a.get('state')?.errors }">
                                  <option value="0" selected>Select State Name</option>
                                  <option *ngFor="let state of stateList4" [selected]="state.name=== state4">{{state.name}}</option>
                              </select>
                              <div *ngIf="submitted && a.get('state')?.errors" class="invalid-feedback">
                                <div *ngIf="a.get('state')?.errors?.required">State is required</div>
                            </div>
                          </div>
                      </div>
                  </div>

                  <div class="form-group">
                      <div class="row">
                          <div class="col-md-4">
                              <label>Pincode:</label>
                              <input type="text"  formControlName="pinCode" class="form-control" (keypress)="keyPressNumbers($event)" minlength="6" maxLength="6" placeholder="Enter Pincode"
                              [ngClass]="{ 'is-invalid': submitted && a.get('pinCode')?.errors }">
                          <div *ngIf="submitted && a.get('pinCode')?.errors" class="invalid-feedback">
                            <div *ngIf="a.get('pinCode')?.errors?.required">Pincode is required</div>
                            <div *ngIf="a.get('pinCode')?.errors?.maxlength">Enter Six Digit Numbers</div>
                            <div *ngIf="a.get('pinCode')?.errors?.minlength">Enter Six Digit Numbers</div>
                        </div>
                          </div>
                      </div>
                  </div>
                </div>
              </div>
          </mat-expansion-panel>


      <!-- comments start-->
          <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="hideCommentSection">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>Comments</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
           <!--  <mat-accordion lass="mat-table">
              <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                  <div>V comments </div>
                </mat-expansion-panel-header>
                <div formArrayName="inspectorCommentArr" *ngFor="let a of getInspectorCommentControls(); let i = index">
                  <ul [formGroupName]="i" style="list-style-type:none">
                 <li><textarea cols="60" rows="1" formControlName="viewerComments"
                  placeholder="Enter Viewer Comment"></textarea>
                  <div style="display: initial;margin-left: 25px;">
                  <mat-icon class="mousechange" (click)="sendViewerComment()"
                  title="Send comment">send</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;
                  <mat-icon class="mousechange" (click)="replyToViewerComment()"
                  title="Reply comment">reply</mat-icon>&nbsp;&nbsp;&nbsp;&nbsp;
                  <mat-icon class="mousechange" (click)="approveComment()"
                  title="Approve comment">thumb_up_alt</mat-icon>
                </div>
                </li>
                 <div *ngIf="replyCommentBox">
             <ul style="list-style-type:none">
                    <li> 
                      <textarea cols="60" rows="1" placeholder="Enter Inspector Comment"
                      formControlName="inspectorComments"></textarea>
                      <div style="display: initial;margin-left: 25px;">
                      <mat-icon class="mousechange" (click)="inspectorComment()"
                  title="Send reply">send</mat-icon>
                 
                  <mat-icon class="mousechange" (click)="addAnotherInspectorComment()" 
                          style="float:right;" title="Add another comment">add_box</mat-icon>
                          <mat-icon class="mousechange"  *ngIf="getInspectorCommentControls().length > 1" 
                            (click)="InspectorRemoveComment(i)"
                            style="float:right;">delete</mat-icon>
                          </div>
                    </li>
                  </ul>
                 </div>
                  </ul>
                  </div>
              </mat-expansion-panel>
            </mat-accordion> [ngStyle]="{'overflow-y': sendViewerComment ? 'scroll' : (!isExpanded && isShowing ? '295px' : '60px')}"
           -->
         
              <div class="collapse" id="collapseExample">
                <div class="card card-body">
                  <div formArrayName="viewerCommentArr" *ngFor="let a of getViewerCommentControls(); let i = index">
                    <ul  [formGroupName]="i" style="list-style-type:none">
                   <li>
                    <div class="expandCollapse" >
                      <button (click)="toggle(i)" *ngIf=toggleHideShow>
                          {{hideRuleContent[i] ? 'Expand' : 'Collapse'}}
                      </button>
                      <textarea cols="60" rows="1" formControlName="viewerComments" 
                      placeholder="Enter Viewer Comment"></textarea>
    
                      <div style="display: initial;margin-left: 25px;" *ngIf="!hideMatIcons[i]">

                        <mat-icon class="mousechange" (click)="sendViewerComment()" 
                        *ngIf="a.get('viewerComments')?.value==''"
                        title="Send comment">send</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;

                        <mat-icon class="mousechange" (click)="replyToViewerComment(a)" *ngIf="a.get('inspectorComments')?.value!='' && hideAsViewerLogin"
                       title="Reply comment">reply</mat-icon>&nbsp;&nbsp;&nbsp;&nbsp;

                        <mat-icon class="mousechange" (click)="approveComment()" *ngIf="hideapprove"
                        title="Approve comment">thumb_up_alt</mat-icon>
                      </div>
                  </div>
                  </li>
                   <div class="expandCollapseContent" *ngIf="!hideRuleContent[i] && replyCommentBox">
               <ul style="list-style-type:none">
                      <li> 
                        <textarea cols="60" rows="1" placeholder="Enter Inspector Comment" *ngIf="a.get('inspectorComments')?.value!=''"
                        formControlName="inspectorComments" ></textarea>
                        <div style="display: initial;margin-left: 25px;">
                        <mat-icon class="mousechange" (click)="inspectorComment()" *ngIf="a.get('inspectorComments')?.value==''"
                    title="Send reply">send</mat-icon>
                   
                    <mat-icon class="mousechange" (click)="addAnotherviewerComment($event)"
                    *ngIf="(a.get('inspectorComments')?.value!='' || a.get('viewerComments')?.value!='') && hideAdd"
                     style="float:right;" title="Add another comment">add_box</mat-icon>
                    
                    <mat-icon class="mousechange"  *ngIf="a.get('inspectorComments')?.value=='' || a.get('viewerComments')?.value==''" 
                              (click)="ViewerRemoveComment(i)" 
                              style="float:right;">delete</mat-icon>
                            </div>
                      </li>
                    </ul>
                   </div>
                     </ul> <!--(click)="actionMethod1($event1)"-->
                    </div>            
                  </div>
              </div>
               
           
          </mat-expansion-panel>
<!-- comments end-->

 <!-- completed comments start-->
 <!-- <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="completedComments">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <h3>Completed Comments</h3>
    </mat-panel-title>

  </mat-expansion-panel-header>
    <div class="row">
      <div class="col-12">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col" style="text-align: center;">Comments</th>
              <th scope="col" style="text-align: center;">Reply</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <textarea cols="60" rows="3" [disabled]="disable"
                placeholder="Viewer comment">{{viewerComments}}</textarea>
              </td>
              <td>
                <textarea cols="60" rows="3" [disabled]="disable"
                placeholder="Inspector reply">{{inspectorComments}}</textarea>
              </td>
            </tr>
           
          </tbody>
        </table>
      </div>
    </div>
  
</mat-expansion-panel> -->
<!-- completed comments end-->
      </mat-accordion>
   
      <div *ngIf="validationError" style="text-align: center;margin-top: 30px;">
        <span class="alert alert-danger">{{validationErrorMsg}}</span>
      </div>
      <div *ngIf="commentSuccess" style="text-align: center;margin-top: 30px;">
        <span class="successshow">Your comment has been sent to Inspector</span>
      </div>
      <br>
      <div style="text-align: center;margin-top: 40px;">
        <!-- <button class="previous" mat-button matStepperPrevious>&laquo; Back</button> -->
        <button  class="next" [disabled]="disable" (click)="gotoNextModal(content1)" mat-button>Next &raquo;</button>
      </div>

    </form>

    </div>
  </div>
  <ng-template #content1 let-modal>

  <div class="modal-body">
   <div class="centre-text m-btm30">
    <div *ngIf="success" style="text-align: center;">
      <span class="successshow">{{successMsg}}</span>
     </div>
     <div *ngIf="Error" style="text-align: center;">
       <span class="errorshow">{{errorMsg}}</span>
      </div>
    </div>
   </div>
  <br>
     <button type="button" class="close" class="btn btn-block btn-primary btn-rounded btn-md font-weight-medium auth-form-btn"
     aria-label="Close"  (click)="closeModalDialog()" matStepperNext>

      <span aria-hidden="true">Ok</span>

  </button>


  </ng-template>
